Running tests with coverage...
testing: warning: no tests to run
PASS
coverage: [no statements]
ok  	github.com/fsvxavier/nexs-mcp/benchmark	(cached)	coverage: [no statements] [no tests to run]
	github.com/fsvxavier/nexs-mcp/cmd/nexs-mcp		coverage: 0.0% of statements
=== RUN   TestExpandMemoryContext_Success
=== RUN   TestExpandMemoryContext_Success/expand_with_persona_and_skill
=== RUN   TestExpandMemoryContext_Success/no_related_elements
=== RUN   TestExpandMemoryContext_Success/single_related_element
=== RUN   TestExpandMemoryContext_Success/multiple_element_types
--- PASS: TestExpandMemoryContext_Success (0.00s)
    --- PASS: TestExpandMemoryContext_Success/expand_with_persona_and_skill (0.00s)
    --- PASS: TestExpandMemoryContext_Success/no_related_elements (0.00s)
    --- PASS: TestExpandMemoryContext_Success/single_related_element (0.00s)
    --- PASS: TestExpandMemoryContext_Success/multiple_element_types (0.00s)
=== RUN   TestExpandMemoryContext_WithErrors
=== RUN   TestExpandMemoryContext_WithErrors/missing_element_with_error
=== RUN   TestExpandMemoryContext_WithErrors/missing_element_ignore_errors
=== RUN   TestExpandMemoryContext_WithErrors/all_elements_missing
--- PASS: TestExpandMemoryContext_WithErrors (0.00s)
    --- PASS: TestExpandMemoryContext_WithErrors/missing_element_with_error (0.00s)
    --- PASS: TestExpandMemoryContext_WithErrors/missing_element_ignore_errors (0.00s)
    --- PASS: TestExpandMemoryContext_WithErrors/all_elements_missing (0.00s)
=== RUN   TestExpandMemoryContext_TypeFilters
=== RUN   TestExpandMemoryContext_TypeFilters/include_only_personas
=== RUN   TestExpandMemoryContext_TypeFilters/exclude_skills
=== RUN   TestExpandMemoryContext_TypeFilters/include_personas_and_agents
--- PASS: TestExpandMemoryContext_TypeFilters (0.00s)
    --- PASS: TestExpandMemoryContext_TypeFilters/include_only_personas (0.00s)
    --- PASS: TestExpandMemoryContext_TypeFilters/exclude_skills (0.00s)
    --- PASS: TestExpandMemoryContext_TypeFilters/include_personas_and_agents (0.00s)
=== RUN   TestExpandMemoryContext_MaxElements
--- PASS: TestExpandMemoryContext_MaxElements (0.00s)
=== RUN   TestExpandMemoryContext_Parallel
--- PASS: TestExpandMemoryContext_Parallel (0.01s)
=== RUN   TestExpandMemoryContext_Sequential
--- PASS: TestExpandMemoryContext_Sequential (0.01s)
=== RUN   TestExpandMemoryContext_Timeout
--- PASS: TestExpandMemoryContext_Timeout (0.10s)
=== RUN   TestEnrichedContext_HelperMethods
=== RUN   TestEnrichedContext_HelperMethods/GetElementByID
=== RUN   TestEnrichedContext_HelperMethods/GetElementsByType
=== RUN   TestEnrichedContext_HelperMethods/HasErrors
--- PASS: TestEnrichedContext_HelperMethods (0.00s)
    --- PASS: TestEnrichedContext_HelperMethods/GetElementByID (0.00s)
    --- PASS: TestEnrichedContext_HelperMethods/GetElementsByType (0.00s)
    --- PASS: TestEnrichedContext_HelperMethods/HasErrors (0.00s)
=== RUN   TestParseRelatedIDs
=== RUN   TestParseRelatedIDs/simple_IDs
=== RUN   TestParseRelatedIDs/with_spaces
=== RUN   TestParseRelatedIDs/empty_string
=== RUN   TestParseRelatedIDs/single_ID
=== RUN   TestParseRelatedIDs/trailing_comma
--- PASS: TestParseRelatedIDs (0.00s)
    --- PASS: TestParseRelatedIDs/simple_IDs (0.00s)
    --- PASS: TestParseRelatedIDs/with_spaces (0.00s)
    --- PASS: TestParseRelatedIDs/empty_string (0.00s)
    --- PASS: TestParseRelatedIDs/single_ID (0.00s)
    --- PASS: TestParseRelatedIDs/trailing_comma (0.00s)
=== RUN   TestShouldIncludeElement
=== RUN   TestShouldIncludeElement/no_filters
=== RUN   TestShouldIncludeElement/include_match
=== RUN   TestShouldIncludeElement/include_no_match
=== RUN   TestShouldIncludeElement/exclude_match
=== RUN   TestShouldIncludeElement/exclude_no_match
--- PASS: TestShouldIncludeElement (0.00s)
    --- PASS: TestShouldIncludeElement/no_filters (0.00s)
    --- PASS: TestShouldIncludeElement/include_match (0.00s)
    --- PASS: TestShouldIncludeElement/include_no_match (0.00s)
    --- PASS: TestShouldIncludeElement/exclude_match (0.00s)
    --- PASS: TestShouldIncludeElement/exclude_no_match (0.00s)
=== RUN   TestCalculateTokenSavings
=== RUN   TestCalculateTokenSavings/no_elements
=== RUN   TestCalculateTokenSavings/one_element
=== RUN   TestCalculateTokenSavings/five_elements
--- PASS: TestCalculateTokenSavings (0.00s)
    --- PASS: TestCalculateTokenSavings/no_elements (0.00s)
    --- PASS: TestCalculateTokenSavings/one_element (0.00s)
    --- PASS: TestCalculateTokenSavings/five_elements (0.00s)
=== RUN   TestAggregateByConsensus
=== RUN   TestAggregateByConsensus/unanimous_consensus
=== RUN   TestAggregateByConsensus/majority_consensus
=== RUN   TestAggregateByConsensus/no_consensus
=== RUN   TestAggregateByConsensus/quorum_not_met
--- PASS: TestAggregateByConsensus (0.00s)
    --- PASS: TestAggregateByConsensus/unanimous_consensus (0.00s)
    --- PASS: TestAggregateByConsensus/majority_consensus (0.00s)
    --- PASS: TestAggregateByConsensus/no_consensus (0.00s)
    --- PASS: TestAggregateByConsensus/quorum_not_met (0.00s)
=== RUN   TestAggregateByVoting
=== RUN   TestAggregateByVoting/simple_majority
=== RUN   TestAggregateByVoting/weighted_by_priority
=== RUN   TestAggregateByVoting/insufficient_votes
=== RUN   TestAggregateByVoting/custom_weights
--- PASS: TestAggregateByVoting (0.00s)
    --- PASS: TestAggregateByVoting/simple_majority (0.00s)
    --- PASS: TestAggregateByVoting/weighted_by_priority (0.00s)
    --- PASS: TestAggregateByVoting/insufficient_votes (0.00s)
    --- PASS: TestAggregateByVoting/custom_weights (0.00s)
=== RUN   TestWeightedConsensus
--- PASS: TestWeightedConsensus (0.00s)
=== RUN   TestThresholdConsensus
=== RUN   TestThresholdConsensus/threshold_met
=== RUN   TestThresholdConsensus/threshold_not_met
--- PASS: TestThresholdConsensus (0.00s)
    --- PASS: TestThresholdConsensus/threshold_met (0.00s)
    --- PASS: TestThresholdConsensus/threshold_not_met (0.00s)
=== RUN   TestGroupSimilarResults
--- PASS: TestGroupSimilarResults (0.00s)
=== RUN   TestResultToKey
=== RUN   TestResultToKey/string
=== RUN   TestResultToKey/number
=== RUN   TestResultToKey/map
=== RUN   TestResultToKey/array
--- PASS: TestResultToKey (0.00s)
    --- PASS: TestResultToKey/string (0.00s)
    --- PASS: TestResultToKey/number (0.00s)
    --- PASS: TestResultToKey/map (0.00s)
    --- PASS: TestResultToKey/array (0.00s)
=== RUN   TestBreakTie
=== RUN   TestBreakTie/first_strategy
=== RUN   TestBreakTie/highest_priority
=== RUN   TestBreakTie/random
--- PASS: TestBreakTie (0.00s)
    --- PASS: TestBreakTie/first_strategy (0.00s)
    --- PASS: TestBreakTie/highest_priority (0.00s)
    --- PASS: TestBreakTie/random (0.00s)
=== RUN   TestVotingTieBreaker
--- PASS: TestVotingTieBreaker (0.00s)
=== RUN   TestConsensusWithNoSuccessfulResults
--- PASS: TestConsensusWithNoSuccessfulResults (0.00s)
=== RUN   TestVotingWithConfidenceWeight
--- PASS: TestVotingWithConfidenceWeight (0.00s)
=== RUN   TestResultEquals
=== RUN   TestResultEquals/equal_strings
=== RUN   TestResultEquals/different_strings
=== RUN   TestResultEquals/equal_maps
=== RUN   TestResultEquals/different_maps
--- PASS: TestResultEquals (0.00s)
    --- PASS: TestResultEquals/equal_strings (0.00s)
    --- PASS: TestResultEquals/different_strings (0.00s)
    --- PASS: TestResultEquals/equal_maps (0.00s)
    --- PASS: TestResultEquals/different_maps (0.00s)
=== RUN   TestNewEnsembleExecutor
--- PASS: TestNewEnsembleExecutor (0.00s)
=== RUN   TestExecuteSequential
    ensemble_executor_test.go:149: Creating agent with ID: agent_Agent-1_20251222-222416 (ensemble expects: agent-agent-1)
    ensemble_executor_test.go:149: Creating agent with ID: agent_Agent-2_20251222-222416 (ensemble expects: agent-agent-2)
    ensemble_executor_test.go:149: Creating agent with ID: agent_Agent-3_20251222-222416 (ensemble expects: agent-agent-3)
{"time":"2025-12-22T22:24:16.105217512-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-1_20251222-222416"}
{"time":"2025-12-22T22:24:16.105294035-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-2_20251222-222416"}
{"time":"2025-12-22T22:24:16.105321928-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-3_20251222-222416"}
--- PASS: TestExecuteSequential (0.00s)
=== RUN   TestExecuteParallel
{"time":"2025-12-22T22:24:16.105622497-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-2_20251222-222416"}
{"time":"2025-12-22T22:24:16.105644047-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-3_20251222-222416"}
{"time":"2025-12-22T22:24:16.105637463-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-1_20251222-222416"}
--- PASS: TestExecuteParallel (0.00s)
=== RUN   TestExecuteHybrid
{"time":"2025-12-22T22:24:16.106037628-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-1_20251222-222416"}
{"time":"2025-12-22T22:24:16.106107888-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-2_20251222-222416"}
{"time":"2025-12-22T22:24:16.106174051-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-3_20251222-222416"}
--- PASS: TestExecuteHybrid (0.00s)
=== RUN   TestExecuteWithTimeout
--- PASS: TestExecuteWithTimeout (0.00s)
=== RUN   TestExecuteFailFast
{"time":"2025-12-22T22:24:16.106587166-03:00","level":"INFO","msg":"Executing agent","agent_id":"agent_Agent-1_20251222-222416"}
--- PASS: TestExecuteFailFast (0.00s)
=== RUN   TestAggregationStrategies
=== RUN   TestAggregationStrategies/first
=== RUN   TestAggregationStrategies/last
=== RUN   TestAggregationStrategies/all
=== RUN   TestAggregationStrategies/merge
--- PASS: TestAggregationStrategies (0.00s)
    --- PASS: TestAggregationStrategies/first (0.00s)
    --- PASS: TestAggregationStrategies/last (0.00s)
    --- PASS: TestAggregationStrategies/all (0.00s)
    --- PASS: TestAggregationStrategies/merge (0.00s)
=== RUN   TestDetermineStatus
=== RUN   TestDetermineStatus/all_success
=== RUN   TestDetermineStatus/all_failed
=== RUN   TestDetermineStatus/partial_success
=== RUN   TestDetermineStatus/execution_error
--- PASS: TestDetermineStatus (0.00s)
    --- PASS: TestDetermineStatus/all_success (0.00s)
    --- PASS: TestDetermineStatus/all_failed (0.00s)
    --- PASS: TestDetermineStatus/partial_success (0.00s)
    --- PASS: TestDetermineStatus/execution_error (0.00s)
=== RUN   TestGroupByPriority
--- PASS: TestGroupByPriority (0.00s)
=== RUN   TestInitializeSharedContext
--- PASS: TestInitializeSharedContext (0.00s)
=== RUN   TestExecuteWithInvalidEnsembleID
--- PASS: TestExecuteWithInvalidEnsembleID (0.00s)
=== RUN   TestExecuteWithNoMembers
--- PASS: TestExecuteWithNoMembers (0.00s)
=== RUN   TestExecuteWithUnsupportedMode
--- PASS: TestExecuteWithUnsupportedMode (0.00s)
=== RUN   TestNewExecutionMonitor
--- PASS: TestNewExecutionMonitor (0.00s)
=== RUN   TestExecutionMonitor_StartAgent
--- PASS: TestExecutionMonitor_StartAgent (0.00s)
=== RUN   TestExecutionMonitor_UpdateAgentProgress
--- PASS: TestExecutionMonitor_UpdateAgentProgress (0.00s)
=== RUN   TestExecutionMonitor_CompleteAgent
--- PASS: TestExecutionMonitor_CompleteAgent (0.00s)
=== RUN   TestExecutionMonitor_FailAgent
--- PASS: TestExecutionMonitor_FailAgent (0.00s)
=== RUN   TestExecutionMonitor_GetProgress
--- PASS: TestExecutionMonitor_GetProgress (0.00s)
=== RUN   TestExecutionMonitor_SetPhase
--- PASS: TestExecutionMonitor_SetPhase (0.00s)
=== RUN   TestExecutionMonitor_SetStatus
--- PASS: TestExecutionMonitor_SetStatus (0.00s)
=== RUN   TestExecutionMonitor_ProgressCallbacks
--- PASS: TestExecutionMonitor_ProgressCallbacks (0.03s)
=== RUN   TestExecutionMonitor_StateCallbacks
--- PASS: TestExecutionMonitor_StateCallbacks (0.00s)
=== RUN   TestExecutionMonitor_GetProgressUpdate
--- PASS: TestExecutionMonitor_GetProgressUpdate (0.00s)
=== RUN   TestExecutionMonitor_EstimatedRemaining
--- PASS: TestExecutionMonitor_EstimatedRemaining (0.00s)
=== RUN   TestExecutionMonitor_MultipleCallbacks
--- PASS: TestExecutionMonitor_MultipleCallbacks (0.01s)
=== RUN   TestExecutionMonitor_ConcurrentAccess
--- PASS: TestExecutionMonitor_ConcurrentAccess (0.00s)
=== RUN   TestExecutionMonitor_AgentProgressIsolation
--- PASS: TestExecutionMonitor_AgentProgressIsolation (0.00s)
=== RUN   TestExecutionMonitor_ZeroAgents
--- PASS: TestExecutionMonitor_ZeroAgents (0.00s)
=== RUN   TestExecutionMonitor_ProgressUpdateCopy
--- PASS: TestExecutionMonitor_ProgressUpdateCopy (0.00s)
=== RUN   TestNewRecommendationEngine
--- PASS: TestNewRecommendationEngine (0.00s)
=== RUN   TestRecommendForElement_DirectRelationships
--- PASS: TestRecommendForElement_DirectRelationships (0.00s)
=== RUN   TestRecommendForElement_CoOccurrence
--- PASS: TestRecommendForElement_CoOccurrence (0.00s)
=== RUN   TestRecommendForElement_TagSimilarity
--- PASS: TestRecommendForElement_TagSimilarity (0.00s)
=== RUN   TestRecommendForElement_TypeBasedRecommendations
--- PASS: TestRecommendForElement_TypeBasedRecommendations (0.00s)
=== RUN   TestRecommendForElement_FilterByType
--- PASS: TestRecommendForElement_FilterByType (0.00s)
=== RUN   TestRecommendForElement_ExcludeIDs
--- PASS: TestRecommendForElement_ExcludeIDs (0.00s)
=== RUN   TestRecommendForElement_MinScore
--- PASS: TestRecommendForElement_MinScore (0.00s)
=== RUN   TestRecommendForElement_MaxResults
--- PASS: TestRecommendForElement_MaxResults (0.00s)
=== RUN   TestCalculateTagSimilarity
=== RUN   TestCalculateTagSimilarity/identical_tags
=== RUN   TestCalculateTagSimilarity/no_overlap
=== RUN   TestCalculateTagSimilarity/partial_overlap
=== RUN   TestCalculateTagSimilarity/empty_tags
=== RUN   TestCalculateTagSimilarity/case_insensitive
--- PASS: TestCalculateTagSimilarity (0.00s)
    --- PASS: TestCalculateTagSimilarity/identical_tags (0.00s)
    --- PASS: TestCalculateTagSimilarity/no_overlap (0.00s)
    --- PASS: TestCalculateTagSimilarity/partial_overlap (0.00s)
    --- PASS: TestCalculateTagSimilarity/empty_tags (0.00s)
    --- PASS: TestCalculateTagSimilarity/case_insensitive (0.00s)
=== RUN   TestUniqueStrings
--- PASS: TestUniqueStrings (0.00s)
=== RUN   TestRelationshipIndex_Add
--- PASS: TestRelationshipIndex_Add (0.00s)
=== RUN   TestRelationshipIndex_AddMultipleMemories
--- PASS: TestRelationshipIndex_AddMultipleMemories (0.00s)
=== RUN   TestRelationshipIndex_Remove
--- PASS: TestRelationshipIndex_Remove (0.00s)
=== RUN   TestRelationshipIndex_GetRelatedElements
--- PASS: TestRelationshipIndex_GetRelatedElements (0.00s)
=== RUN   TestRelationshipIndex_GetRelatedMemories
--- PASS: TestRelationshipIndex_GetRelatedMemories (0.00s)
=== RUN   TestRelationshipIndex_Rebuild
--- PASS: TestRelationshipIndex_Rebuild (0.00s)
=== RUN   TestRelationshipIndex_RebuildClearsExisting
--- PASS: TestRelationshipIndex_RebuildClearsExisting (0.00s)
=== RUN   TestRelationshipIndex_Stats
--- PASS: TestRelationshipIndex_Stats (0.00s)
=== RUN   TestIndexCache_GetSet
--- PASS: TestIndexCache_GetSet (0.00s)
=== RUN   TestIndexCache_Expiration
--- PASS: TestIndexCache_Expiration (0.15s)
=== RUN   TestIndexCache_Invalidate
--- PASS: TestIndexCache_Invalidate (0.00s)
=== RUN   TestIndexCache_InvalidatePattern
--- PASS: TestIndexCache_InvalidatePattern (0.00s)
=== RUN   TestIndexCache_Clear
--- PASS: TestIndexCache_Clear (0.00s)
=== RUN   TestIndexCache_Stats
--- PASS: TestIndexCache_Stats (0.00s)
=== RUN   TestGetMemoriesRelatedTo
--- PASS: TestGetMemoriesRelatedTo (0.00s)
=== RUN   TestGetMemoriesRelatedTo_WithCache
--- PASS: TestGetMemoriesRelatedTo_WithCache (0.00s)
=== RUN   TestHelperFunctions
=== RUN   TestHelperFunctions/parseRelatedIDsFromString
=== RUN   TestHelperFunctions/contains
=== RUN   TestHelperFunctions/removeString
=== RUN   TestHelperFunctions/copyStrings
--- PASS: TestHelperFunctions (0.00s)
    --- PASS: TestHelperFunctions/parseRelatedIDsFromString (0.00s)
    --- PASS: TestHelperFunctions/contains (0.00s)
    --- PASS: TestHelperFunctions/removeString (0.00s)
    --- PASS: TestHelperFunctions/copyStrings (0.00s)
=== RUN   TestNewRelationshipInferenceEngine
--- PASS: TestNewRelationshipInferenceEngine (0.00s)
=== RUN   TestInferRelationshipsForElement_BasicFunctionality
--- PASS: TestInferRelationshipsForElement_BasicFunctionality (0.00s)
=== RUN   TestInferRelationships_NonExistentElement
--- PASS: TestInferRelationships_NonExistentElement (0.00s)
=== RUN   TestInferenceOptions_Defaults
--- PASS: TestInferenceOptions_Defaults (0.00s)
=== RUN   TestInferRelationships_WithMultipleMethods
--- PASS: TestInferRelationships_WithMultipleMethods (0.00s)
=== RUN   TestInferRelationships_WithHighConfidenceThreshold
--- PASS: TestInferRelationships_WithHighConfidenceThreshold (0.00s)
=== RUN   TestInferRelationships_WithTargetTypeFilter
--- PASS: TestInferRelationships_WithTargetTypeFilter (0.00s)
=== RUN   TestInferRelationships_AutoApply
--- PASS: TestInferRelationships_AutoApply (0.00s)
=== RUN   TestInferredRelationship_Structure
--- PASS: TestInferredRelationship_Structure (0.00s)
=== RUN   TestInferenceOptions_RequireEvidence
--- PASS: TestInferenceOptions_RequireEvidence (0.00s)
=== RUN   TestInferRelationships_InvalidMethod
--- PASS: TestInferRelationships_InvalidMethod (0.00s)
=== RUN   TestMetricsCollector_RecordAndGetStatistics
--- PASS: TestMetricsCollector_RecordAndGetStatistics (0.00s)
=== RUN   TestMetricsCollector_PeriodFiltering
--- PASS: TestMetricsCollector_PeriodFiltering (0.00s)
=== RUN   TestMetricsCollector_SaveAndLoad
--- PASS: TestMetricsCollector_SaveAndLoad (0.00s)
=== RUN   TestMetricsCollector_MostUsedTools
--- PASS: TestMetricsCollector_MostUsedTools (0.00s)
=== RUN   TestMetricsCollector_ClearMetrics
--- PASS: TestMetricsCollector_ClearMetrics (0.00s)
=== RUN   TestNewWorkingMemoryService
--- PASS: TestNewWorkingMemoryService (0.00s)
=== RUN   TestWorkingMemoryService_Add
=== RUN   TestWorkingMemoryService_Add/valid_memory
{"time":"2025-12-22T22:24:16.315313913-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-123-Test content_20251222-222416","priority":"medium","session_id":"session-123"}}
=== RUN   TestWorkingMemoryService_Add/empty_session_ID
=== RUN   TestWorkingMemoryService_Add/empty_content
=== RUN   TestWorkingMemoryService_Add/low_priority
{"time":"2025-12-22T22:24:16.315682996-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-22T23:24:16-03:00","id":"working_memory_session-123-Low priority content_20251222-222416","priority":"low","session_id":"session-123"}}
=== RUN   TestWorkingMemoryService_Add/critical_priority
{"time":"2025-12-22T22:24:16.315852852-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T22:24:16-03:00","id":"working_memory_session-123-Critical content_20251222-222416","priority":"critical","session_id":"session-123"}}
--- PASS: TestWorkingMemoryService_Add (0.00s)
    --- PASS: TestWorkingMemoryService_Add/valid_memory (0.00s)
    --- PASS: TestWorkingMemoryService_Add/empty_session_ID (0.00s)
    --- PASS: TestWorkingMemoryService_Add/empty_content (0.00s)
    --- PASS: TestWorkingMemoryService_Add/low_priority (0.00s)
    --- PASS: TestWorkingMemoryService_Add/critical_priority (0.00s)
=== RUN   TestWorkingMemoryService_Get
{"time":"2025-12-22T22:24:16.316080082-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-123-Test content_20251222-222416","priority":"medium","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.316066586-03:00","level":"INFO","msg":"Working memory promoted","!BADKEY":{"access_count":1,"importance":0.5215999996320417,"long_term_id":"memory_promoted_working_memory_session-123-Critical content_20251222-222416_20251222-222416","session_id":"session-123","working_id":"working_memory_session-123-Critical content_20251222-222416"}}
--- PASS: TestWorkingMemoryService_Get (0.00s)
=== RUN   TestWorkingMemoryService_List
{"time":"2025-12-22T22:24:16.316295494-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-123-Content 1_20251222-222416","priority":"medium","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.316393539-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T10:24:16-03:00","id":"working_memory_session-123-Content 2_20251222-222416","priority":"high","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.316468041-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-22T23:24:16-03:00","id":"working_memory_session-123-Content 3_20251222-222416","priority":"low","session_id":"session-123"}}
--- PASS: TestWorkingMemoryService_List (0.00s)
=== RUN   TestWorkingMemoryService_Promote
{"time":"2025-12-22T22:24:16.316718967-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T10:24:16-03:00","id":"working_memory_session-123-Important content to_20251222-222416","priority":"high","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.316931084-03:00","level":"INFO","msg":"Working memory promoted","!BADKEY":{"access_count":6,"importance":0.5827999931324586,"long_term_id":"memory_promoted_working_memory_session-123-Important content to_20251222-222416_20251222-222416","session_id":"session-123","working_id":"working_memory_session-123-Important content to_20251222-222416"}}
--- PASS: TestWorkingMemoryService_Promote (0.00s)
=== RUN   TestWorkingMemoryService_ClearSession
{"time":"2025-12-22T22:24:16.317232925-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-123-Content 1_20251222-222416","priority":"medium","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.317364315-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T10:24:16-03:00","id":"working_memory_session-123-Content 2_20251222-222416","priority":"high","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.317458438-03:00","level":"INFO","msg":"Session cleared","!BADKEY":{"session_id":"session-123"}}
--- PASS: TestWorkingMemoryService_ClearSession (0.00s)
=== RUN   TestWorkingMemoryService_ExpireMemory
{"time":"2025-12-22T22:24:16.317657454-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-123-Content_20251222-222416","priority":"medium","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.317772245-03:00","level":"INFO","msg":"Working memory expired","!BADKEY":{"memory_id":"working_memory_session-123-Content_20251222-222416","session_id":"session-123"}}
--- PASS: TestWorkingMemoryService_ExpireMemory (0.00s)
=== RUN   TestWorkingMemoryService_ExtendTTL
{"time":"2025-12-22T22:24:16.32065756-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-123-Content_20251222-222416","priority":"medium","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.330978696-03:00","level":"INFO","msg":"Working memory TTL extended","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","memory_id":"working_memory_session-123-Content_20251222-222416","session_id":"session-123"}}
--- PASS: TestWorkingMemoryService_ExtendTTL (0.01s)
=== RUN   TestWorkingMemoryService_GetStats
{"time":"2025-12-22T22:24:16.331332358-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-123-Content 1_20251222-222416","priority":"medium","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.331471589-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T10:24:16-03:00","id":"working_memory_session-123-Content 2_20251222-222416","priority":"high","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.331559051-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-22T23:24:16-03:00","id":"working_memory_session-123-Content 3_20251222-222416","priority":"low","session_id":"session-123"}}
--- PASS: TestWorkingMemoryService_GetStats (0.00s)
=== RUN   TestWorkingMemoryService_Export
{"time":"2025-12-22T22:24:16.331903405-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-123-Content 1_20251222-222416","priority":"medium","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.332032427-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T10:24:16-03:00","id":"working_memory_session-123-Content 2_20251222-222416","priority":"high","session_id":"session-123"}}
--- PASS: TestWorkingMemoryService_Export (0.00s)
=== RUN   TestWorkingMemoryService_AutoPromotion
{"time":"2025-12-22T22:24:16.332261691-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T10:24:16-03:00","id":"working_memory_session-123-Important content_20251222-222416","priority":"high","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.335992125-03:00","level":"INFO","msg":"Working memory promoted","!BADKEY":{"access_count":5,"importance":0.561699858348692,"long_term_id":"memory_promoted_working_memory_session-123-Important content_20251222-222416_20251222-222416","session_id":"session-123","working_id":"working_memory_session-123-Important content_20251222-222416"}}
==================
WARNING: DATA RACE
Write at 0x00c0001d7030 by goroutine 279:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:99 +0x51
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:119 +0x1be
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_AutoPromotion()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:402 +0x15c
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Previous read at 0x00c0001d7030 by goroutine 281:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:232 +0x16d4
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 279 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1997 +0x9d2
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:2477 +0x85
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.runTests()
      /usr/local/go/src/testing/testing.go:2475 +0x96c
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:2337 +0xed4
  main.main()
      _testmain.go:277 +0x164

Goroutine 281 (finished) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_AutoPromotion()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:402 +0x15c
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0001d7038 by goroutine 279:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:184 +0x224
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0xdc
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:119 +0x1be
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_AutoPromotion()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:402 +0x15c
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Previous read at 0x00c0001d7038 by goroutine 281:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:233 +0x176a
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 279 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1997 +0x9d2
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:2477 +0x85
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.runTests()
      /usr/local/go/src/testing/testing.go:2475 +0x96c
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:2337 +0xed4
  main.main()
      _testmain.go:277 +0x164

Goroutine 281 (finished) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_AutoPromotion()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:402 +0x15c
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
    testing.go:1617: race detected during execution of test
--- FAIL: TestWorkingMemoryService_AutoPromotion (0.21s)
=== RUN   TestWorkingMemoryService_BackgroundCleanup
--- PASS: TestWorkingMemoryService_BackgroundCleanup (0.01s)
=== RUN   TestWorkingMemoryService_MultipleSessions
{"time":"2025-12-22T22:24:16.551774674-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-1-Content 1_20251222-222416","priority":"medium","session_id":"session-1"}}
{"time":"2025-12-22T22:24:16.551908398-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T10:24:16-03:00","id":"working_memory_session-2-Content 2_20251222-222416","priority":"high","session_id":"session-2"}}
--- PASS: TestWorkingMemoryService_MultipleSessions (0.00s)
=== RUN   TestWorkingMemoryService_ConcurrentAccess
{"time":"2025-12-22T22:24:16.552130131-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_concurrent-session-Concurrent content_20251222-222416","priority":"medium","session_id":"concurrent-session"}}
==================
WARNING: DATA RACE
Write at 0x00c0001d6cd8 by goroutine 290:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:184 +0x224
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0xdc
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:119 +0x1be
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Previous read at 0x00c0001d6cd8 by goroutine 289:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).ShouldPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:128 +0x112
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:124 +0x23d
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 290 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:486 +0x13a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 289 (finished) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:486 +0x13a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0001d6cd0 by goroutine 298:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:99 +0x51
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:119 +0x1be
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Previous read at 0x00c0001d6cd0 by goroutine 290:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).ShouldPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:123 +0xf3
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:124 +0x23d
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 298 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:486 +0x13a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 290 (finished) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:486 +0x13a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Read at 0x00c0001d6cd8 by goroutine 299:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:212 +0x1067
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Previous write at 0x00c0001d6cd8 by goroutine 293:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:184 +0x224
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0xdc
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:119 +0x1be
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 299 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 293 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:486 +0x13a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0001d6d28 by goroutine 300:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).MarkPromoted()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:198 +0x143c
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:225 +0x1385
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Previous read at 0x00c0001d6d28 by goroutine 294:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).IsPromoted()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:111 +0x36
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).ShouldPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:116 +0x12
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:124 +0x23d
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 300 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 294 (finished) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:486 +0x13a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0002945a0 by goroutine 299:
  runtime.mapassign_faststr()
      /usr/local/go/src/internal/runtime/maps/runtime_faststr_swiss.go:263 +0x0
  github.com/fsvxavier/nexs-mcp/internal/application.(*MockRepository).Create()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/ensemble_executor_test.go:27 +0x6e
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:219 +0x127e
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Previous write at 0x00c0002945a0 by goroutine 300:
  runtime.mapassign_faststr()
      /usr/local/go/src/internal/runtime/maps/runtime_faststr_swiss.go:263 +0x0
  github.com/fsvxavier/nexs-mcp/internal/application.(*MockRepository).Create()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/ensemble_executor_test.go:27 +0x6e
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:219 +0x127e
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 299 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 300 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4
==================
==================
WARNING: DATA RACE
Write at 0x00c0000f6918 by goroutine 299:
  github.com/fsvxavier/nexs-mcp/internal/application.(*MockRepository).Create()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/ensemble_executor_test.go:27 +0x7a
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:219 +0x127e
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Previous write at 0x00c0000f6918 by goroutine 300:
  github.com/fsvxavier/nexs-mcp/internal/application.(*MockRepository).Create()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/ensemble_executor_test.go:27 +0x7a
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:219 +0x127e
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 299 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 300 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4
==================
==================
WARNING: DATA RACE
Write at 0x00c0001d6cd0 by goroutine 297:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:99 +0x51
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:119 +0x1be
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Previous read at 0x00c0001d6cd0 by goroutine 299:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:211 +0xf4b
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 297 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:486 +0x13a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 299 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4
==================
==================
WARNING: DATA RACE
Write at 0x00c0001d6cd8 by goroutine 297:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:184 +0x224
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0xdc
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:119 +0x1be
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Previous read at 0x00c0001d6cd8 by goroutine 300:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:233 +0x176a
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 297 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:486 +0x13a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 300 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4
==================
{"time":"2025-12-22T22:24:16.552736567-03:00","level":"INFO","msg":"Working memory promoted","!BADKEY":{"access_count":10,"importance":0.6017999846451259,"long_term_id":"memory_promoted_working_memory_concurrent-session-Concurrent content_20251222-222416_20251222-222416","session_id":"concurrent-session","working_id":"working_memory_concurrent-session-Concurrent content_20251222-222416"}}
==================
WARNING: DATA RACE
Write at 0x00c0001d6d28 by goroutine 299:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).MarkPromoted()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:198 +0x143c
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:225 +0x1385
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Previous read at 0x00c0001d6d28 by goroutine 302:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).IsPromoted()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:111 +0x1a9
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:174 +0x17c
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 299 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 302 (finished) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4
==================
==================
WARNING: DATA RACE
Write at 0x00c0001d6d30 by goroutine 299:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).MarkPromoted()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:199 +0x148c
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:225 +0x1385
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Previous read at 0x00c0001d6d30 by goroutine 302:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:177 +0x9eb
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 299 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4

Goroutine 302 (finished) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4
==================
==================
WARNING: DATA RACE
Write at 0x00c0001d6cd0 by goroutine 287:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:99 +0x51
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:119 +0x1be
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:499 +0x38a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Previous read at 0x00c0001d6cd0 by goroutine 299:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:232 +0x16d4
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 287 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1997 +0x9d2
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:2477 +0x85
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.runTests()
      /usr/local/go/src/testing/testing.go:2475 +0x96c
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:2337 +0xed4
  main.main()
      _testmain.go:277 +0x164

Goroutine 299 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4
==================
==================
WARNING: DATA RACE
Write at 0x00c0001d6cd8 by goroutine 287:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:184 +0x224
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0xdc
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:119 +0x1be
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:499 +0x38a
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Previous read at 0x00c0001d6cd8 by goroutine 299:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Promote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:233 +0x176a
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).autoPromote()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:241 +0x105
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get.gowrap1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x5d

Goroutine 287 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1997 +0x9d2
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:2477 +0x85
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.runTests()
      /usr/local/go/src/testing/testing.go:2475 +0x96c
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:2337 +0xed4
  main.main()
      _testmain.go:277 +0x164

Goroutine 299 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/application.(*WorkingMemoryService).Get()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service.go:125 +0x370
  github.com/fsvxavier/nexs-mcp/internal/application.TestWorkingMemoryService_ConcurrentAccess.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/application/working_memory_service_test.go:487 +0xa4
==================
{"time":"2025-12-22T22:24:16.553033042-03:00","level":"INFO","msg":"Working memory promoted","!BADKEY":{"access_count":11,"importance":0.6217999694750448,"long_term_id":"memory_promoted_working_memory_concurrent-session-Concurrent content_20251222-222416_20251222-222416","session_id":"concurrent-session","working_id":"working_memory_concurrent-session-Concurrent content_20251222-222416"}}
    testing.go:1617: race detected during execution of test
--- FAIL: TestWorkingMemoryService_ConcurrentAccess (0.00s)
=== RUN   TestWorkingMemoryService_PromoteWithMetadata
{"time":"2025-12-22T22:24:16.553424381-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T10:24:16-03:00","id":"working_memory_session-123-Content with metadat_20251222-222416","priority":"high","session_id":"session-123"}}
{"time":"2025-12-22T22:24:16.553566548-03:00","level":"INFO","msg":"Working memory promoted","!BADKEY":{"access_count":1,"importance":0.4820999997590417,"long_term_id":"memory_promoted_working_memory_session-123-Content with metadat_20251222-222416_20251222-222416","session_id":"session-123","working_id":"working_memory_session-123-Content with metadat_20251222-222416"}}
--- PASS: TestWorkingMemoryService_PromoteWithMetadata (0.00s)
=== RUN   TestSessionMemoryCache_LastActivity
{"time":"2025-12-22T22:24:16.55374984-03:00","level":"INFO","msg":"Working memory created","!BADKEY":{"expires_at":"2025-12-23T02:24:16-03:00","id":"working_memory_session-123-Content_20251222-222416","priority":"medium","session_id":"session-123"}}
--- PASS: TestSessionMemoryCache_LastActivity (0.01s)
FAIL
coverage: 70.0% of statements
FAIL	github.com/fsvxavier/nexs-mcp/internal/application	0.628s
=== RUN   TestBackup_Create
--- PASS: TestBackup_Create (0.01s)
=== RUN   TestBackup_ValidateBackup
--- PASS: TestBackup_ValidateBackup (0.01s)
=== RUN   TestBackup_CompressionOptions
=== RUN   TestBackup_CompressionOptions/None
=== RUN   TestBackup_CompressionOptions/Fast
=== RUN   TestBackup_CompressionOptions/Best
--- PASS: TestBackup_CompressionOptions (0.01s)
    --- PASS: TestBackup_CompressionOptions/None (0.00s)
    --- PASS: TestBackup_CompressionOptions/Fast (0.01s)
    --- PASS: TestBackup_CompressionOptions/Best (0.01s)
=== RUN   TestRestore_BasicRestore
--- PASS: TestRestore_BasicRestore (0.01s)
=== RUN   TestRestore_OverwriteExisting
--- PASS: TestRestore_OverwriteExisting (0.01s)
=== RUN   TestRestore_DryRun
--- PASS: TestRestore_DryRun (0.01s)
=== RUN   TestRestore_MergeStrategy
=== RUN   TestRestore_MergeStrategy/Skip_Strategy
=== RUN   TestRestore_MergeStrategy/Overwrite_Strategy
=== RUN   TestRestore_MergeStrategy/Merge_Strategy
--- PASS: TestRestore_MergeStrategy (0.01s)
    --- PASS: TestRestore_MergeStrategy/Skip_Strategy (0.00s)
    --- PASS: TestRestore_MergeStrategy/Overwrite_Strategy (0.00s)
    --- PASS: TestRestore_MergeStrategy/Merge_Strategy (0.00s)
=== RUN   TestRestore_InvalidBackup
--- PASS: TestRestore_InvalidBackup (0.00s)
=== RUN   TestRestore_NonExistentFile
--- PASS: TestRestore_NonExistentFile (0.00s)
=== RUN   TestRestore_SkipValidation
--- PASS: TestRestore_SkipValidation (0.01s)
=== RUN   TestRollback_NoBackups
--- PASS: TestRollback_NoBackups (0.00s)
=== RUN   TestRollback_WithBackup
--- PASS: TestRollback_WithBackup (0.01s)
=== RUN   TestRestoreOptions_Defaults
--- PASS: TestRestoreOptions_Defaults (0.00s)
=== RUN   TestRestoreResult_Structure
--- PASS: TestRestoreResult_Structure (0.00s)
=== RUN   TestNewRestoreService
--- PASS: TestNewRestoreService (0.00s)
PASS
coverage: 63.2% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/backup	(cached)	coverage: 63.2% of statements
=== RUN   TestNewInstaller
--- PASS: TestNewInstaller (0.00s)
=== RUN   TestInstaller_Install_Simple
--- PASS: TestInstaller_Install_Simple (0.00s)
=== RUN   TestInstaller_Install_AlreadyInstalled
--- PASS: TestInstaller_Install_AlreadyInstalled (0.01s)
=== RUN   TestInstaller_Install_WithDependencies
--- PASS: TestInstaller_Install_WithDependencies (0.00s)
=== RUN   TestInstaller_Uninstall
--- PASS: TestInstaller_Uninstall (0.01s)
=== RUN   TestInstaller_Uninstall_WithDependents
--- PASS: TestInstaller_Uninstall_WithDependents (0.00s)
=== RUN   TestInstaller_ListInstalled
--- PASS: TestInstaller_ListInstalled (0.00s)
=== RUN   TestInstaller_StatePersistence
--- PASS: TestInstaller_StatePersistence (0.00s)
=== RUN   TestInstaller_InstallationRecord
--- PASS: TestInstaller_InstallationRecord (0.00s)
=== RUN   TestInstaller_SkipValidation
--- PASS: TestInstaller_SkipValidation (0.00s)
=== RUN   TestManager_CheckUpdate
--- PASS: TestManager_CheckUpdate (0.00s)
=== RUN   TestManager_Update
--- PASS: TestManager_Update (0.01s)
=== RUN   TestManager_Export
--- PASS: TestManager_Export (0.01s)
=== RUN   TestManager_CheckUpdates
--- PASS: TestManager_CheckUpdates (0.01s)
=== RUN   TestManager_UpdateAll
--- PASS: TestManager_UpdateAll (0.01s)
=== RUN   TestManager_ExportWithOptions
=== RUN   TestManager_ExportWithOptions/Default_options
=== RUN   TestManager_ExportWithOptions/Fast_compression
=== RUN   TestManager_ExportWithOptions/No_compression
--- PASS: TestManager_ExportWithOptions (0.01s)
    --- PASS: TestManager_ExportWithOptions/Default_options (0.00s)
    --- PASS: TestManager_ExportWithOptions/Fast_compression (0.00s)
    --- PASS: TestManager_ExportWithOptions/No_compression (0.00s)
=== RUN   TestParseManifest
=== RUN   TestParseManifest/valid_minimal_manifest
=== RUN   TestParseManifest/complete_manifest_with_all_fields
=== RUN   TestParseManifest/invalid_YAML
--- PASS: TestParseManifest (0.00s)
    --- PASS: TestParseManifest/valid_minimal_manifest (0.00s)
    --- PASS: TestParseManifest/complete_manifest_with_all_fields (0.00s)
    --- PASS: TestParseManifest/invalid_YAML (0.00s)
=== RUN   TestManifest_Validate
=== RUN   TestManifest_Validate/valid_manifest
=== RUN   TestManifest_Validate/missing_name
=== RUN   TestManifest_Validate/missing_version
=== RUN   TestManifest_Validate/missing_author
=== RUN   TestManifest_Validate/missing_description
=== RUN   TestManifest_Validate/empty_elements
=== RUN   TestManifest_Validate/element_with_empty_path
=== RUN   TestManifest_Validate/dependency_with_empty_URI
--- PASS: TestManifest_Validate (0.00s)
    --- PASS: TestManifest_Validate/valid_manifest (0.00s)
    --- PASS: TestManifest_Validate/missing_name (0.00s)
    --- PASS: TestManifest_Validate/missing_version (0.00s)
    --- PASS: TestManifest_Validate/missing_author (0.00s)
    --- PASS: TestManifest_Validate/missing_description (0.00s)
    --- PASS: TestManifest_Validate/empty_elements (0.00s)
    --- PASS: TestManifest_Validate/element_with_empty_path (0.00s)
    --- PASS: TestManifest_Validate/dependency_with_empty_URI (0.00s)
=== RUN   TestManifest_ID
--- PASS: TestManifest_ID (0.00s)
=== RUN   TestManifest_FullID
--- PASS: TestManifest_FullID (0.00s)
=== RUN   TestManifest_ToYAML
--- PASS: TestManifest_ToYAML (0.00s)
=== RUN   TestNewRegistry
--- PASS: TestNewRegistry (0.00s)
=== RUN   TestRegistry_AddSource
--- PASS: TestRegistry_AddSource (0.00s)
=== RUN   TestRegistry_GetSources
--- PASS: TestRegistry_GetSources (0.00s)
=== RUN   TestRegistry_Browse_EmptyRegistry
--- PASS: TestRegistry_Browse_EmptyRegistry (0.00s)
=== RUN   TestRegistry_Browse_SingleSource
--- PASS: TestRegistry_Browse_SingleSource (0.00s)
=== RUN   TestRegistry_Browse_MultipleSources
--- PASS: TestRegistry_Browse_MultipleSources (0.00s)
=== RUN   TestRegistry_Browse_Deduplication
--- PASS: TestRegistry_Browse_Deduplication (0.00s)
=== RUN   TestRegistry_Browse_DifferentVersions
--- PASS: TestRegistry_Browse_DifferentVersions (0.00s)
=== RUN   TestRegistry_Browse_SpecificSource
--- PASS: TestRegistry_Browse_SpecificSource (0.00s)
=== RUN   TestRegistry_Browse_SourceNotFound
--- PASS: TestRegistry_Browse_SourceNotFound (0.00s)
=== RUN   TestRegistry_Browse_SourceError
--- PASS: TestRegistry_Browse_SourceError (0.00s)
=== RUN   TestRegistry_Browse_PartialFailure
--- PASS: TestRegistry_Browse_PartialFailure (0.00s)
=== RUN   TestRegistry_Get
--- PASS: TestRegistry_Get (0.00s)
=== RUN   TestRegistry_Get_NoSupportingSource
--- PASS: TestRegistry_Get_NoSupportingSource (0.00s)
=== RUN   TestRegistry_Get_SourceError
--- PASS: TestRegistry_Get_SourceError (0.00s)
=== RUN   TestRegistry_FindSource
--- PASS: TestRegistry_FindSource (0.00s)
=== RUN   TestRegistry_ThreadSafety
--- PASS: TestRegistry_ThreadSafety (0.00s)
=== RUN   TestRegistry_Browse_WithFilter
--- PASS: TestRegistry_Browse_WithFilter (0.00s)
=== RUN   TestNewValidator
--- PASS: TestNewValidator (0.00s)
=== RUN   TestIsValidEmail
=== RUN   TestIsValidEmail/Valid_simple
=== RUN   TestIsValidEmail/Valid_with_subdomain
=== RUN   TestIsValidEmail/Valid_with_plus
=== RUN   TestIsValidEmail/Valid_with_dots
=== RUN   TestIsValidEmail/Invalid_no_@
=== RUN   TestIsValidEmail/Invalid_no_domain
=== RUN   TestIsValidEmail/Invalid_no_user
=== RUN   TestIsValidEmail/Invalid_empty
=== RUN   TestIsValidEmail/Invalid_spaces
--- PASS: TestIsValidEmail (0.00s)
    --- PASS: TestIsValidEmail/Valid_simple (0.00s)
    --- PASS: TestIsValidEmail/Valid_with_subdomain (0.00s)
    --- PASS: TestIsValidEmail/Valid_with_plus (0.00s)
    --- PASS: TestIsValidEmail/Valid_with_dots (0.00s)
    --- PASS: TestIsValidEmail/Invalid_no_@ (0.00s)
    --- PASS: TestIsValidEmail/Invalid_no_domain (0.00s)
    --- PASS: TestIsValidEmail/Invalid_no_user (0.00s)
    --- PASS: TestIsValidEmail/Invalid_empty (0.00s)
    --- PASS: TestIsValidEmail/Invalid_spaces (0.00s)
=== RUN   TestIsValidURL
=== RUN   TestIsValidURL/Valid_HTTP
=== RUN   TestIsValidURL/Valid_HTTPS
=== RUN   TestIsValidURL/Valid_with_path
=== RUN   TestIsValidURL/Valid_with_query
=== RUN   TestIsValidURL/Invalid_no_scheme
=== RUN   TestIsValidURL/Invalid_empty
=== RUN   TestIsValidURL/Invalid_invalid_scheme
--- PASS: TestIsValidURL (0.00s)
    --- PASS: TestIsValidURL/Valid_HTTP (0.00s)
    --- PASS: TestIsValidURL/Valid_HTTPS (0.00s)
    --- PASS: TestIsValidURL/Valid_with_path (0.00s)
    --- PASS: TestIsValidURL/Valid_with_query (0.00s)
    --- PASS: TestIsValidURL/Invalid_no_scheme (0.00s)
    --- PASS: TestIsValidURL/Invalid_empty (0.00s)
    --- PASS: TestIsValidURL/Invalid_invalid_scheme (0.00s)
=== RUN   TestIsValidVersion
=== RUN   TestIsValidVersion/Valid_simple
=== RUN   TestIsValidVersion/Valid_with_patch
=== RUN   TestIsValidVersion/Valid_with_prerelease
=== RUN   TestIsValidVersion/Valid_with_prerelease_number
=== RUN   TestIsValidVersion/Valid_with_prerelease_complex
=== RUN   TestIsValidVersion/Invalid_no_dots
=== RUN   TestIsValidVersion/Invalid_one_dot
=== RUN   TestIsValidVersion/Invalid_letters
=== RUN   TestIsValidVersion/Invalid_empty
--- PASS: TestIsValidVersion (0.00s)
    --- PASS: TestIsValidVersion/Valid_simple (0.00s)
    --- PASS: TestIsValidVersion/Valid_with_patch (0.00s)
    --- PASS: TestIsValidVersion/Valid_with_prerelease (0.00s)
    --- PASS: TestIsValidVersion/Valid_with_prerelease_number (0.00s)
    --- PASS: TestIsValidVersion/Valid_with_prerelease_complex (0.00s)
    --- PASS: TestIsValidVersion/Invalid_no_dots (0.00s)
    --- PASS: TestIsValidVersion/Invalid_one_dot (0.00s)
    --- PASS: TestIsValidVersion/Invalid_letters (0.00s)
    --- PASS: TestIsValidVersion/Invalid_empty (0.00s)
=== RUN   TestIsValidCollectionName
=== RUN   TestIsValidCollectionName/Valid_simple
=== RUN   TestIsValidCollectionName/Valid_with_numbers
=== RUN   TestIsValidCollectionName/Valid_all_lowercase
=== RUN   TestIsValidCollectionName/Invalid_uppercase
=== RUN   TestIsValidCollectionName/Invalid_spaces
=== RUN   TestIsValidCollectionName/Invalid_underscore
=== RUN   TestIsValidCollectionName/Invalid_empty
=== RUN   TestIsValidCollectionName/Invalid_starts_with_hyphen
--- PASS: TestIsValidCollectionName (0.00s)
    --- PASS: TestIsValidCollectionName/Valid_simple (0.00s)
    --- PASS: TestIsValidCollectionName/Valid_with_numbers (0.00s)
    --- PASS: TestIsValidCollectionName/Valid_all_lowercase (0.00s)
    --- PASS: TestIsValidCollectionName/Invalid_uppercase (0.00s)
    --- PASS: TestIsValidCollectionName/Invalid_spaces (0.00s)
    --- PASS: TestIsValidCollectionName/Invalid_underscore (0.00s)
    --- PASS: TestIsValidCollectionName/Invalid_empty (0.00s)
    --- PASS: TestIsValidCollectionName/Invalid_starts_with_hyphen (0.00s)
=== RUN   TestIsValidElementType
=== RUN   TestIsValidElementType/Valid_persona
=== RUN   TestIsValidElementType/Valid_skill
=== RUN   TestIsValidElementType/Valid_template
=== RUN   TestIsValidElementType/Valid_agent
=== RUN   TestIsValidElementType/Valid_memory
=== RUN   TestIsValidElementType/Valid_ensemble
=== RUN   TestIsValidElementType/Invalid_unknown
=== RUN   TestIsValidElementType/Invalid_empty
=== RUN   TestIsValidElementType/Invalid_uppercase
--- PASS: TestIsValidElementType (0.00s)
    --- PASS: TestIsValidElementType/Valid_persona (0.00s)
    --- PASS: TestIsValidElementType/Valid_skill (0.00s)
    --- PASS: TestIsValidElementType/Valid_template (0.00s)
    --- PASS: TestIsValidElementType/Valid_agent (0.00s)
    --- PASS: TestIsValidElementType/Valid_memory (0.00s)
    --- PASS: TestIsValidElementType/Valid_ensemble (0.00s)
    --- PASS: TestIsValidElementType/Invalid_unknown (0.00s)
    --- PASS: TestIsValidElementType/Invalid_empty (0.00s)
    --- PASS: TestIsValidElementType/Invalid_uppercase (0.00s)
=== RUN   TestIsValidDependencyURI
=== RUN   TestIsValidDependencyURI/Valid_GitHub
=== RUN   TestIsValidDependencyURI/Valid_file
=== RUN   TestIsValidDependencyURI/Valid_HTTP
=== RUN   TestIsValidDependencyURI/Valid_HTTPS
=== RUN   TestIsValidDependencyURI/Invalid_no_scheme
=== RUN   TestIsValidDependencyURI/Invalid_empty
=== RUN   TestIsValidDependencyURI/Invalid_local_scheme
--- PASS: TestIsValidDependencyURI (0.00s)
    --- PASS: TestIsValidDependencyURI/Valid_GitHub (0.00s)
    --- PASS: TestIsValidDependencyURI/Valid_file (0.00s)
    --- PASS: TestIsValidDependencyURI/Valid_HTTP (0.00s)
    --- PASS: TestIsValidDependencyURI/Valid_HTTPS (0.00s)
    --- PASS: TestIsValidDependencyURI/Invalid_no_scheme (0.00s)
    --- PASS: TestIsValidDependencyURI/Invalid_empty (0.00s)
    --- PASS: TestIsValidDependencyURI/Invalid_local_scheme (0.00s)
=== RUN   TestIsValidHookType
=== RUN   TestIsValidHookType/Valid_command
=== RUN   TestIsValidHookType/Valid_validate
=== RUN   TestIsValidHookType/Valid_backup
=== RUN   TestIsValidHookType/Valid_confirm
=== RUN   TestIsValidHookType/Invalid_unknown
=== RUN   TestIsValidHookType/Invalid_empty
=== RUN   TestIsValidHookType/Invalid_pre-install
--- PASS: TestIsValidHookType (0.00s)
    --- PASS: TestIsValidHookType/Valid_command (0.00s)
    --- PASS: TestIsValidHookType/Valid_validate (0.00s)
    --- PASS: TestIsValidHookType/Valid_backup (0.00s)
    --- PASS: TestIsValidHookType/Valid_confirm (0.00s)
    --- PASS: TestIsValidHookType/Invalid_unknown (0.00s)
    --- PASS: TestIsValidHookType/Invalid_empty (0.00s)
    --- PASS: TestIsValidHookType/Invalid_pre-install (0.00s)
=== RUN   TestIsValidVersionConstraint
=== RUN   TestIsValidVersionConstraint/Valid_exact
=== RUN   TestIsValidVersionConstraint/Valid_greater_equal
=== RUN   TestIsValidVersionConstraint/Valid_less
=== RUN   TestIsValidVersionConstraint/Valid_caret
=== RUN   TestIsValidVersionConstraint/Valid_tilde
=== RUN   TestIsValidVersionConstraint/Valid_wildcard
=== RUN   TestIsValidVersionConstraint/Invalid_empty
=== RUN   TestIsValidVersionConstraint/Invalid_bad_version
=== RUN   TestIsValidVersionConstraint/Invalid_range
--- PASS: TestIsValidVersionConstraint (0.00s)
    --- PASS: TestIsValidVersionConstraint/Valid_exact (0.00s)
    --- PASS: TestIsValidVersionConstraint/Valid_greater_equal (0.00s)
    --- PASS: TestIsValidVersionConstraint/Valid_less (0.00s)
    --- PASS: TestIsValidVersionConstraint/Valid_caret (0.00s)
    --- PASS: TestIsValidVersionConstraint/Valid_tilde (0.00s)
    --- PASS: TestIsValidVersionConstraint/Valid_wildcard (0.00s)
    --- PASS: TestIsValidVersionConstraint/Invalid_empty (0.00s)
    --- PASS: TestIsValidVersionConstraint/Invalid_bad_version (0.00s)
    --- PASS: TestIsValidVersionConstraint/Invalid_range (0.00s)
=== RUN   TestValidateManifest_ValidMinimal
--- PASS: TestValidateManifest_ValidMinimal (0.00s)
=== RUN   TestValidateManifest_MissingName
--- PASS: TestValidateManifest_MissingName (0.00s)
=== RUN   TestValidateManifest_MissingVersion
--- PASS: TestValidateManifest_MissingVersion (0.00s)
=== RUN   TestValidateManifest_InvalidVersion
--- PASS: TestValidateManifest_InvalidVersion (0.00s)
=== RUN   TestValidateManifest_NoElements
--- PASS: TestValidateManifest_NoElements (0.00s)
=== RUN   TestValidateComprehensive_Valid
--- PASS: TestValidateComprehensive_Valid (0.00s)
=== RUN   TestValidateComprehensive_MultipleErrors
--- PASS: TestValidateComprehensive_MultipleErrors (0.00s)
=== RUN   TestValidationError_Structure
--- PASS: TestValidationError_Structure (0.00s)
=== RUN   TestValidationResult_Structure
--- PASS: TestValidationResult_Structure (0.00s)
=== RUN   TestValidateComprehensive_WithWarnings
--- PASS: TestValidateComprehensive_WithWarnings (0.00s)
=== RUN   TestIsValidCollectionName_EdgeCases
=== RUN   TestIsValidCollectionName_EdgeCases/Too_short
=== RUN   TestIsValidCollectionName_EdgeCases/Min_length
=== RUN   TestIsValidCollectionName_EdgeCases/Max_length_64
=== RUN   TestIsValidCollectionName_EdgeCases/Too_long
=== RUN   TestIsValidCollectionName_EdgeCases/Special_chars
=== RUN   TestIsValidCollectionName_EdgeCases/Ends_with_hyphen
--- PASS: TestIsValidCollectionName_EdgeCases (0.00s)
    --- PASS: TestIsValidCollectionName_EdgeCases/Too_short (0.00s)
    --- PASS: TestIsValidCollectionName_EdgeCases/Min_length (0.00s)
    --- PASS: TestIsValidCollectionName_EdgeCases/Max_length_64 (0.00s)
    --- PASS: TestIsValidCollectionName_EdgeCases/Too_long (0.00s)
    --- PASS: TestIsValidCollectionName_EdgeCases/Special_chars (0.00s)
    --- PASS: TestIsValidCollectionName_EdgeCases/Ends_with_hyphen (0.00s)
=== RUN   TestIsValidEmail_EdgeCases
=== RUN   TestIsValidEmail_EdgeCases/Multiple_@
=== RUN   TestIsValidEmail_EdgeCases/Dot_at_end
=== RUN   TestIsValidEmail_EdgeCases/Consecutive_dots
=== RUN   TestIsValidEmail_EdgeCases/Valid_with_numbers
--- PASS: TestIsValidEmail_EdgeCases (0.00s)
    --- PASS: TestIsValidEmail_EdgeCases/Multiple_@ (0.00s)
    --- PASS: TestIsValidEmail_EdgeCases/Dot_at_end (0.00s)
    --- PASS: TestIsValidEmail_EdgeCases/Consecutive_dots (0.00s)
    --- PASS: TestIsValidEmail_EdgeCases/Valid_with_numbers (0.00s)
=== RUN   TestIsValidVersion_EdgeCases
=== RUN   TestIsValidVersion_EdgeCases/Zero_version
=== RUN   TestIsValidVersion_EdgeCases/Large_numbers
=== RUN   TestIsValidVersion_EdgeCases/Complex_prerelease
=== RUN   TestIsValidVersion_EdgeCases/Leading_zeros
=== RUN   TestIsValidVersion_EdgeCases/Negative
--- PASS: TestIsValidVersion_EdgeCases (0.00s)
    --- PASS: TestIsValidVersion_EdgeCases/Zero_version (0.00s)
    --- PASS: TestIsValidVersion_EdgeCases/Large_numbers (0.00s)
    --- PASS: TestIsValidVersion_EdgeCases/Complex_prerelease (0.00s)
    --- PASS: TestIsValidVersion_EdgeCases/Leading_zeros (0.00s)
    --- PASS: TestIsValidVersion_EdgeCases/Negative (0.00s)
=== RUN   TestValidateManifest_WithMaintainers
--- PASS: TestValidateManifest_WithMaintainers (0.00s)
=== RUN   TestValidateManifest_WithInvalidMaintainerEmail
--- PASS: TestValidateManifest_WithInvalidMaintainerEmail (0.00s)
=== RUN   TestValidateComprehensive_Stats
--- PASS: TestValidateComprehensive_Stats (0.00s)
PASS
coverage: 49.5% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/collection	(cached)	coverage: 49.5% of statements
=== RUN   TestNewChecksumValidator_DefaultAlgorithm
--- PASS: TestNewChecksumValidator_DefaultAlgorithm (0.00s)
=== RUN   TestNewChecksumValidator_WithAlgorithm
=== RUN   TestNewChecksumValidator_WithAlgorithm/SHA256
=== RUN   TestNewChecksumValidator_WithAlgorithm/SHA512
--- PASS: TestNewChecksumValidator_WithAlgorithm (0.00s)
    --- PASS: TestNewChecksumValidator_WithAlgorithm/SHA256 (0.00s)
    --- PASS: TestNewChecksumValidator_WithAlgorithm/SHA512 (0.00s)
=== RUN   TestComputeString_SHA256
=== RUN   TestComputeString_SHA256/Empty_string
=== RUN   TestComputeString_SHA256/Simple_text
=== RUN   TestComputeString_SHA256/JSON_data
--- PASS: TestComputeString_SHA256 (0.00s)
    --- PASS: TestComputeString_SHA256/Empty_string (0.00s)
    --- PASS: TestComputeString_SHA256/Simple_text (0.00s)
    --- PASS: TestComputeString_SHA256/JSON_data (0.00s)
=== RUN   TestComputeString_SHA512
--- PASS: TestComputeString_SHA512 (0.00s)
=== RUN   TestCompute_ValidFile
--- PASS: TestCompute_ValidFile (0.00s)
=== RUN   TestCompute_NonExistentFile
--- PASS: TestCompute_NonExistentFile (0.00s)
=== RUN   TestCompute_EmptyFile
--- PASS: TestCompute_EmptyFile (0.00s)
=== RUN   TestCompute_LargeFile
--- PASS: TestCompute_LargeFile (0.03s)
=== RUN   TestValidate_Success
--- PASS: TestValidate_Success (0.00s)
=== RUN   TestValidate_ChecksumMismatch
--- PASS: TestValidate_ChecksumMismatch (0.00s)
=== RUN   TestValidate_CaseInsensitive
--- PASS: TestValidate_CaseInsensitive (0.00s)
=== RUN   TestValidate_WithWhitespace
--- PASS: TestValidate_WithWhitespace (0.00s)
=== RUN   TestValidateBytes_Success
--- PASS: TestValidateBytes_Success (0.00s)
=== RUN   TestValidateBytes_Mismatch
--- PASS: TestValidateBytes_Mismatch (0.00s)
=== RUN   TestValidateBytes_EmptyData
--- PASS: TestValidateBytes_EmptyData (0.00s)
=== RUN   TestUnsupportedAlgorithm_ComputeString
--- PASS: TestUnsupportedAlgorithm_ComputeString (0.00s)
=== RUN   TestUnsupportedAlgorithm_Compute
--- PASS: TestUnsupportedAlgorithm_Compute (0.00s)
=== RUN   TestUnsupportedAlgorithm_ValidateBytes
--- PASS: TestUnsupportedAlgorithm_ValidateBytes (0.00s)
=== RUN   TestChecksumAlgorithm_Constants
--- PASS: TestChecksumAlgorithm_Constants (0.00s)
=== RUN   TestCompute_SHA256_vs_SHA512_Different
--- PASS: TestCompute_SHA256_vs_SHA512_Different (0.00s)
=== RUN   TestComputeString_Deterministic
--- PASS: TestComputeString_Deterministic (0.00s)
=== RUN   TestValidate_FileNotFound
--- PASS: TestValidate_FileNotFound (0.00s)
=== RUN   TestAlgorithm_Getter
--- PASS: TestAlgorithm_Getter (0.00s)
=== RUN   TestNewCodeScanner
--- PASS: TestNewCodeScanner (0.00s)
=== RUN   TestCodeScanner_SetThreshold
=== RUN   TestCodeScanner_SetThreshold/Set_to_Critical
=== RUN   TestCodeScanner_SetThreshold/Set_to_High
=== RUN   TestCodeScanner_SetThreshold/Set_to_Medium
=== RUN   TestCodeScanner_SetThreshold/Set_to_Low
--- PASS: TestCodeScanner_SetThreshold (0.00s)
    --- PASS: TestCodeScanner_SetThreshold/Set_to_Critical (0.00s)
    --- PASS: TestCodeScanner_SetThreshold/Set_to_High (0.00s)
    --- PASS: TestCodeScanner_SetThreshold/Set_to_Medium (0.00s)
    --- PASS: TestCodeScanner_SetThreshold/Set_to_Low (0.00s)
=== RUN   TestCodeScanner_AddRule
--- PASS: TestCodeScanner_AddRule (0.00s)
=== RUN   TestCodeScanner_ShouldReport
=== RUN   TestCodeScanner_ShouldReport/Critical_with_Low_threshold
=== RUN   TestCodeScanner_ShouldReport/High_with_Low_threshold
=== RUN   TestCodeScanner_ShouldReport/Medium_with_Low_threshold
=== RUN   TestCodeScanner_ShouldReport/Low_with_Low_threshold
=== RUN   TestCodeScanner_ShouldReport/Low_with_High_threshold
=== RUN   TestCodeScanner_ShouldReport/Medium_with_High_threshold
=== RUN   TestCodeScanner_ShouldReport/High_with_High_threshold
=== RUN   TestCodeScanner_ShouldReport/Critical_with_Critical_threshold
=== RUN   TestCodeScanner_ShouldReport/High_with_Critical_threshold
--- PASS: TestCodeScanner_ShouldReport (0.01s)
    --- PASS: TestCodeScanner_ShouldReport/Critical_with_Low_threshold (0.00s)
    --- PASS: TestCodeScanner_ShouldReport/High_with_Low_threshold (0.00s)
    --- PASS: TestCodeScanner_ShouldReport/Medium_with_Low_threshold (0.00s)
    --- PASS: TestCodeScanner_ShouldReport/Low_with_Low_threshold (0.00s)
    --- PASS: TestCodeScanner_ShouldReport/Low_with_High_threshold (0.00s)
    --- PASS: TestCodeScanner_ShouldReport/Medium_with_High_threshold (0.00s)
    --- PASS: TestCodeScanner_ShouldReport/High_with_High_threshold (0.00s)
    --- PASS: TestCodeScanner_ShouldReport/Critical_with_Critical_threshold (0.00s)
    --- PASS: TestCodeScanner_ShouldReport/High_with_Critical_threshold (0.00s)
=== RUN   TestCodeScanner_Scan_EmptyDirectory
--- PASS: TestCodeScanner_Scan_EmptyDirectory (0.00s)
=== RUN   TestCodeScanner_Scan_CleanFile
--- PASS: TestCodeScanner_Scan_CleanFile (0.00s)
=== RUN   TestCodeScanner_Scan_MaliciousPatterns
=== RUN   TestCodeScanner_Scan_MaliciousPatterns/Eval_injection
=== RUN   TestCodeScanner_Scan_MaliciousPatterns/Exec_call
=== RUN   TestCodeScanner_Scan_MaliciousPatterns/Curl_pipe_bash
=== RUN   TestCodeScanner_Scan_MaliciousPatterns/rm_-rf_root
=== RUN   TestCodeScanner_Scan_MaliciousPatterns/Fork_bomb
=== RUN   TestCodeScanner_Scan_MaliciousPatterns/Netcat_listen
=== RUN   TestCodeScanner_Scan_MaliciousPatterns/Chmod_777
=== RUN   TestCodeScanner_Scan_MaliciousPatterns/Base64_decode
--- PASS: TestCodeScanner_Scan_MaliciousPatterns (0.02s)
    --- PASS: TestCodeScanner_Scan_MaliciousPatterns/Eval_injection (0.00s)
    --- PASS: TestCodeScanner_Scan_MaliciousPatterns/Exec_call (0.00s)
    --- PASS: TestCodeScanner_Scan_MaliciousPatterns/Curl_pipe_bash (0.00s)
    --- PASS: TestCodeScanner_Scan_MaliciousPatterns/rm_-rf_root (0.00s)
    --- PASS: TestCodeScanner_Scan_MaliciousPatterns/Fork_bomb (0.00s)
    --- PASS: TestCodeScanner_Scan_MaliciousPatterns/Netcat_listen (0.00s)
    --- PASS: TestCodeScanner_Scan_MaliciousPatterns/Chmod_777 (0.00s)
    --- PASS: TestCodeScanner_Scan_MaliciousPatterns/Base64_decode (0.00s)
=== RUN   TestCodeScanner_Scan_ThresholdFiltering
--- PASS: TestCodeScanner_Scan_ThresholdFiltering (0.01s)
=== RUN   TestCodeScanner_Scan_MultipleFiles
--- PASS: TestCodeScanner_Scan_MultipleFiles (0.00s)
=== RUN   TestCodeScanner_Scan_LargeFileSkipped
--- PASS: TestCodeScanner_Scan_LargeFileSkipped (0.01s)
=== RUN   TestCodeScanner_Scan_NonExistentDirectory
--- PASS: TestCodeScanner_Scan_NonExistentDirectory (0.00s)
=== RUN   TestScanResult_Statistics
--- PASS: TestScanResult_Statistics (0.01s)
=== RUN   TestSeverityConstants
--- PASS: TestSeverityConstants (0.00s)
=== RUN   TestScanRule_Structure
--- PASS: TestScanRule_Structure (0.00s)
=== RUN   TestScanFinding_Structure
--- PASS: TestScanFinding_Structure (0.00s)
=== RUN   TestDefaultScanRules
--- PASS: TestDefaultScanRules (0.00s)
=== RUN   TestCodeScanner_Scan_MultilineFinding
--- PASS: TestCodeScanner_Scan_MultilineFinding (0.00s)
=== RUN   TestCodeScanner_Scan_DirectoryTraversal
--- PASS: TestCodeScanner_Scan_DirectoryTraversal (0.00s)
=== RUN   TestCodeScanner_Scan_CleanDetermination
=== RUN   TestCodeScanner_Scan_CleanDetermination/No_findings
=== RUN   TestCodeScanner_Scan_CleanDetermination/Low_severity_only
=== RUN   TestCodeScanner_Scan_CleanDetermination/Medium_severity_only
=== RUN   TestCodeScanner_Scan_CleanDetermination/High_severity
=== RUN   TestCodeScanner_Scan_CleanDetermination/Critical_severity
--- PASS: TestCodeScanner_Scan_CleanDetermination (0.01s)
    --- PASS: TestCodeScanner_Scan_CleanDetermination/No_findings (0.00s)
    --- PASS: TestCodeScanner_Scan_CleanDetermination/Low_severity_only (0.00s)
    --- PASS: TestCodeScanner_Scan_CleanDetermination/Medium_severity_only (0.00s)
    --- PASS: TestCodeScanner_Scan_CleanDetermination/High_severity (0.00s)
    --- PASS: TestCodeScanner_Scan_CleanDetermination/Critical_severity (0.00s)
=== RUN   TestNewGPGVerifier
--- PASS: TestNewGPGVerifier (0.00s)
=== RUN   TestGPGVerifier_Name
--- PASS: TestGPGVerifier_Name (0.00s)
=== RUN   TestNewSSHVerifier
--- PASS: TestNewSSHVerifier (0.00s)
=== RUN   TestSSHVerifier_Name
--- PASS: TestSSHVerifier_Name (0.00s)
=== RUN   TestSSHVerifier_Verify_MissingPublicKey
--- PASS: TestSSHVerifier_Verify_MissingPublicKey (0.00s)
=== RUN   TestNewSignatureManager
--- PASS: TestNewSignatureManager (0.00s)
=== RUN   TestSignatureManager_RegisterVerifier
--- PASS: TestSignatureManager_RegisterVerifier (0.00s)
=== RUN   TestSignatureManager_RegisterMultipleVerifiers
--- PASS: TestSignatureManager_RegisterMultipleVerifiers (0.00s)
=== RUN   TestSignatureManager_Verify_VerifierNotFound
--- PASS: TestSignatureManager_Verify_VerifierNotFound (0.00s)
=== RUN   TestSignatureManager_Verify_WithRegisteredVerifier
--- PASS: TestSignatureManager_Verify_WithRegisteredVerifier (0.00s)
=== RUN   TestSignatureManager_VerifyAny_NoVerifiers
--- PASS: TestSignatureManager_VerifyAny_NoVerifiers (0.00s)
=== RUN   TestSignatureManager_VerifyAny_AllFail
--- PASS: TestSignatureManager_VerifyAny_AllFail (0.00s)
=== RUN   TestSignatureManager_InitializeDefaultVerifiers
--- PASS: TestSignatureManager_InitializeDefaultVerifiers (0.00s)
=== RUN   TestGPGVerifier_Verify_NonExistentFile
--- PASS: TestGPGVerifier_Verify_NonExistentFile (0.00s)
=== RUN   TestGPGVerifier_Verify_InvalidSignature
--- PASS: TestGPGVerifier_Verify_InvalidSignature (0.00s)
=== RUN   TestSSHVerifier_Verify_InvalidSignature
--- PASS: TestSSHVerifier_Verify_InvalidSignature (0.01s)
=== RUN   TestSignatureVerifier_Interface
--- PASS: TestSignatureVerifier_Interface (0.00s)
=== RUN   TestGPGVerifier_ImportPublicKey_InvalidKey
--- PASS: TestGPGVerifier_ImportPublicKey_InvalidKey (0.00s)
=== RUN   TestSignatureManager_OverwriteVerifier
--- PASS: TestSignatureManager_OverwriteVerifier (0.00s)
=== RUN   TestSignatureManager_VerifierTypes
--- PASS: TestSignatureManager_VerifierTypes (0.00s)
=== RUN   TestGPGVerifier_VerifyWithPublicKey
--- PASS: TestGPGVerifier_VerifyWithPublicKey (0.00s)
=== RUN   TestNewTrustedSourceRegistry
--- PASS: TestNewTrustedSourceRegistry (0.00s)
=== RUN   TestTrustedSourceRegistry_AddSource
--- PASS: TestTrustedSourceRegistry_AddSource (0.00s)
=== RUN   TestTrustedSourceRegistry_AddSource_EmptyName
--- PASS: TestTrustedSourceRegistry_AddSource_EmptyName (0.00s)
=== RUN   TestTrustedSourceRegistry_AddSource_EmptyPattern
--- PASS: TestTrustedSourceRegistry_AddSource_EmptyPattern (0.00s)
=== RUN   TestTrustedSourceRegistry_RemoveSource
--- PASS: TestTrustedSourceRegistry_RemoveSource (0.00s)
=== RUN   TestTrustedSourceRegistry_RemoveNonExistent
--- PASS: TestTrustedSourceRegistry_RemoveNonExistent (0.00s)
=== RUN   TestTrustedSourceRegistry_GetSource
--- PASS: TestTrustedSourceRegistry_GetSource (0.00s)
=== RUN   TestTrustedSourceRegistry_GetNonExistent
--- PASS: TestTrustedSourceRegistry_GetNonExistent (0.00s)
=== RUN   TestTrustedSourceRegistry_ListSources
--- PASS: TestTrustedSourceRegistry_ListSources (0.00s)
=== RUN   TestTrustedSourceRegistry_IsTrusted
=== RUN   TestTrustedSourceRegistry_IsTrusted/Exact_match
=== RUN   TestTrustedSourceRegistry_IsTrusted/Wildcard_match
=== RUN   TestTrustedSourceRegistry_IsTrusted/Deep_wildcard_match
=== RUN   TestTrustedSourceRegistry_IsTrusted/No_match
=== RUN   TestTrustedSourceRegistry_IsTrusted/Prefix_not_matched
--- PASS: TestTrustedSourceRegistry_IsTrusted (0.00s)
    --- PASS: TestTrustedSourceRegistry_IsTrusted/Exact_match (0.00s)
    --- PASS: TestTrustedSourceRegistry_IsTrusted/Wildcard_match (0.00s)
    --- PASS: TestTrustedSourceRegistry_IsTrusted/Deep_wildcard_match (0.00s)
    --- PASS: TestTrustedSourceRegistry_IsTrusted/No_match (0.00s)
    --- PASS: TestTrustedSourceRegistry_IsTrusted/Prefix_not_matched (0.00s)
=== RUN   TestTrustedSourceRegistry_MatchesPattern
=== RUN   TestTrustedSourceRegistry_MatchesPattern/github.com/owner/repo_vs_github.com/owner/repo
=== RUN   TestTrustedSourceRegistry_MatchesPattern/github.com/owner/*_vs_github.com/owner/repo
=== RUN   TestTrustedSourceRegistry_MatchesPattern/github.com/owner/*_vs_github.com/owner/repo/sub
=== RUN   TestTrustedSourceRegistry_MatchesPattern/github.com/*_vs_github.com/anything
=== RUN   TestTrustedSourceRegistry_MatchesPattern/*/repo_vs_github.com/repo
=== RUN   TestTrustedSourceRegistry_MatchesPattern/*_vs_anything
=== RUN   TestTrustedSourceRegistry_MatchesPattern/github.com/owner/repo_vs_github.com/owner/other
=== RUN   TestTrustedSourceRegistry_MatchesPattern/github.com/owner/?_vs_github.com/owner/a
=== RUN   TestTrustedSourceRegistry_MatchesPattern/github.com/owner/?_vs_github.com/owner/ab
=== RUN   TestTrustedSourceRegistry_MatchesPattern/file:///*_vs_file:///path/to/file
--- PASS: TestTrustedSourceRegistry_MatchesPattern (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/github.com/owner/repo_vs_github.com/owner/repo (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/github.com/owner/*_vs_github.com/owner/repo (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/github.com/owner/*_vs_github.com/owner/repo/sub (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/github.com/*_vs_github.com/anything (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/*/repo_vs_github.com/repo (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/*_vs_anything (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/github.com/owner/repo_vs_github.com/owner/other (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/github.com/owner/?_vs_github.com/owner/a (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/github.com/owner/?_vs_github.com/owner/ab (0.00s)
    --- PASS: TestTrustedSourceRegistry_MatchesPattern/file:///*_vs_file:///path/to/file (0.00s)
=== RUN   TestTrustedSourceRegistry_ValidateURI_NotRequired
--- PASS: TestTrustedSourceRegistry_ValidateURI_NotRequired (0.00s)
=== RUN   TestTrustedSourceRegistry_ValidateURI_Required
--- PASS: TestTrustedSourceRegistry_ValidateURI_Required (0.00s)
=== RUN   TestTrustedSourceRegistry_ValidateURI_TrustedNotRequired
--- PASS: TestTrustedSourceRegistry_ValidateURI_TrustedNotRequired (0.00s)
=== RUN   TestTrustedSourceRegistry_ValidateURI_TrustedRequired
--- PASS: TestTrustedSourceRegistry_ValidateURI_TrustedRequired (0.00s)
=== RUN   TestTrustedSourceRegistry_AddDefaultSources
--- PASS: TestTrustedSourceRegistry_AddDefaultSources (0.00s)
=== RUN   TestTrustedSourceRegistry_DefaultSourcesProperties
--- PASS: TestTrustedSourceRegistry_DefaultSourcesProperties (0.00s)
=== RUN   TestTrustedSource_Structure
--- PASS: TestTrustedSource_Structure (0.00s)
=== RUN   TestNewSecurityConfig
--- PASS: TestNewSecurityConfig (0.00s)
=== RUN   TestSecurityConfig_Validate_Valid
--- PASS: TestSecurityConfig_Validate_Valid (0.00s)
=== RUN   TestSecurityConfig_Validate_Conflicting
--- PASS: TestSecurityConfig_Validate_Conflicting (0.00s)
=== RUN   TestSecurityConfig_Validate_InvalidThreshold
--- PASS: TestSecurityConfig_Validate_InvalidThreshold (0.00s)
=== RUN   TestSecurityConfig_Validate_AllThresholds
=== RUN   TestSecurityConfig_Validate_AllThresholds/low
=== RUN   TestSecurityConfig_Validate_AllThresholds/medium
=== RUN   TestSecurityConfig_Validate_AllThresholds/high
=== RUN   TestSecurityConfig_Validate_AllThresholds/critical
--- PASS: TestSecurityConfig_Validate_AllThresholds (0.00s)
    --- PASS: TestSecurityConfig_Validate_AllThresholds/low (0.00s)
    --- PASS: TestSecurityConfig_Validate_AllThresholds/medium (0.00s)
    --- PASS: TestSecurityConfig_Validate_AllThresholds/high (0.00s)
    --- PASS: TestSecurityConfig_Validate_AllThresholds/critical (0.00s)
=== RUN   TestSecurityConfig_ShouldRequireSignature_AllowUnsigned
--- PASS: TestSecurityConfig_ShouldRequireSignature_AllowUnsigned (0.00s)
=== RUN   TestSecurityConfig_ShouldRequireSignature_RequireGlobally
--- PASS: TestSecurityConfig_ShouldRequireSignature_RequireGlobally (0.00s)
=== RUN   TestSecurityConfig_ShouldRequireSignature_SourceRequired
--- PASS: TestSecurityConfig_ShouldRequireSignature_SourceRequired (0.00s)
=== RUN   TestSecurityConfig_ShouldRequireSignature_NoSource
--- PASS: TestSecurityConfig_ShouldRequireSignature_NoSource (0.00s)
=== RUN   TestSecurityConfig_CustomTrustedSources
--- PASS: TestSecurityConfig_CustomTrustedSources (0.00s)
=== RUN   TestTrustedSourceRegistry_MultipleMatches
--- PASS: TestTrustedSourceRegistry_MultipleMatches (0.00s)
=== RUN   TestTrustedSourceRegistry_OverwriteSource
--- PASS: TestTrustedSourceRegistry_OverwriteSource (0.00s)
=== RUN   TestTrustedSourceRegistry_PatternEdgeCases
=== RUN   TestTrustedSourceRegistry_PatternEdgeCases/_anything
=== RUN   TestTrustedSourceRegistry_PatternEdgeCases/github.com/owner/repo.git_github.com/owner/repo.git
=== RUN   TestTrustedSourceRegistry_PatternEdgeCases/*/*/repo_github.com/owner/repo
=== RUN   TestTrustedSourceRegistry_PatternEdgeCases/github.com/?_github.com/a
=== RUN   TestTrustedSourceRegistry_PatternEdgeCases/github.com/?_github.com/ab
--- PASS: TestTrustedSourceRegistry_PatternEdgeCases (0.00s)
    --- PASS: TestTrustedSourceRegistry_PatternEdgeCases/_anything (0.00s)
    --- PASS: TestTrustedSourceRegistry_PatternEdgeCases/github.com/owner/repo.git_github.com/owner/repo.git (0.00s)
    --- PASS: TestTrustedSourceRegistry_PatternEdgeCases/*/*/repo_github.com/owner/repo (0.00s)
    --- PASS: TestTrustedSourceRegistry_PatternEdgeCases/github.com/?_github.com/a (0.00s)
    --- PASS: TestTrustedSourceRegistry_PatternEdgeCases/github.com/?_github.com/ab (0.00s)
PASS
coverage: 90.5% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/collection/security	(cached)	coverage: 90.5% of statements
=== RUN   TestGitHubSource_Name
--- PASS: TestGitHubSource_Name (0.00s)
=== RUN   TestGitHubSource_Supports
=== RUN   TestGitHubSource_Supports/valid_github_URI
=== RUN   TestGitHubSource_Supports/valid_github_URI_with_version
=== RUN   TestGitHubSource_Supports/file_URI
=== RUN   TestGitHubSource_Supports/https_URI
=== RUN   TestGitHubSource_Supports/invalid_URI
--- PASS: TestGitHubSource_Supports (0.00s)
    --- PASS: TestGitHubSource_Supports/valid_github_URI (0.00s)
    --- PASS: TestGitHubSource_Supports/valid_github_URI_with_version (0.00s)
    --- PASS: TestGitHubSource_Supports/file_URI (0.00s)
    --- PASS: TestGitHubSource_Supports/https_URI (0.00s)
    --- PASS: TestGitHubSource_Supports/invalid_URI (0.00s)
=== RUN   TestGitHubSource_ParseURI
=== RUN   TestGitHubSource_ParseURI/valid_URI_without_version
=== RUN   TestGitHubSource_ParseURI/valid_URI_with_version
=== RUN   TestGitHubSource_ParseURI/valid_URI_with_version_range
=== RUN   TestGitHubSource_ParseURI/invalid_URI_-_wrong_scheme
=== RUN   TestGitHubSource_ParseURI/invalid_URI_-_missing_repo
=== RUN   TestGitHubSource_ParseURI/invalid_URI_-_too_many_parts
=== RUN   TestGitHubSource_ParseURI/invalid_URI_-_multiple_@_symbols
--- PASS: TestGitHubSource_ParseURI (0.00s)
    --- PASS: TestGitHubSource_ParseURI/valid_URI_without_version (0.00s)
    --- PASS: TestGitHubSource_ParseURI/valid_URI_with_version (0.00s)
    --- PASS: TestGitHubSource_ParseURI/valid_URI_with_version_range (0.00s)
    --- PASS: TestGitHubSource_ParseURI/invalid_URI_-_wrong_scheme (0.00s)
    --- PASS: TestGitHubSource_ParseURI/invalid_URI_-_missing_repo (0.00s)
    --- PASS: TestGitHubSource_ParseURI/invalid_URI_-_too_many_parts (0.00s)
    --- PASS: TestGitHubSource_ParseURI/invalid_URI_-_multiple_@_symbols (0.00s)
=== RUN   TestGitHubSource_BuildSearchQuery
=== RUN   TestGitHubSource_BuildSearchQuery/nil_filter
=== RUN   TestGitHubSource_BuildSearchQuery/empty_filter
=== RUN   TestGitHubSource_BuildSearchQuery/with_author
=== RUN   TestGitHubSource_BuildSearchQuery/with_query
=== RUN   TestGitHubSource_BuildSearchQuery/with_category
=== RUN   TestGitHubSource_BuildSearchQuery/with_tags
=== RUN   TestGitHubSource_BuildSearchQuery/with_all_filters
--- PASS: TestGitHubSource_BuildSearchQuery (0.00s)
    --- PASS: TestGitHubSource_BuildSearchQuery/nil_filter (0.00s)
    --- PASS: TestGitHubSource_BuildSearchQuery/empty_filter (0.00s)
    --- PASS: TestGitHubSource_BuildSearchQuery/with_author (0.00s)
    --- PASS: TestGitHubSource_BuildSearchQuery/with_query (0.00s)
    --- PASS: TestGitHubSource_BuildSearchQuery/with_category (0.00s)
    --- PASS: TestGitHubSource_BuildSearchQuery/with_tags (0.00s)
    --- PASS: TestGitHubSource_BuildSearchQuery/with_all_filters (0.00s)
=== RUN   TestGitHubSource_CompareVersions
=== RUN   TestGitHubSource_CompareVersions/equal_versions
=== RUN   TestGitHubSource_CompareVersions/v1_>_v2
=== RUN   TestGitHubSource_CompareVersions/v1_<_v2
--- PASS: TestGitHubSource_CompareVersions (0.00s)
    --- PASS: TestGitHubSource_CompareVersions/equal_versions (0.00s)
    --- PASS: TestGitHubSource_CompareVersions/v1_>_v2 (0.00s)
    --- PASS: TestGitHubSource_CompareVersions/v1_<_v2 (0.00s)
=== RUN   TestGitHubSource_CacheDirectory
=== RUN   TestGitHubSource_CacheDirectory/custom_cache_directory
=== RUN   TestGitHubSource_CacheDirectory/default_cache_directory
--- PASS: TestGitHubSource_CacheDirectory (0.00s)
    --- PASS: TestGitHubSource_CacheDirectory/custom_cache_directory (0.00s)
    --- PASS: TestGitHubSource_CacheDirectory/default_cache_directory (0.00s)
=== RUN   TestGitHubSource_GetClient
=== RUN   TestGitHubSource_GetClient/with_oauth_client
=== RUN   TestGitHubSource_GetClient/without_oauth_client
=== RUN   TestGitHubSource_GetClient/with_oauth_error
=== RUN   TestGitHubSource_GetClient/client_caching
--- PASS: TestGitHubSource_GetClient (0.00s)
    --- PASS: TestGitHubSource_GetClient/with_oauth_client (0.00s)
    --- PASS: TestGitHubSource_GetClient/without_oauth_client (0.00s)
    --- PASS: TestGitHubSource_GetClient/with_oauth_error (0.00s)
    --- PASS: TestGitHubSource_GetClient/client_caching (0.00s)
=== RUN   TestGitHubSource_Integration
    github_test.go:344: GITHUB_TOKEN not set, skipping integration test
--- SKIP: TestGitHubSource_Integration (0.00s)
=== RUN   TestNewLocalSource
=== RUN   TestNewLocalSource/with_custom_search_paths
=== RUN   TestNewLocalSource/with_default_search_paths
--- PASS: TestNewLocalSource (0.00s)
    --- PASS: TestNewLocalSource/with_custom_search_paths (0.00s)
    --- PASS: TestNewLocalSource/with_default_search_paths (0.00s)
=== RUN   TestLocalSource_Name
--- PASS: TestLocalSource_Name (0.00s)
=== RUN   TestLocalSource_Supports
=== RUN   TestLocalSource_Supports/file_URI
=== RUN   TestLocalSource_Supports/absolute_path_(Unix)
=== RUN   TestLocalSource_Supports/github_URI
=== RUN   TestLocalSource_Supports/https_URI
=== RUN   TestLocalSource_Supports/relative_path
--- PASS: TestLocalSource_Supports (0.00s)
    --- PASS: TestLocalSource_Supports/file_URI (0.00s)
    --- PASS: TestLocalSource_Supports/absolute_path_(Unix) (0.00s)
    --- PASS: TestLocalSource_Supports/github_URI (0.00s)
    --- PASS: TestLocalSource_Supports/https_URI (0.00s)
    --- PASS: TestLocalSource_Supports/relative_path (0.00s)
=== RUN   TestLocalSource_ParseURI
=== RUN   TestLocalSource_ParseURI/file_URI
=== RUN   TestLocalSource_ParseURI/absolute_path
=== RUN   TestLocalSource_ParseURI/relative_path
=== RUN   TestLocalSource_ParseURI/invalid_URI
--- PASS: TestLocalSource_ParseURI (0.00s)
    --- PASS: TestLocalSource_ParseURI/file_URI (0.00s)
    --- PASS: TestLocalSource_ParseURI/absolute_path (0.00s)
    --- PASS: TestLocalSource_ParseURI/relative_path (0.00s)
    --- PASS: TestLocalSource_ParseURI/invalid_URI (0.00s)
=== RUN   TestLocalSource_Browse
=== RUN   TestLocalSource_Browse/browse_all_collections
=== RUN   TestLocalSource_Browse/filter_by_category
=== RUN   TestLocalSource_Browse/filter_by_author
=== RUN   TestLocalSource_Browse/filter_by_tags
=== RUN   TestLocalSource_Browse/filter_by_query
=== RUN   TestLocalSource_Browse/with_limit
=== RUN   TestLocalSource_Browse/with_offset
--- PASS: TestLocalSource_Browse (0.01s)
    --- PASS: TestLocalSource_Browse/browse_all_collections (0.00s)
    --- PASS: TestLocalSource_Browse/filter_by_category (0.00s)
    --- PASS: TestLocalSource_Browse/filter_by_author (0.00s)
    --- PASS: TestLocalSource_Browse/filter_by_tags (0.00s)
    --- PASS: TestLocalSource_Browse/filter_by_query (0.00s)
    --- PASS: TestLocalSource_Browse/with_limit (0.00s)
    --- PASS: TestLocalSource_Browse/with_offset (0.00s)
=== RUN   TestLocalSource_Get_Directory
=== RUN   TestLocalSource_Get_Directory/get_by_file_URI
=== RUN   TestLocalSource_Get_Directory/get_by_absolute_path
=== RUN   TestLocalSource_Get_Directory/missing_collection.yaml
=== RUN   TestLocalSource_Get_Directory/invalid_manifest
--- PASS: TestLocalSource_Get_Directory (0.00s)
    --- PASS: TestLocalSource_Get_Directory/get_by_file_URI (0.00s)
    --- PASS: TestLocalSource_Get_Directory/get_by_absolute_path (0.00s)
    --- PASS: TestLocalSource_Get_Directory/missing_collection.yaml (0.00s)
    --- PASS: TestLocalSource_Get_Directory/invalid_manifest (0.00s)
=== RUN   TestLocalSource_Get_Archive
=== RUN   TestLocalSource_Get_Archive/get_from_tar.gz
=== RUN   TestLocalSource_Get_Archive/invalid_archive
--- PASS: TestLocalSource_Get_Archive (0.00s)
    --- PASS: TestLocalSource_Get_Archive/get_from_tar.gz (0.00s)
    --- PASS: TestLocalSource_Get_Archive/invalid_archive (0.00s)
=== RUN   TestExportToTarGz
--- PASS: TestExportToTarGz (0.01s)
=== RUN   TestLocalSource_MatchesFilter
=== RUN   TestLocalSource_MatchesFilter/nil_filter
=== RUN   TestLocalSource_MatchesFilter/matching_category
=== RUN   TestLocalSource_MatchesFilter/non-matching_category
=== RUN   TestLocalSource_MatchesFilter/matching_author
=== RUN   TestLocalSource_MatchesFilter/non-matching_author
=== RUN   TestLocalSource_MatchesFilter/matching_tags
=== RUN   TestLocalSource_MatchesFilter/partial_matching_tags
=== RUN   TestLocalSource_MatchesFilter/matching_query_in_name
=== RUN   TestLocalSource_MatchesFilter/matching_query_in_description
=== RUN   TestLocalSource_MatchesFilter/non-matching_query
--- PASS: TestLocalSource_MatchesFilter (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/nil_filter (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/matching_category (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/non-matching_category (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/matching_author (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/non-matching_author (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/matching_tags (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/partial_matching_tags (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/matching_query_in_name (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/matching_query_in_description (0.00s)
    --- PASS: TestLocalSource_MatchesFilter/non-matching_query (0.00s)
PASS
coverage: 54.4% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/collection/sources	(cached)	coverage: 54.4% of statements
=== RUN   TestStatusConstants
--- PASS: TestStatusConstants (0.00s)
=== RUN   TestElementTypeConstants
--- PASS: TestElementTypeConstants (0.00s)
=== RUN   TestMethodConstants
--- PASS: TestMethodConstants (0.00s)
=== RUN   TestSortOrderConstants
--- PASS: TestSortOrderConstants (0.00s)
=== RUN   TestCommonConstants
--- PASS: TestCommonConstants (0.00s)
=== RUN   TestConstantImmutability
--- PASS: TestConstantImmutability (0.00s)
PASS
coverage: [no statements]
ok  	github.com/fsvxavier/nexs-mcp/internal/common	(cached)	coverage: [no statements]
=== RUN   TestLoadConfig
=== RUN   TestLoadConfig/default_configuration
=== RUN   TestLoadConfig/environment_variables_override_defaults
--- PASS: TestLoadConfig (0.00s)
    --- PASS: TestLoadConfig/default_configuration (0.00s)
    --- PASS: TestLoadConfig/environment_variables_override_defaults (0.00s)
=== RUN   TestGetEnvOrDefault
=== RUN   TestGetEnvOrDefault/environment_variable_exists
=== RUN   TestGetEnvOrDefault/environment_variable_does_not_exist
--- PASS: TestGetEnvOrDefault (0.00s)
    --- PASS: TestGetEnvOrDefault/environment_variable_exists (0.00s)
    --- PASS: TestGetEnvOrDefault/environment_variable_does_not_exist (0.00s)
=== RUN   TestConfig_Struct
--- PASS: TestConfig_Struct (0.00s)
PASS
coverage: 80.0% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/config	(cached)	coverage: 80.0% of statements
=== RUN   TestPrivacyLevel_Validation
=== RUN   TestPrivacyLevel_Validation/Public_is_valid
=== RUN   TestPrivacyLevel_Validation/Private_is_valid
=== RUN   TestPrivacyLevel_Validation/Shared_is_valid
=== RUN   TestPrivacyLevel_Validation/Empty_string_is_invalid
=== RUN   TestPrivacyLevel_Validation/Invalid_level
=== RUN   TestPrivacyLevel_Validation/Mixed_case_is_invalid
--- PASS: TestPrivacyLevel_Validation (0.00s)
    --- PASS: TestPrivacyLevel_Validation/Public_is_valid (0.00s)
    --- PASS: TestPrivacyLevel_Validation/Private_is_valid (0.00s)
    --- PASS: TestPrivacyLevel_Validation/Shared_is_valid (0.00s)
    --- PASS: TestPrivacyLevel_Validation/Empty_string_is_invalid (0.00s)
    --- PASS: TestPrivacyLevel_Validation/Invalid_level (0.00s)
    --- PASS: TestPrivacyLevel_Validation/Mixed_case_is_invalid (0.00s)
=== RUN   TestPrivacyLevel_String
=== RUN   TestPrivacyLevel_String/Public
=== RUN   TestPrivacyLevel_String/Private
=== RUN   TestPrivacyLevel_String/Shared
--- PASS: TestPrivacyLevel_String (0.00s)
    --- PASS: TestPrivacyLevel_String/Public (0.00s)
    --- PASS: TestPrivacyLevel_String/Private (0.00s)
    --- PASS: TestPrivacyLevel_String/Shared (0.00s)
=== RUN   TestUserContext_Creation
--- PASS: TestUserContext_Creation (0.00s)
=== RUN   TestUserContext_IsAnonymous
=== RUN   TestUserContext_IsAnonymous/User_alice_is_not_anonymous
=== RUN   TestUserContext_IsAnonymous/User_bob_is_not_anonymous
=== RUN   TestUserContext_IsAnonymous/Empty_username_is_anonymous
=== RUN   TestUserContext_IsAnonymous/Anonymous_user
--- PASS: TestUserContext_IsAnonymous (0.00s)
    --- PASS: TestUserContext_IsAnonymous/User_alice_is_not_anonymous (0.00s)
    --- PASS: TestUserContext_IsAnonymous/User_bob_is_not_anonymous (0.00s)
    --- PASS: TestUserContext_IsAnonymous/Empty_username_is_anonymous (0.00s)
    --- PASS: TestUserContext_IsAnonymous/Anonymous_user (0.00s)
=== RUN   TestAccessControl_CheckReadPermission
=== RUN   TestAccessControl_CheckReadPermission/Public_element_-_anyone_can_read
=== RUN   TestAccessControl_CheckReadPermission/Private_element_-_owner_can_read
=== RUN   TestAccessControl_CheckReadPermission/Private_element_-_others_cannot_read
=== RUN   TestAccessControl_CheckReadPermission/Shared_element_-_owner_can_read
=== RUN   TestAccessControl_CheckReadPermission/Shared_element_-_shared_user_can_read
=== RUN   TestAccessControl_CheckReadPermission/Shared_element_-_non-shared_user_cannot_read
=== RUN   TestAccessControl_CheckReadPermission/Anonymous_user_cannot_read_private
=== RUN   TestAccessControl_CheckReadPermission/Anonymous_user_can_read_public
--- PASS: TestAccessControl_CheckReadPermission (0.00s)
    --- PASS: TestAccessControl_CheckReadPermission/Public_element_-_anyone_can_read (0.00s)
    --- PASS: TestAccessControl_CheckReadPermission/Private_element_-_owner_can_read (0.00s)
    --- PASS: TestAccessControl_CheckReadPermission/Private_element_-_others_cannot_read (0.00s)
    --- PASS: TestAccessControl_CheckReadPermission/Shared_element_-_owner_can_read (0.00s)
    --- PASS: TestAccessControl_CheckReadPermission/Shared_element_-_shared_user_can_read (0.00s)
    --- PASS: TestAccessControl_CheckReadPermission/Shared_element_-_non-shared_user_cannot_read (0.00s)
    --- PASS: TestAccessControl_CheckReadPermission/Anonymous_user_cannot_read_private (0.00s)
    --- PASS: TestAccessControl_CheckReadPermission/Anonymous_user_can_read_public (0.00s)
=== RUN   TestAccessControl_CheckWritePermission
=== RUN   TestAccessControl_CheckWritePermission/Owner_can_write
=== RUN   TestAccessControl_CheckWritePermission/Non-owner_cannot_write
=== RUN   TestAccessControl_CheckWritePermission/Anonymous_cannot_write
--- PASS: TestAccessControl_CheckWritePermission (0.00s)
    --- PASS: TestAccessControl_CheckWritePermission/Owner_can_write (0.00s)
    --- PASS: TestAccessControl_CheckWritePermission/Non-owner_cannot_write (0.00s)
    --- PASS: TestAccessControl_CheckWritePermission/Anonymous_cannot_write (0.00s)
=== RUN   TestAccessControl_CheckDeletePermission
=== RUN   TestAccessControl_CheckDeletePermission/Owner_can_delete
=== RUN   TestAccessControl_CheckDeletePermission/Non-owner_cannot_delete
=== RUN   TestAccessControl_CheckDeletePermission/Anonymous_cannot_delete
--- PASS: TestAccessControl_CheckDeletePermission (0.00s)
    --- PASS: TestAccessControl_CheckDeletePermission/Owner_can_delete (0.00s)
    --- PASS: TestAccessControl_CheckDeletePermission/Non-owner_cannot_delete (0.00s)
    --- PASS: TestAccessControl_CheckDeletePermission/Anonymous_cannot_delete (0.00s)
=== RUN   TestAccessControl_CanShare
=== RUN   TestAccessControl_CanShare/Owner_can_share_shared_element
=== RUN   TestAccessControl_CanShare/Non-owner_cannot_share
=== RUN   TestAccessControl_CanShare/Cannot_share_public_element
=== RUN   TestAccessControl_CanShare/Cannot_share_private_element
--- PASS: TestAccessControl_CanShare (0.00s)
    --- PASS: TestAccessControl_CanShare/Owner_can_share_shared_element (0.00s)
    --- PASS: TestAccessControl_CanShare/Non-owner_cannot_share (0.00s)
    --- PASS: TestAccessControl_CanShare/Cannot_share_public_element (0.00s)
    --- PASS: TestAccessControl_CanShare/Cannot_share_private_element (0.00s)
=== RUN   TestAccessControl_FilterByPermissions
=== RUN   TestAccessControl_FilterByPermissions/Alice_sees_all_her_elements_+_public
=== RUN   TestAccessControl_FilterByPermissions/Bob_sees_public_+_his_private_+_shared_with_him
=== RUN   TestAccessControl_FilterByPermissions/Charlie_sees_only_public
=== RUN   TestAccessControl_FilterByPermissions/Anonymous_sees_only_public
--- PASS: TestAccessControl_FilterByPermissions (0.00s)
    --- PASS: TestAccessControl_FilterByPermissions/Alice_sees_all_her_elements_+_public (0.00s)
    --- PASS: TestAccessControl_FilterByPermissions/Bob_sees_public_+_his_private_+_shared_with_him (0.00s)
    --- PASS: TestAccessControl_FilterByPermissions/Charlie_sees_only_public (0.00s)
    --- PASS: TestAccessControl_FilterByPermissions/Anonymous_sees_only_public (0.00s)
=== RUN   TestAccessControl_ValidateOwnership
=== RUN   TestAccessControl_ValidateOwnership/Owner_matches_current_user
=== RUN   TestAccessControl_ValidateOwnership/Owner_does_not_match_current_user
=== RUN   TestAccessControl_ValidateOwnership/Anonymous_user_cannot_own
=== RUN   TestAccessControl_ValidateOwnership/Empty_owner_is_invalid
--- PASS: TestAccessControl_ValidateOwnership (0.00s)
    --- PASS: TestAccessControl_ValidateOwnership/Owner_matches_current_user (0.00s)
    --- PASS: TestAccessControl_ValidateOwnership/Owner_does_not_match_current_user (0.00s)
    --- PASS: TestAccessControl_ValidateOwnership/Anonymous_user_cannot_own (0.00s)
    --- PASS: TestAccessControl_ValidateOwnership/Empty_owner_is_invalid (0.00s)
=== RUN   TestNewAgent
--- PASS: TestNewAgent (0.00s)
=== RUN   TestAgent_Validate
=== RUN   TestAgent_Validate/valid_agent
=== RUN   TestAgent_Validate/no_goals
=== RUN   TestAgent_Validate/no_actions
=== RUN   TestAgent_Validate/invalid_max_iterations
--- PASS: TestAgent_Validate (0.00s)
    --- PASS: TestAgent_Validate/valid_agent (0.00s)
    --- PASS: TestAgent_Validate/no_goals (0.00s)
    --- PASS: TestAgent_Validate/no_actions (0.00s)
    --- PASS: TestAgent_Validate/invalid_max_iterations (0.00s)
=== RUN   TestAgent_ActivateDeactivate
--- PASS: TestAgent_ActivateDeactivate (0.00s)
=== RUN   TestValidateElementType
=== RUN   TestValidateElementType/valid_persona_type
=== RUN   TestValidateElementType/valid_skill_type
=== RUN   TestValidateElementType/valid_template_type
=== RUN   TestValidateElementType/valid_agent_type
=== RUN   TestValidateElementType/valid_memory_type
=== RUN   TestValidateElementType/valid_ensemble_type
=== RUN   TestValidateElementType/invalid_type_-_empty
=== RUN   TestValidateElementType/invalid_type_-_unknown
=== RUN   TestValidateElementType/invalid_type_-_wrong_case
--- PASS: TestValidateElementType (0.00s)
    --- PASS: TestValidateElementType/valid_persona_type (0.00s)
    --- PASS: TestValidateElementType/valid_skill_type (0.00s)
    --- PASS: TestValidateElementType/valid_template_type (0.00s)
    --- PASS: TestValidateElementType/valid_agent_type (0.00s)
    --- PASS: TestValidateElementType/valid_memory_type (0.00s)
    --- PASS: TestValidateElementType/valid_ensemble_type (0.00s)
    --- PASS: TestValidateElementType/invalid_type_-_empty (0.00s)
    --- PASS: TestValidateElementType/invalid_type_-_unknown (0.00s)
    --- PASS: TestValidateElementType/invalid_type_-_wrong_case (0.00s)
=== RUN   TestGenerateElementID
=== RUN   TestGenerateElementID/persona_element
=== RUN   TestGenerateElementID/skill_element
=== RUN   TestGenerateElementID/template_element
--- PASS: TestGenerateElementID (3.00s)
    --- PASS: TestGenerateElementID/persona_element (1.00s)
    --- PASS: TestGenerateElementID/skill_element (1.00s)
    --- PASS: TestGenerateElementID/template_element (1.00s)
=== RUN   TestElementMetadata
=== RUN   TestElementMetadata/valid_metadata_creation
--- PASS: TestElementMetadata (0.00s)
    --- PASS: TestElementMetadata/valid_metadata_creation (0.00s)
=== RUN   TestElementType_String
=== RUN   TestElementType_String/persona_type
=== RUN   TestElementType_String/skill_type
=== RUN   TestElementType_String/template_type
=== RUN   TestElementType_String/agent_type
=== RUN   TestElementType_String/memory_type
=== RUN   TestElementType_String/ensemble_type
--- PASS: TestElementType_String (0.00s)
    --- PASS: TestElementType_String/persona_type (0.00s)
    --- PASS: TestElementType_String/skill_type (0.00s)
    --- PASS: TestElementType_String/template_type (0.00s)
    --- PASS: TestElementType_String/agent_type (0.00s)
    --- PASS: TestElementType_String/memory_type (0.00s)
    --- PASS: TestElementType_String/ensemble_type (0.00s)
=== RUN   TestElementFilter
=== RUN   TestElementFilter/filter_with_type
=== RUN   TestElementFilter/filter_with_active_status
=== RUN   TestElementFilter/filter_with_tags
=== RUN   TestElementFilter/filter_with_pagination
--- PASS: TestElementFilter (0.00s)
    --- PASS: TestElementFilter/filter_with_type (0.00s)
    --- PASS: TestElementFilter/filter_with_active_status (0.00s)
    --- PASS: TestElementFilter/filter_with_tags (0.00s)
    --- PASS: TestElementFilter/filter_with_pagination (0.00s)
=== RUN   TestNewEnsemble
--- PASS: TestNewEnsemble (0.00s)
=== RUN   TestEnsemble_Validate
=== RUN   TestEnsemble_Validate/valid_ensemble
=== RUN   TestEnsemble_Validate/no_members
=== RUN   TestEnsemble_Validate/invalid_execution_mode
=== RUN   TestEnsemble_Validate/missing_aggregation_strategy
--- PASS: TestEnsemble_Validate (0.00s)
    --- PASS: TestEnsemble_Validate/valid_ensemble (0.00s)
    --- PASS: TestEnsemble_Validate/no_members (0.00s)
    --- PASS: TestEnsemble_Validate/invalid_execution_mode (0.00s)
    --- PASS: TestEnsemble_Validate/missing_aggregation_strategy (0.00s)
=== RUN   TestEnsemble_ActivateDeactivate
--- PASS: TestEnsemble_ActivateDeactivate (0.00s)
=== RUN   TestNewMemory
--- PASS: TestNewMemory (0.00s)
=== RUN   TestMemory_Validate
=== RUN   TestMemory_Validate/valid_memory
=== RUN   TestMemory_Validate/empty_content
--- PASS: TestMemory_Validate (0.00s)
    --- PASS: TestMemory_Validate/valid_memory (0.00s)
    --- PASS: TestMemory_Validate/empty_content (0.00s)
=== RUN   TestMemory_ComputeHash
--- PASS: TestMemory_ComputeHash (0.00s)
=== RUN   TestMemory_ActivateDeactivate
--- PASS: TestMemory_ActivateDeactivate (0.00s)
=== RUN   TestNewPersona
--- PASS: TestNewPersona (0.00s)
=== RUN   TestPersona_AddBehavioralTrait
=== RUN   TestPersona_AddBehavioralTrait/valid_trait
=== RUN   TestPersona_AddBehavioralTrait/empty_name
=== RUN   TestPersona_AddBehavioralTrait/intensity_too_low
=== RUN   TestPersona_AddBehavioralTrait/intensity_too_high
--- PASS: TestPersona_AddBehavioralTrait (0.00s)
    --- PASS: TestPersona_AddBehavioralTrait/valid_trait (0.00s)
    --- PASS: TestPersona_AddBehavioralTrait/empty_name (0.00s)
    --- PASS: TestPersona_AddBehavioralTrait/intensity_too_low (0.00s)
    --- PASS: TestPersona_AddBehavioralTrait/intensity_too_high (0.00s)
=== RUN   TestPersona_AddExpertiseArea
=== RUN   TestPersona_AddExpertiseArea/valid_area
=== RUN   TestPersona_AddExpertiseArea/empty_domain
=== RUN   TestPersona_AddExpertiseArea/invalid_level
=== RUN   TestPersona_AddExpertiseArea/beginner_level
=== RUN   TestPersona_AddExpertiseArea/intermediate_level
=== RUN   TestPersona_AddExpertiseArea/advanced_level
--- PASS: TestPersona_AddExpertiseArea (0.00s)
    --- PASS: TestPersona_AddExpertiseArea/valid_area (0.00s)
    --- PASS: TestPersona_AddExpertiseArea/empty_domain (0.00s)
    --- PASS: TestPersona_AddExpertiseArea/invalid_level (0.00s)
    --- PASS: TestPersona_AddExpertiseArea/beginner_level (0.00s)
    --- PASS: TestPersona_AddExpertiseArea/intermediate_level (0.00s)
    --- PASS: TestPersona_AddExpertiseArea/advanced_level (0.00s)
=== RUN   TestPersona_SetResponseStyle
=== RUN   TestPersona_SetResponseStyle/valid_style
=== RUN   TestPersona_SetResponseStyle/empty_tone
=== RUN   TestPersona_SetResponseStyle/invalid_formality
=== RUN   TestPersona_SetResponseStyle/invalid_verbosity
=== RUN   TestPersona_SetResponseStyle/casual_formality
=== RUN   TestPersona_SetResponseStyle/neutral_formality_verbose
--- PASS: TestPersona_SetResponseStyle (0.00s)
    --- PASS: TestPersona_SetResponseStyle/valid_style (0.00s)
    --- PASS: TestPersona_SetResponseStyle/empty_tone (0.00s)
    --- PASS: TestPersona_SetResponseStyle/invalid_formality (0.00s)
    --- PASS: TestPersona_SetResponseStyle/invalid_verbosity (0.00s)
    --- PASS: TestPersona_SetResponseStyle/casual_formality (0.00s)
    --- PASS: TestPersona_SetResponseStyle/neutral_formality_verbose (0.00s)
=== RUN   TestPersona_SetSystemPrompt
=== RUN   TestPersona_SetSystemPrompt/valid_prompt
=== RUN   TestPersona_SetSystemPrompt/too_short
=== RUN   TestPersona_SetSystemPrompt/too_long
--- PASS: TestPersona_SetSystemPrompt (0.00s)
    --- PASS: TestPersona_SetSystemPrompt/valid_prompt (0.00s)
    --- PASS: TestPersona_SetSystemPrompt/too_short (0.00s)
    --- PASS: TestPersona_SetSystemPrompt/too_long (0.00s)
=== RUN   TestPersona_SetPrivacyLevel
=== RUN   TestPersona_SetPrivacyLevel/public
=== RUN   TestPersona_SetPrivacyLevel/private
=== RUN   TestPersona_SetPrivacyLevel/shared
=== RUN   TestPersona_SetPrivacyLevel/invalid
--- PASS: TestPersona_SetPrivacyLevel (0.00s)
    --- PASS: TestPersona_SetPrivacyLevel/public (0.00s)
    --- PASS: TestPersona_SetPrivacyLevel/private (0.00s)
    --- PASS: TestPersona_SetPrivacyLevel/shared (0.00s)
    --- PASS: TestPersona_SetPrivacyLevel/invalid (0.00s)
=== RUN   TestPersona_ShareWith
=== RUN   TestPersona_ShareWith/share_without_setting_privacy_level
=== RUN   TestPersona_ShareWith/share_with_valid_user
=== RUN   TestPersona_ShareWith/share_with_duplicate_user
=== RUN   TestPersona_ShareWith/share_with_empty_user
--- PASS: TestPersona_ShareWith (0.00s)
    --- PASS: TestPersona_ShareWith/share_without_setting_privacy_level (0.00s)
    --- PASS: TestPersona_ShareWith/share_with_valid_user (0.00s)
    --- PASS: TestPersona_ShareWith/share_with_duplicate_user (0.00s)
    --- PASS: TestPersona_ShareWith/share_with_empty_user (0.00s)
=== RUN   TestPersona_UnshareWith
=== RUN   TestPersona_UnshareWith/unshare_existing_user
=== RUN   TestPersona_UnshareWith/unshare_non-existing_user
--- PASS: TestPersona_UnshareWith (0.00s)
    --- PASS: TestPersona_UnshareWith/unshare_existing_user (0.00s)
    --- PASS: TestPersona_UnshareWith/unshare_non-existing_user (0.00s)
=== RUN   TestPersona_Validate
=== RUN   TestPersona_Validate/valid_complete_persona
=== RUN   TestPersona_Validate/missing_behavioral_traits
=== RUN   TestPersona_Validate/missing_expertise_areas
=== RUN   TestPersona_Validate/missing_system_prompt
=== RUN   TestPersona_Validate/shared_persona_without_shared_with_list
--- PASS: TestPersona_Validate (0.00s)
    --- PASS: TestPersona_Validate/valid_complete_persona (0.00s)
    --- PASS: TestPersona_Validate/missing_behavioral_traits (0.00s)
    --- PASS: TestPersona_Validate/missing_expertise_areas (0.00s)
    --- PASS: TestPersona_Validate/missing_system_prompt (0.00s)
    --- PASS: TestPersona_Validate/shared_persona_without_shared_with_list (0.00s)
=== RUN   TestPersona_ActivateDeactivate
--- PASS: TestPersona_ActivateDeactivate (0.00s)
=== RUN   TestPersona_SetMetadata
--- PASS: TestPersona_SetMetadata (0.00s)
=== RUN   TestRelationshipMap_Add
=== RUN   TestRelationshipMap_Add/add_first_relationship
=== RUN   TestRelationshipMap_Add/add_second_relationship
=== RUN   TestRelationshipMap_Add/add_duplicate_relationship
--- PASS: TestRelationshipMap_Add (0.00s)
    --- PASS: TestRelationshipMap_Add/add_first_relationship (0.00s)
    --- PASS: TestRelationshipMap_Add/add_second_relationship (0.00s)
    --- PASS: TestRelationshipMap_Add/add_duplicate_relationship (0.00s)
=== RUN   TestRelationshipMap_Get
=== RUN   TestRelationshipMap_Get/get_existing_relationships
=== RUN   TestRelationshipMap_Get/get_single_relationship
=== RUN   TestRelationshipMap_Get/get_non-existing
--- PASS: TestRelationshipMap_Get (0.00s)
    --- PASS: TestRelationshipMap_Get/get_existing_relationships (0.00s)
    --- PASS: TestRelationshipMap_Get/get_single_relationship (0.00s)
    --- PASS: TestRelationshipMap_Get/get_non-existing (0.00s)
=== RUN   TestRelationshipMap_Has
=== RUN   TestRelationshipMap_Has/has_relationships
=== RUN   TestRelationshipMap_Has/empty_relationships
=== RUN   TestRelationshipMap_Has/non-existing_element
--- PASS: TestRelationshipMap_Has (0.00s)
    --- PASS: TestRelationshipMap_Has/has_relationships (0.00s)
    --- PASS: TestRelationshipMap_Has/empty_relationships (0.00s)
    --- PASS: TestRelationshipMap_Has/non-existing_element (0.00s)
=== RUN   TestRelationshipError
--- PASS: TestRelationshipError (0.00s)
=== RUN   TestRelationshipTypes
--- PASS: TestRelationshipTypes (0.00s)
=== RUN   TestNewSkill
--- PASS: TestNewSkill (0.00s)
=== RUN   TestSkill_AddTrigger
=== RUN   TestSkill_AddTrigger/keyword_trigger
=== RUN   TestSkill_AddTrigger/pattern_trigger
=== RUN   TestSkill_AddTrigger/invalid_type
--- PASS: TestSkill_AddTrigger (0.00s)
    --- PASS: TestSkill_AddTrigger/keyword_trigger (0.00s)
    --- PASS: TestSkill_AddTrigger/pattern_trigger (0.00s)
    --- PASS: TestSkill_AddTrigger/invalid_type (0.00s)
=== RUN   TestSkill_Validate
=== RUN   TestSkill_Validate/valid_skill
=== RUN   TestSkill_Validate/missing_triggers
=== RUN   TestSkill_Validate/missing_procedures
--- PASS: TestSkill_Validate (0.00s)
    --- PASS: TestSkill_Validate/valid_skill (0.00s)
    --- PASS: TestSkill_Validate/missing_triggers (0.00s)
    --- PASS: TestSkill_Validate/missing_procedures (0.00s)
=== RUN   TestNewTemplate
--- PASS: TestNewTemplate (0.00s)
=== RUN   TestTemplate_Validate
=== RUN   TestTemplate_Validate/valid_template
=== RUN   TestTemplate_Validate/empty_content
=== RUN   TestTemplate_Validate/invalid_format
--- PASS: TestTemplate_Validate (0.00s)
    --- PASS: TestTemplate_Validate/valid_template (0.00s)
    --- PASS: TestTemplate_Validate/empty_content (0.00s)
    --- PASS: TestTemplate_Validate/invalid_format (0.00s)
=== RUN   TestTemplate_Render
=== RUN   TestTemplate_Render/all_values_provided
=== RUN   TestTemplate_Render/missing_required_variable
=== RUN   TestTemplate_Render/using_default_value
--- PASS: TestTemplate_Render (0.00s)
    --- PASS: TestTemplate_Render/all_values_provided (0.00s)
    --- PASS: TestTemplate_Render/missing_required_variable (0.00s)
    --- PASS: TestTemplate_Render/using_default_value (0.00s)
=== RUN   TestTemplate_ActivateDeactivate
--- PASS: TestTemplate_ActivateDeactivate (0.00s)
=== RUN   TestNewWorkingMemory
--- PASS: TestNewWorkingMemory (0.00s)
=== RUN   TestMemoryPriority_TTL
=== RUN   TestMemoryPriority_TTL/low_priority
=== RUN   TestMemoryPriority_TTL/medium_priority
=== RUN   TestMemoryPriority_TTL/high_priority
=== RUN   TestMemoryPriority_TTL/critical_priority
--- PASS: TestMemoryPriority_TTL (0.00s)
    --- PASS: TestMemoryPriority_TTL/low_priority (0.00s)
    --- PASS: TestMemoryPriority_TTL/medium_priority (0.00s)
    --- PASS: TestMemoryPriority_TTL/high_priority (0.00s)
    --- PASS: TestMemoryPriority_TTL/critical_priority (0.00s)
=== RUN   TestMemoryPriority_PromotionThreshold
=== RUN   TestMemoryPriority_PromotionThreshold/low_priority
=== RUN   TestMemoryPriority_PromotionThreshold/medium_priority
=== RUN   TestMemoryPriority_PromotionThreshold/high_priority
=== RUN   TestMemoryPriority_PromotionThreshold/critical_priority
--- PASS: TestMemoryPriority_PromotionThreshold (0.00s)
    --- PASS: TestMemoryPriority_PromotionThreshold/low_priority (0.00s)
    --- PASS: TestMemoryPriority_PromotionThreshold/medium_priority (0.00s)
    --- PASS: TestMemoryPriority_PromotionThreshold/high_priority (0.00s)
    --- PASS: TestMemoryPriority_PromotionThreshold/critical_priority (0.00s)
=== RUN   TestWorkingMemory_IsExpired
=== RUN   TestWorkingMemory_IsExpired/not_expired
=== RUN   TestWorkingMemory_IsExpired/expired
--- PASS: TestWorkingMemory_IsExpired (0.00s)
    --- PASS: TestWorkingMemory_IsExpired/not_expired (0.00s)
    --- PASS: TestWorkingMemory_IsExpired/expired (0.00s)
=== RUN   TestWorkingMemory_IsPromoted
--- PASS: TestWorkingMemory_IsPromoted (0.00s)
=== RUN   TestWorkingMemory_MarkPromoted
--- PASS: TestWorkingMemory_MarkPromoted (0.00s)
=== RUN   TestWorkingMemory_RecordAccess
--- PASS: TestWorkingMemory_RecordAccess (0.01s)
=== RUN   TestWorkingMemory_ShouldPromote
=== RUN   TestWorkingMemory_ShouldPromote/should_promote_-_high_access_count
=== RUN   TestWorkingMemory_ShouldPromote/should_promote_-_high_importance
=== RUN   TestWorkingMemory_ShouldPromote/should_promote_-_critical_priority_and_accessed
=== RUN   TestWorkingMemory_ShouldPromote/should_not_promote_-_low_access
=== RUN   TestWorkingMemory_ShouldPromote/should_not_promote_-_already_promoted
--- PASS: TestWorkingMemory_ShouldPromote (0.00s)
    --- PASS: TestWorkingMemory_ShouldPromote/should_promote_-_high_access_count (0.00s)
    --- PASS: TestWorkingMemory_ShouldPromote/should_promote_-_high_importance (0.00s)
    --- PASS: TestWorkingMemory_ShouldPromote/should_promote_-_critical_priority_and_accessed (0.00s)
    --- PASS: TestWorkingMemory_ShouldPromote/should_not_promote_-_low_access (0.00s)
    --- PASS: TestWorkingMemory_ShouldPromote/should_not_promote_-_already_promoted (0.00s)
=== RUN   TestWorkingMemory_calculateImportance
=== RUN   TestWorkingMemory_calculateImportance/new_memory_-_low_importance
=== RUN   TestWorkingMemory_calculateImportance/frequently_accessed_-_high_importance
=== RUN   TestWorkingMemory_calculateImportance/critical_priority_-_higher_importance
--- PASS: TestWorkingMemory_calculateImportance (0.01s)
    --- PASS: TestWorkingMemory_calculateImportance/new_memory_-_low_importance (0.00s)
    --- PASS: TestWorkingMemory_calculateImportance/frequently_accessed_-_high_importance (0.01s)
    --- PASS: TestWorkingMemory_calculateImportance/critical_priority_-_higher_importance (0.00s)
=== RUN   TestWorkingMemory_Validate
=== RUN   TestWorkingMemory_Validate/valid_memory
=== RUN   TestWorkingMemory_Validate/empty_session_ID
=== RUN   TestWorkingMemory_Validate/empty_content
=== RUN   TestWorkingMemory_Validate/invalid_priority
--- PASS: TestWorkingMemory_Validate (0.00s)
    --- PASS: TestWorkingMemory_Validate/valid_memory (0.00s)
    --- PASS: TestWorkingMemory_Validate/empty_session_ID (0.00s)
    --- PASS: TestWorkingMemory_Validate/empty_content (0.00s)
    --- PASS: TestWorkingMemory_Validate/invalid_priority (0.00s)
=== RUN   TestWorkingMemoryStats
--- PASS: TestWorkingMemoryStats (0.00s)
=== RUN   TestWorkingMemory_ExtendTTL
--- PASS: TestWorkingMemory_ExtendTTL (0.01s)
=== RUN   TestWorkingMemory_Concurrency
==================
WARNING: DATA RACE
Read at 0x00c0000f2bb0 by goroutine 225:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:99 +0x8d
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Previous write at 0x00c0000f2bb0 by goroutine 222:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:99 +0xa5
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Goroutine 225 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 222 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0000f2bb0 by goroutine 225:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:99 +0xa5
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Previous write at 0x00c0000f2bb0 by goroutine 227:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:99 +0xa5
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Goroutine 225 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 227 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0000f2bb0 by goroutine 229:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:99 +0xa5
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Previous read at 0x00c0000f2bb0 by goroutine 225:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:153 +0x88
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0x135
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Goroutine 229 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 225 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0000f2bb8 by goroutine 225:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:184 +0x344
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0x135
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Previous write at 0x00c0000f2bb8 by goroutine 222:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:184 +0x344
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0x135
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Goroutine 225 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 222 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0000f2bd8 by goroutine 227:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:100 +0xe4
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Previous write at 0x00c0000f2bd8 by goroutine 222:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:100 +0xe4
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Goroutine 227 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 222 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c0000f2bb8 by goroutine 227:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:184 +0x344
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0x135
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Previous read at 0x00c0000f2bb8 by goroutine 225:
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).calculateImportance()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:190 +0x3ac
  github.com/fsvxavier/nexs-mcp/internal/domain.(*WorkingMemory).RecordAccess()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory.go:101 +0x135
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency.func1()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:356 +0x33

Goroutine 227 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44

Goroutine 225 (running) created at:
  github.com/fsvxavier/nexs-mcp/internal/domain.TestWorkingMemory_Concurrency()
      /home/fsvxavier/go/src/github.com/fsvxavier/nexs-mcp/internal/domain/working_memory_test.go:355 +0x76
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1934 +0x21c
  testing.(*T).Run.gowrap1()
      /usr/local/go/src/testing/testing.go:1997 +0x44
==================
    testing.go:1617: race detected during execution of test
--- FAIL: TestWorkingMemory_Concurrency (0.00s)
=== RUN   TestMin
=== RUN   TestMin/a_smaller
=== RUN   TestMin/b_smaller
=== RUN   TestMin/equal
=== RUN   TestMin/negative
=== RUN   TestMin/both_negative
--- PASS: TestMin (0.00s)
    --- PASS: TestMin/a_smaller (0.00s)
    --- PASS: TestMin/b_smaller (0.00s)
    --- PASS: TestMin/equal (0.00s)
    --- PASS: TestMin/negative (0.00s)
    --- PASS: TestMin/both_negative (0.00s)
=== RUN   TestWorkingMemory_IDGeneration
--- PASS: TestWorkingMemory_IDGeneration (0.00s)
=== RUN   TestWorkingMemory_TagsAndMetadata
--- PASS: TestWorkingMemory_TagsAndMetadata (0.00s)
=== RUN   TestWorkingMemory_FullLifecycle
--- PASS: TestWorkingMemory_FullLifecycle (0.01s)
FAIL
coverage: 67.3% of statements
FAIL	github.com/fsvxavier/nexs-mcp/internal/domain	3.091s
=== RUN   TestDefaultConfig
--- PASS: TestDefaultConfig (0.00s)
=== RUN   TestLRUCache
=== RUN   TestLRUCache/basic_operations
=== RUN   TestLRUCache/LRU_eviction
=== RUN   TestLRUCache/TTL_expiration
=== RUN   TestLRUCache/clear_cache
=== RUN   TestLRUCache/remove_expired
--- PASS: TestLRUCache (0.03s)
    --- PASS: TestLRUCache/basic_operations (0.00s)
    --- PASS: TestLRUCache/LRU_eviction (0.00s)
    --- PASS: TestLRUCache/TTL_expiration (0.02s)
    --- PASS: TestLRUCache/clear_cache (0.00s)
    --- PASS: TestLRUCache/remove_expired (0.02s)
=== RUN   TestCachedProvider
=== RUN   TestCachedProvider/cache_hit
=== RUN   TestCachedProvider/batch_with_partial_cache
=== RUN   TestCachedProvider/hit_rate_calculation
=== RUN   TestCachedProvider/clear_cache
--- PASS: TestCachedProvider (0.00s)
    --- PASS: TestCachedProvider/cache_hit (0.00s)
    --- PASS: TestCachedProvider/batch_with_partial_cache (0.00s)
    --- PASS: TestCachedProvider/hit_rate_calculation (0.00s)
    --- PASS: TestCachedProvider/clear_cache (0.00s)
=== RUN   TestSimilarityMetrics
=== RUN   TestSimilarityMetrics/similarity_metric_constants
--- PASS: TestSimilarityMetrics (0.00s)
    --- PASS: TestSimilarityMetrics/similarity_metric_constants (0.00s)
=== RUN   TestResult
=== RUN   TestResult/result_structure
--- PASS: TestResult (0.00s)
    --- PASS: TestResult/result_structure (0.00s)
=== RUN   TestNewFactory
--- PASS: TestNewFactory (0.00s)
=== RUN   TestNewFactoryFromEnv
=== RUN   TestNewFactoryFromEnv/with_env_vars
=== RUN   TestNewFactoryFromEnv/without_env_vars
--- PASS: TestNewFactoryFromEnv (0.00s)
    --- PASS: TestNewFactoryFromEnv/with_env_vars (0.00s)
    --- PASS: TestNewFactoryFromEnv/without_env_vars (0.00s)
=== RUN   TestFactory_CreateProvider
=== RUN   TestFactory_CreateProvider/create_openai_provider
=== RUN   TestFactory_CreateProvider/create_transformers_provider
=== RUN   TestFactory_CreateProvider/create_sentence_provider
=== RUN   TestFactory_CreateProvider/create_onnx_provider
=== RUN   TestFactory_CreateProvider/unknown_provider
--- PASS: TestFactory_CreateProvider (0.00s)
    --- PASS: TestFactory_CreateProvider/create_openai_provider (0.00s)
    --- PASS: TestFactory_CreateProvider/create_transformers_provider (0.00s)
    --- PASS: TestFactory_CreateProvider/create_sentence_provider (0.00s)
    --- PASS: TestFactory_CreateProvider/create_onnx_provider (0.00s)
    --- PASS: TestFactory_CreateProvider/unknown_provider (0.00s)
=== RUN   TestFactory_CreateAuto
=== RUN   TestFactory_CreateAuto/auto_selects_transformers
--- PASS: TestFactory_CreateAuto (0.00s)
    --- PASS: TestFactory_CreateAuto/auto_selects_transformers (0.00s)
=== RUN   TestFallbackProvider
=== RUN   TestFallbackProvider/fallback_on_primary_failure
=== RUN   TestFallbackProvider/no_fallback_when_disabled
--- PASS: TestFallbackProvider (0.39s)
    --- PASS: TestFallbackProvider/fallback_on_primary_failure (0.39s)
    --- PASS: TestFallbackProvider/no_fallback_when_disabled (0.00s)
=== RUN   TestFallbackProvider_Methods
=== RUN   TestFallbackProvider_Methods/Name
=== RUN   TestFallbackProvider_Methods/Dimensions
=== RUN   TestFallbackProvider_Methods/Cost
=== RUN   TestFallbackProvider_Methods/IsAvailable_checks_fallbacks
--- PASS: TestFallbackProvider_Methods (0.00s)
    --- PASS: TestFallbackProvider_Methods/Name (0.00s)
    --- PASS: TestFallbackProvider_Methods/Dimensions (0.00s)
    --- PASS: TestFallbackProvider_Methods/Cost (0.00s)
    --- PASS: TestFallbackProvider_Methods/IsAvailable_checks_fallbacks (0.00s)
PASS
coverage: 72.4% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/embeddings	(cached)	coverage: 72.4% of statements
=== RUN   TestNewONNX
=== RUN   TestNewONNX/valid_config_CPU
=== RUN   TestNewONNX/valid_config_GPU
=== RUN   TestNewONNX/default_model
=== RUN   TestNewONNX/custom_cache_dir
--- PASS: TestNewONNX (0.00s)
    --- PASS: TestNewONNX/valid_config_CPU (0.00s)
    --- PASS: TestNewONNX/valid_config_GPU (0.00s)
    --- PASS: TestNewONNX/default_model (0.00s)
    --- PASS: TestNewONNX/custom_cache_dir (0.00s)
=== RUN   TestONNXProvider_Interface
=== RUN   TestONNXProvider_Interface/Name
=== RUN   TestONNXProvider_Interface/Dimensions
=== RUN   TestONNXProvider_Interface/Cost
--- PASS: TestONNXProvider_Interface (0.00s)
    --- PASS: TestONNXProvider_Interface/Name (0.00s)
    --- PASS: TestONNXProvider_Interface/Dimensions (0.00s)
    --- PASS: TestONNXProvider_Interface/Cost (0.00s)
=== RUN   TestONNXProvider_IsAvailable
--- PASS: TestONNXProvider_IsAvailable (0.00s)
=== RUN   TestONNXProvider_Embed
=== RUN   TestONNXProvider_Embed/empty_text_error
=== RUN   TestONNXProvider_Embed/requires_setup
--- PASS: TestONNXProvider_Embed (0.00s)
    --- PASS: TestONNXProvider_Embed/empty_text_error (0.00s)
    --- PASS: TestONNXProvider_Embed/requires_setup (0.00s)
=== RUN   TestONNXProvider_EmbedBatch
=== RUN   TestONNXProvider_EmbedBatch/empty_batch_error
=== RUN   TestONNXProvider_EmbedBatch/requires_setup
--- PASS: TestONNXProvider_EmbedBatch (0.00s)
    --- PASS: TestONNXProvider_EmbedBatch/empty_batch_error (0.00s)
    --- PASS: TestONNXProvider_EmbedBatch/requires_setup (0.00s)
=== RUN   TestONNXProvider_GetExecutionProvider
=== RUN   TestONNXProvider_GetExecutionProvider/CPU_mode
=== RUN   TestONNXProvider_GetExecutionProvider/GPU_mode
--- PASS: TestONNXProvider_GetExecutionProvider (0.00s)
    --- PASS: TestONNXProvider_GetExecutionProvider/CPU_mode (0.00s)
    --- PASS: TestONNXProvider_GetExecutionProvider/GPU_mode (0.00s)
=== RUN   TestONNXProvider_EstimateLatency
=== RUN   TestONNXProvider_EstimateLatency/CPU_latency
=== RUN   TestONNXProvider_EstimateLatency/GPU_latency
--- PASS: TestONNXProvider_EstimateLatency (0.00s)
    --- PASS: TestONNXProvider_EstimateLatency/CPU_latency (0.00s)
    --- PASS: TestONNXProvider_EstimateLatency/GPU_latency (0.00s)
=== RUN   TestONNXProvider_ModelSize
=== RUN   TestONNXProvider_ModelSize/ms-marco-12
=== RUN   TestONNXProvider_ModelSize/ms-marco-6
=== RUN   TestONNXProvider_ModelSize/unknown
--- PASS: TestONNXProvider_ModelSize (0.00s)
    --- PASS: TestONNXProvider_ModelSize/ms-marco-12 (0.00s)
    --- PASS: TestONNXProvider_ModelSize/ms-marco-6 (0.00s)
    --- PASS: TestONNXProvider_ModelSize/unknown (0.00s)
=== RUN   TestONNXProvider_DimensionsByModel
=== RUN   TestONNXProvider_DimensionsByModel/ms-marco-MiniLM-L-12-v2
=== RUN   TestONNXProvider_DimensionsByModel/ms-marco-MiniLM-L-6-v2
=== RUN   TestONNXProvider_DimensionsByModel/all-MiniLM-L6-v2
=== RUN   TestONNXProvider_DimensionsByModel/unknown-model
--- PASS: TestONNXProvider_DimensionsByModel (0.00s)
    --- PASS: TestONNXProvider_DimensionsByModel/ms-marco-MiniLM-L-12-v2 (0.00s)
    --- PASS: TestONNXProvider_DimensionsByModel/ms-marco-MiniLM-L-6-v2 (0.00s)
    --- PASS: TestONNXProvider_DimensionsByModel/all-MiniLM-L6-v2 (0.00s)
    --- PASS: TestONNXProvider_DimensionsByModel/unknown-model (0.00s)
=== RUN   TestNewOpenAI
=== RUN   TestNewOpenAI/valid_config
=== RUN   TestNewOpenAI/missing_API_key
=== RUN   TestNewOpenAI/default_model
=== RUN   TestNewOpenAI/large_model
=== RUN   TestNewOpenAI/ada_model
--- PASS: TestNewOpenAI (0.00s)
    --- PASS: TestNewOpenAI/valid_config (0.00s)
    --- PASS: TestNewOpenAI/missing_API_key (0.00s)
    --- PASS: TestNewOpenAI/default_model (0.00s)
    --- PASS: TestNewOpenAI/large_model (0.00s)
    --- PASS: TestNewOpenAI/ada_model (0.00s)
=== RUN   TestGetModelSpecs
=== RUN   TestGetModelSpecs/small_model
=== RUN   TestGetModelSpecs/large_model
=== RUN   TestGetModelSpecs/ada_model
=== RUN   TestGetModelSpecs/unknown_model
--- PASS: TestGetModelSpecs (0.00s)
    --- PASS: TestGetModelSpecs/small_model (0.00s)
    --- PASS: TestGetModelSpecs/large_model (0.00s)
    --- PASS: TestGetModelSpecs/ada_model (0.00s)
    --- PASS: TestGetModelSpecs/unknown_model (0.00s)
=== RUN   TestOpenAIProvider_Interface
=== RUN   TestOpenAIProvider_Interface/Name
=== RUN   TestOpenAIProvider_Interface/Dimensions
=== RUN   TestOpenAIProvider_Interface/Cost
--- PASS: TestOpenAIProvider_Interface (0.00s)
    --- PASS: TestOpenAIProvider_Interface/Name (0.00s)
    --- PASS: TestOpenAIProvider_Interface/Dimensions (0.00s)
    --- PASS: TestOpenAIProvider_Interface/Cost (0.00s)
=== RUN   TestOpenAIProvider_EmbedErrors
=== RUN   TestOpenAIProvider_EmbedErrors/empty_text
--- PASS: TestOpenAIProvider_EmbedErrors (0.00s)
    --- PASS: TestOpenAIProvider_EmbedErrors/empty_text (0.00s)
=== RUN   TestOpenAIProvider_EmbedBatchErrors
=== RUN   TestOpenAIProvider_EmbedBatchErrors/empty_batch
=== RUN   TestOpenAIProvider_EmbedBatchErrors/nil_batch
--- PASS: TestOpenAIProvider_EmbedBatchErrors (0.00s)
    --- PASS: TestOpenAIProvider_EmbedBatchErrors/empty_batch (0.00s)
    --- PASS: TestOpenAIProvider_EmbedBatchErrors/nil_batch (0.00s)
=== RUN   TestOpenAIProvider_Timeout
=== RUN   TestOpenAIProvider_Timeout/default_timeout
=== RUN   TestOpenAIProvider_Timeout/custom_timeout
--- PASS: TestOpenAIProvider_Timeout (0.00s)
    --- PASS: TestOpenAIProvider_Timeout/default_timeout (0.00s)
    --- PASS: TestOpenAIProvider_Timeout/custom_timeout (0.00s)
=== RUN   TestOpenAIProvider_IsAvailable
--- PASS: TestOpenAIProvider_IsAvailable (0.34s)
=== RUN   TestNewTransformers
=== RUN   TestNewTransformers/valid_config
=== RUN   TestNewTransformers/default_model
=== RUN   TestNewTransformers/custom_cache_dir
--- PASS: TestNewTransformers (0.00s)
    --- PASS: TestNewTransformers/valid_config (0.00s)
    --- PASS: TestNewTransformers/default_model (0.00s)
    --- PASS: TestNewTransformers/custom_cache_dir (0.00s)
=== RUN   TestTransformersProvider_Interface
=== RUN   TestTransformersProvider_Interface/Name
=== RUN   TestTransformersProvider_Interface/Dimensions
=== RUN   TestTransformersProvider_Interface/Cost
--- PASS: TestTransformersProvider_Interface (0.00s)
    --- PASS: TestTransformersProvider_Interface/Name (0.00s)
    --- PASS: TestTransformersProvider_Interface/Dimensions (0.00s)
    --- PASS: TestTransformersProvider_Interface/Cost (0.00s)
=== RUN   TestTransformersProvider_IsAvailable
--- PASS: TestTransformersProvider_IsAvailable (0.00s)
=== RUN   TestTransformersProvider_Embed
=== RUN   TestTransformersProvider_Embed/empty_text_error
=== RUN   TestTransformersProvider_Embed/requires_external_setup
--- PASS: TestTransformersProvider_Embed (0.00s)
    --- PASS: TestTransformersProvider_Embed/empty_text_error (0.00s)
    --- PASS: TestTransformersProvider_Embed/requires_external_setup (0.00s)
=== RUN   TestTransformersProvider_EmbedBatch
=== RUN   TestTransformersProvider_EmbedBatch/empty_batch_error
=== RUN   TestTransformersProvider_EmbedBatch/requires_external_setup
--- PASS: TestTransformersProvider_EmbedBatch (0.00s)
    --- PASS: TestTransformersProvider_EmbedBatch/empty_batch_error (0.00s)
    --- PASS: TestTransformersProvider_EmbedBatch/requires_external_setup (0.00s)
=== RUN   TestNewSentenceTransformers
=== RUN   TestNewSentenceTransformers/valid_config
=== RUN   TestNewSentenceTransformers/default_model
--- PASS: TestNewSentenceTransformers (0.00s)
    --- PASS: TestNewSentenceTransformers/valid_config (0.00s)
    --- PASS: TestNewSentenceTransformers/default_model (0.00s)
=== RUN   TestSentenceTransformersProvider_Interface
=== RUN   TestSentenceTransformersProvider_Interface/Name
=== RUN   TestSentenceTransformersProvider_Interface/Dimensions
=== RUN   TestSentenceTransformersProvider_Interface/Cost
--- PASS: TestSentenceTransformersProvider_Interface (0.00s)
    --- PASS: TestSentenceTransformersProvider_Interface/Name (0.00s)
    --- PASS: TestSentenceTransformersProvider_Interface/Dimensions (0.00s)
    --- PASS: TestSentenceTransformersProvider_Interface/Cost (0.00s)
=== RUN   TestSentenceTransformersProvider_IsAvailable
--- PASS: TestSentenceTransformersProvider_IsAvailable (0.00s)
=== RUN   TestSentenceTransformersProvider_Embed
=== RUN   TestSentenceTransformersProvider_Embed/empty_text_error
=== RUN   TestSentenceTransformersProvider_Embed/requires_external_setup
--- PASS: TestSentenceTransformersProvider_Embed (0.00s)
    --- PASS: TestSentenceTransformersProvider_Embed/empty_text_error (0.00s)
    --- PASS: TestSentenceTransformersProvider_Embed/requires_external_setup (0.00s)
=== RUN   TestSentenceTransformersProvider_EmbedBatch
=== RUN   TestSentenceTransformersProvider_EmbedBatch/empty_batch_error
=== RUN   TestSentenceTransformersProvider_EmbedBatch/delegates_to_individual_calls
--- PASS: TestSentenceTransformersProvider_EmbedBatch (0.00s)
    --- PASS: TestSentenceTransformersProvider_EmbedBatch/empty_batch_error (0.00s)
    --- PASS: TestSentenceTransformersProvider_EmbedBatch/delegates_to_individual_calls (0.00s)
PASS
coverage: 41.4% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/embeddings/providers	(cached)	coverage: 41.4% of statements
=== RUN   TestCosineSimilarity
=== RUN   TestCosineSimilarity/identical_vectors
=== RUN   TestCosineSimilarity/orthogonal_vectors
=== RUN   TestCosineSimilarity/opposite_vectors
=== RUN   TestCosineSimilarity/similar_vectors
=== RUN   TestCosineSimilarity/zero_vector_a
=== RUN   TestCosineSimilarity/zero_vector_b
--- PASS: TestCosineSimilarity (0.00s)
    --- PASS: TestCosineSimilarity/identical_vectors (0.00s)
    --- PASS: TestCosineSimilarity/orthogonal_vectors (0.00s)
    --- PASS: TestCosineSimilarity/opposite_vectors (0.00s)
    --- PASS: TestCosineSimilarity/similar_vectors (0.00s)
    --- PASS: TestCosineSimilarity/zero_vector_a (0.00s)
    --- PASS: TestCosineSimilarity/zero_vector_b (0.00s)
=== RUN   TestCosineSimilarityDifferentLengths
--- PASS: TestCosineSimilarityDifferentLengths (0.00s)
=== RUN   TestEuclideanDistance
=== RUN   TestEuclideanDistance/identical_vectors
=== RUN   TestEuclideanDistance/unit_distance
=== RUN   TestEuclideanDistance/3-4-5_triangle
=== RUN   TestEuclideanDistance/negative_coordinates
--- PASS: TestEuclideanDistance (0.00s)
    --- PASS: TestEuclideanDistance/identical_vectors (0.00s)
    --- PASS: TestEuclideanDistance/unit_distance (0.00s)
    --- PASS: TestEuclideanDistance/3-4-5_triangle (0.00s)
    --- PASS: TestEuclideanDistance/negative_coordinates (0.00s)
=== RUN   TestEuclideanDistanceDifferentLengths
--- PASS: TestEuclideanDistanceDifferentLengths (0.00s)
=== RUN   TestDotProduct
=== RUN   TestDotProduct/orthogonal_vectors
=== RUN   TestDotProduct/parallel_vectors
=== RUN   TestDotProduct/simple_case
=== RUN   TestDotProduct/negative_values
--- PASS: TestDotProduct (0.00s)
    --- PASS: TestDotProduct/orthogonal_vectors (0.00s)
    --- PASS: TestDotProduct/parallel_vectors (0.00s)
    --- PASS: TestDotProduct/simple_case (0.00s)
    --- PASS: TestDotProduct/negative_values (0.00s)
=== RUN   TestDotProductDifferentLengths
--- PASS: TestDotProductDifferentLengths (0.00s)
=== RUN   TestManhattanDistance
=== RUN   TestManhattanDistance/identical_vectors
=== RUN   TestManhattanDistance/unit_distance_x
=== RUN   TestManhattanDistance/city_block_distance
=== RUN   TestManhattanDistance/negative_coordinates
=== RUN   TestManhattanDistance/multi-dimensional
--- PASS: TestManhattanDistance (0.00s)
    --- PASS: TestManhattanDistance/identical_vectors (0.00s)
    --- PASS: TestManhattanDistance/unit_distance_x (0.00s)
    --- PASS: TestManhattanDistance/city_block_distance (0.00s)
    --- PASS: TestManhattanDistance/negative_coordinates (0.00s)
    --- PASS: TestManhattanDistance/multi-dimensional (0.00s)
=== RUN   TestManhattanDistanceDifferentLengths
--- PASS: TestManhattanDistanceDifferentLengths (0.00s)
=== RUN   TestNewGraph
--- PASS: TestNewGraph (0.00s)
=== RUN   TestGraphInsert
--- PASS: TestGraphInsert (0.00s)
=== RUN   TestGraphSearch
--- PASS: TestGraphSearch (0.56s)
=== RUN   TestGraphDelete
--- PASS: TestGraphDelete (0.00s)
=== RUN   TestGraphStatistics
--- PASS: TestGraphStatistics (2.53s)
=== RUN   TestGraphSaveLoad
--- PASS: TestGraphSaveLoad (0.34s)
=== RUN   TestGraphSaveEmpty
--- PASS: TestGraphSaveEmpty (0.00s)
=== RUN   TestGraphLoadNonExistent
--- PASS: TestGraphLoadNonExistent (0.00s)
=== RUN   TestSearchKNN
--- PASS: TestSearchKNN (0.51s)
=== RUN   TestSearchKNNEmptyGraph
--- PASS: TestSearchKNNEmptyGraph (0.00s)
=== RUN   TestSearchWithCustomEfSearch
--- PASS: TestSearchWithCustomEfSearch (2.08s)
=== RUN   TestRangeSearch
--- PASS: TestRangeSearch (0.54s)
=== RUN   TestBatchSearch
--- PASS: TestBatchSearch (5.41s)
=== RUN   TestDeleteAndSearch
--- PASS: TestDeleteAndSearch (0.01s)
PASS
coverage: 85.1% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/indexing/hnsw	(cached)	coverage: 85.1% of statements
=== RUN   TestNewTFIDFIndex
--- PASS: TestNewTFIDFIndex (0.00s)
=== RUN   TestAddDocument
--- PASS: TestAddDocument (0.00s)
=== RUN   TestRemoveDocument
--- PASS: TestRemoveDocument (0.00s)
=== RUN   TestSearch
--- PASS: TestSearch (0.00s)
=== RUN   TestSearchWithLimit
--- PASS: TestSearchWithLimit (0.00s)
=== RUN   TestSearchEmptyQuery
--- PASS: TestSearchEmptyQuery (0.00s)
=== RUN   TestSearchEmptyIndex
--- PASS: TestSearchEmptyIndex (0.00s)
=== RUN   TestFindSimilar
--- PASS: TestFindSimilar (0.00s)
=== RUN   TestFindSimilarNonExistent
--- PASS: TestFindSimilarNonExistent (0.00s)
=== RUN   TestFindSimilarWithLimit
--- PASS: TestFindSimilarWithLimit (0.00s)
=== RUN   TestTokenizeAndCount
=== RUN   TestTokenizeAndCount/Simple_text
=== RUN   TestTokenizeAndCount/Repeated_words
=== RUN   TestTokenizeAndCount/Single_character_ignored
=== RUN   TestTokenizeAndCount/Mixed_case
--- PASS: TestTokenizeAndCount (0.00s)
    --- PASS: TestTokenizeAndCount/Simple_text (0.00s)
    --- PASS: TestTokenizeAndCount/Repeated_words (0.00s)
    --- PASS: TestTokenizeAndCount/Single_character_ignored (0.00s)
    --- PASS: TestTokenizeAndCount/Mixed_case (0.00s)
=== RUN   TestExtractHighlights
--- PASS: TestExtractHighlights (0.00s)
=== RUN   TestGetStats
--- PASS: TestGetStats (0.00s)
=== RUN   TestCalculateSimilarity
--- PASS: TestCalculateSimilarity (0.00s)
PASS
coverage: 96.7% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/indexing/tfidf	(cached)	coverage: 96.7% of statements
=== RUN   TestTokenEncryptor_EncryptDecrypt
--- PASS: TestTokenEncryptor_EncryptDecrypt (0.36s)
=== RUN   TestTokenEncryptor_EncryptDecryptDifferentData
=== RUN   TestTokenEncryptor_EncryptDecryptDifferentData/#00
=== RUN   TestTokenEncryptor_EncryptDecryptDifferentData/a
=== RUN   TestTokenEncryptor_EncryptDecryptDifferentData/short_string
=== RUN   TestTokenEncryptor_EncryptDecryptDifferentData/This_is_a_longer_string_with_special_characters:_!@#$%^&*()
=== RUN   TestTokenEncryptor_EncryptDecryptDifferentData/{"access_token":"gho_test123","token_type":"bearer","expires_in":3600}
--- PASS: TestTokenEncryptor_EncryptDecryptDifferentData (0.32s)
    --- PASS: TestTokenEncryptor_EncryptDecryptDifferentData/#00 (0.00s)
    --- PASS: TestTokenEncryptor_EncryptDecryptDifferentData/a (0.00s)
    --- PASS: TestTokenEncryptor_EncryptDecryptDifferentData/short_string (0.00s)
    --- PASS: TestTokenEncryptor_EncryptDecryptDifferentData/This_is_a_longer_string_with_special_characters:_!@#$%^&*() (0.00s)
    --- PASS: TestTokenEncryptor_EncryptDecryptDifferentData/{"access_token":"gho_test123","token_type":"bearer","expires_in":3600} (0.00s)
=== RUN   TestTokenEncryptor_DifferentEncryptionsAreDifferent
--- PASS: TestTokenEncryptor_DifferentEncryptionsAreDifferent (0.37s)
=== RUN   TestTokenEncryptor_DecryptInvalidData
=== RUN   TestTokenEncryptor_DecryptInvalidData/empty_string
=== RUN   TestTokenEncryptor_DecryptInvalidData/invalid_base64
=== RUN   TestTokenEncryptor_DecryptInvalidData/valid_base64_but_too_short
=== RUN   TestTokenEncryptor_DecryptInvalidData/valid_base64_but_invalid_ciphertext
--- PASS: TestTokenEncryptor_DecryptInvalidData (0.31s)
    --- PASS: TestTokenEncryptor_DecryptInvalidData/empty_string (0.00s)
    --- PASS: TestTokenEncryptor_DecryptInvalidData/invalid_base64 (0.00s)
    --- PASS: TestTokenEncryptor_DecryptInvalidData/valid_base64_but_too_short (0.00s)
    --- PASS: TestTokenEncryptor_DecryptInvalidData/valid_base64_but_invalid_ciphertext (0.00s)
=== RUN   TestTokenEncryptor_ConsistentKeyDerivation
--- PASS: TestTokenEncryptor_ConsistentKeyDerivation (0.55s)
=== RUN   TestGetOrCreateSalt
--- PASS: TestGetOrCreateSalt (0.00s)
=== RUN   TestGetMachineID
--- PASS: TestGetMachineID (0.00s)
=== RUN   TestTokenEncryptor_LargeData
--- PASS: TestTokenEncryptor_LargeData (0.35s)
=== RUN   TestExtractElementData_Persona
--- PASS: TestExtractElementData_Persona (0.00s)
=== RUN   TestExtractElementData_Skill
--- PASS: TestExtractElementData_Skill (0.00s)
=== RUN   TestExtractElementData_Template
--- PASS: TestExtractElementData_Template (0.00s)
=== RUN   TestRestoreElementData_Persona
--- PASS: TestRestoreElementData_Persona (0.00s)
=== RUN   TestRestoreElementData_Skill
--- PASS: TestRestoreElementData_Skill (0.00s)
=== RUN   TestRestoreElementData_Template
--- PASS: TestRestoreElementData_Template (0.00s)
=== RUN   TestUnmarshalBehavioralTraits
=== RUN   TestUnmarshalBehavioralTraits/Valid_traits_with_intensity
=== RUN   TestUnmarshalBehavioralTraits/Trait_with_integer_intensity
=== RUN   TestUnmarshalBehavioralTraits/Empty_array
--- PASS: TestUnmarshalBehavioralTraits (0.00s)
    --- PASS: TestUnmarshalBehavioralTraits/Valid_traits_with_intensity (0.00s)
    --- PASS: TestUnmarshalBehavioralTraits/Trait_with_integer_intensity (0.00s)
    --- PASS: TestUnmarshalBehavioralTraits/Empty_array (0.00s)
=== RUN   TestUnmarshalExpertiseAreas
=== RUN   TestUnmarshalExpertiseAreas/Valid_expertise_areas
=== RUN   TestUnmarshalExpertiseAreas/Empty_array
--- PASS: TestUnmarshalExpertiseAreas (0.00s)
    --- PASS: TestUnmarshalExpertiseAreas/Valid_expertise_areas (0.00s)
    --- PASS: TestUnmarshalExpertiseAreas/Empty_array (0.00s)
=== RUN   TestUnmarshalResponseStyle
=== RUN   TestUnmarshalResponseStyle/Valid_response_style
=== RUN   TestUnmarshalResponseStyle/Empty_style
--- PASS: TestUnmarshalResponseStyle (0.00s)
    --- PASS: TestUnmarshalResponseStyle/Valid_response_style (0.00s)
    --- PASS: TestUnmarshalResponseStyle/Empty_style (0.00s)
=== RUN   TestUnmarshalSkillTriggers
=== RUN   TestUnmarshalSkillTriggers/Valid_triggers
=== RUN   TestUnmarshalSkillTriggers/Empty_array
--- PASS: TestUnmarshalSkillTriggers (0.00s)
    --- PASS: TestUnmarshalSkillTriggers/Valid_triggers (0.00s)
    --- PASS: TestUnmarshalSkillTriggers/Empty_array (0.00s)
=== RUN   TestUnmarshalSkillProcedures
=== RUN   TestUnmarshalSkillProcedures/Valid_procedures
=== RUN   TestUnmarshalSkillProcedures/Empty_array
--- PASS: TestUnmarshalSkillProcedures (0.00s)
    --- PASS: TestUnmarshalSkillProcedures/Valid_procedures (0.00s)
    --- PASS: TestUnmarshalSkillProcedures/Empty_array (0.00s)
=== RUN   TestUnmarshalTemplateVariables
=== RUN   TestUnmarshalTemplateVariables/Valid_variables
=== RUN   TestUnmarshalTemplateVariables/Empty_array
--- PASS: TestUnmarshalTemplateVariables (0.00s)
    --- PASS: TestUnmarshalTemplateVariables/Valid_variables (0.00s)
    --- PASS: TestUnmarshalTemplateVariables/Empty_array (0.00s)
=== RUN   TestRestoreElementData_Agent
--- PASS: TestRestoreElementData_Agent (0.00s)
=== RUN   TestRestoreElementData_Memory
--- PASS: TestRestoreElementData_Memory (0.00s)
=== RUN   TestRestoreElementData_Ensemble
--- PASS: TestRestoreElementData_Ensemble (0.00s)
=== RUN   TestLRUCache
=== RUN   TestLRUCache/Put_and_Get
=== RUN   TestLRUCache/Eviction
=== RUN   TestLRUCache/Delete
=== RUN   TestLRUCache/Clear
--- PASS: TestLRUCache (0.00s)
    --- PASS: TestLRUCache/Put_and_Get (0.00s)
    --- PASS: TestLRUCache/Eviction (0.00s)
    --- PASS: TestLRUCache/Delete (0.00s)
    --- PASS: TestLRUCache/Clear (0.00s)
=== RUN   TestSearchIndex
=== RUN   TestSearchIndex/Index_and_Search
=== RUN   TestSearchIndex/Remove_from_Index
=== RUN   TestSearchIndex/Multi-word_Search
--- PASS: TestSearchIndex (0.00s)
    --- PASS: TestSearchIndex/Index_and_Search (0.00s)
    --- PASS: TestSearchIndex/Remove_from_Index (0.00s)
    --- PASS: TestSearchIndex/Multi-word_Search (0.00s)
=== RUN   TestEnhancedFileElementRepository
=== RUN   TestEnhancedFileElementRepository/Create_and_GetByID_with_LRU_cache
=== RUN   TestEnhancedFileElementRepository/Directory_structure
=== RUN   TestEnhancedFileElementRepository/Atomic_updates
=== RUN   TestEnhancedFileElementRepository/Full-text_Search
=== RUN   TestEnhancedFileElementRepository/Backup_and_Restore
=== RUN   TestEnhancedFileElementRepository/Delete_removes_from_cache_and_index
=== RUN   TestEnhancedFileElementRepository/List_with_pagination
--- PASS: TestEnhancedFileElementRepository (0.02s)
    --- PASS: TestEnhancedFileElementRepository/Create_and_GetByID_with_LRU_cache (0.00s)
    --- PASS: TestEnhancedFileElementRepository/Directory_structure (0.00s)
    --- PASS: TestEnhancedFileElementRepository/Atomic_updates (0.00s)
    --- PASS: TestEnhancedFileElementRepository/Full-text_Search (0.00s)
    --- PASS: TestEnhancedFileElementRepository/Backup_and_Restore (0.00s)
    --- PASS: TestEnhancedFileElementRepository/Delete_removes_from_cache_and_index (0.00s)
    --- PASS: TestEnhancedFileElementRepository/List_with_pagination (0.01s)
=== RUN   TestEnhancedFileElementRepository_TypeConversion
=== RUN   TestEnhancedFileElementRepository_TypeConversion/Persona
=== RUN   TestEnhancedFileElementRepository_TypeConversion/Skill
=== RUN   TestEnhancedFileElementRepository_TypeConversion/Template
=== RUN   TestEnhancedFileElementRepository_TypeConversion/Agent
=== RUN   TestEnhancedFileElementRepository_TypeConversion/Memory
=== RUN   TestEnhancedFileElementRepository_TypeConversion/Ensemble
--- PASS: TestEnhancedFileElementRepository_TypeConversion (0.00s)
    --- PASS: TestEnhancedFileElementRepository_TypeConversion/Persona (0.00s)
    --- PASS: TestEnhancedFileElementRepository_TypeConversion/Skill (0.00s)
    --- PASS: TestEnhancedFileElementRepository_TypeConversion/Template (0.00s)
    --- PASS: TestEnhancedFileElementRepository_TypeConversion/Agent (0.00s)
    --- PASS: TestEnhancedFileElementRepository_TypeConversion/Memory (0.00s)
    --- PASS: TestEnhancedFileElementRepository_TypeConversion/Ensemble (0.00s)
=== RUN   TestNewFileElementRepository
=== RUN   TestNewFileElementRepository/create_with_default_directory
=== RUN   TestNewFileElementRepository/create_with_empty_directory
--- PASS: TestNewFileElementRepository (0.00s)
    --- PASS: TestNewFileElementRepository/create_with_default_directory (0.00s)
    --- PASS: TestNewFileElementRepository/create_with_empty_directory (0.00s)
=== RUN   TestFileElementRepository_Create
=== RUN   TestFileElementRepository_Create/create_new_element
=== RUN   TestFileElementRepository_Create/create_duplicate_element
=== RUN   TestFileElementRepository_Create/create_nil_element
--- PASS: TestFileElementRepository_Create (0.00s)
    --- PASS: TestFileElementRepository_Create/create_new_element (0.00s)
    --- PASS: TestFileElementRepository_Create/create_duplicate_element (0.00s)
    --- PASS: TestFileElementRepository_Create/create_nil_element (0.00s)
=== RUN   TestFileElementRepository_GetByID
=== RUN   TestFileElementRepository_GetByID/get_existing_element
=== RUN   TestFileElementRepository_GetByID/get_non-existing_element
--- PASS: TestFileElementRepository_GetByID (0.00s)
    --- PASS: TestFileElementRepository_GetByID/get_existing_element (0.00s)
    --- PASS: TestFileElementRepository_GetByID/get_non-existing_element (0.00s)
=== RUN   TestFileElementRepository_Update
=== RUN   TestFileElementRepository_Update/update_existing_element
=== RUN   TestFileElementRepository_Update/update_non-existing_element
=== RUN   TestFileElementRepository_Update/update_nil_element
--- PASS: TestFileElementRepository_Update (0.00s)
    --- PASS: TestFileElementRepository_Update/update_existing_element (0.00s)
    --- PASS: TestFileElementRepository_Update/update_non-existing_element (0.00s)
    --- PASS: TestFileElementRepository_Update/update_nil_element (0.00s)
=== RUN   TestFileElementRepository_Delete
=== RUN   TestFileElementRepository_Delete/delete_existing_element
=== RUN   TestFileElementRepository_Delete/delete_non-existing_element
--- PASS: TestFileElementRepository_Delete (0.00s)
    --- PASS: TestFileElementRepository_Delete/delete_existing_element (0.00s)
    --- PASS: TestFileElementRepository_Delete/delete_non-existing_element (0.00s)
=== RUN   TestFileElementRepository_List
=== RUN   TestFileElementRepository_List/list_all_elements
=== RUN   TestFileElementRepository_List/filter_by_type
=== RUN   TestFileElementRepository_List/filter_by_active_status
=== RUN   TestFileElementRepository_List/filter_by_tags
=== RUN   TestFileElementRepository_List/pagination
--- PASS: TestFileElementRepository_List (0.01s)
    --- PASS: TestFileElementRepository_List/list_all_elements (0.00s)
    --- PASS: TestFileElementRepository_List/filter_by_type (0.00s)
    --- PASS: TestFileElementRepository_List/filter_by_active_status (0.00s)
    --- PASS: TestFileElementRepository_List/filter_by_tags (0.00s)
    --- PASS: TestFileElementRepository_List/pagination (0.00s)
=== RUN   TestFileElementRepository_Exists
=== RUN   TestFileElementRepository_Exists/existing_element
=== RUN   TestFileElementRepository_Exists/non-existing_element
--- PASS: TestFileElementRepository_Exists (0.00s)
    --- PASS: TestFileElementRepository_Exists/existing_element (0.00s)
    --- PASS: TestFileElementRepository_Exists/non-existing_element (0.00s)
=== RUN   TestFileElementRepository_Persistence
=== RUN   TestFileElementRepository_Persistence/reload_cache_from_disk
--- PASS: TestFileElementRepository_Persistence (0.00s)
    --- PASS: TestFileElementRepository_Persistence/reload_cache_from_disk (0.00s)
=== RUN   TestFileElementRepository_FileStructure
=== RUN   TestFileElementRepository_FileStructure/correct_file_path_structure
--- PASS: TestFileElementRepository_FileStructure (0.00s)
    --- PASS: TestFileElementRepository_FileStructure/correct_file_path_structure (0.00s)
=== RUN   TestParseRepoURL_FullHTTPSURL
--- PASS: TestParseRepoURL_FullHTTPSURL (0.00s)
=== RUN   TestParseRepoURL_HTTPSURLWithGit
--- PASS: TestParseRepoURL_HTTPSURLWithGit (0.00s)
=== RUN   TestParseRepoURL_ShortFormat
--- PASS: TestParseRepoURL_ShortFormat (0.00s)
=== RUN   TestParseRepoURL_WithGitHubPrefix
--- PASS: TestParseRepoURL_WithGitHubPrefix (0.00s)
=== RUN   TestParseRepoURL_HTTPFormat
--- PASS: TestParseRepoURL_HTTPFormat (0.00s)
=== RUN   TestParseRepoURL_InvalidFormat_TooFewParts
--- PASS: TestParseRepoURL_InvalidFormat_TooFewParts (0.00s)
=== RUN   TestParseRepoURL_InvalidFormat_Empty
--- PASS: TestParseRepoURL_InvalidFormat_Empty (0.00s)
=== RUN   TestParseRepoURL_WithTrailingSlash
--- PASS: TestParseRepoURL_WithTrailingSlash (0.00s)
=== RUN   TestNewGitHubClient
--- PASS: TestNewGitHubClient (0.27s)
=== RUN   TestGitHubClient_RepositoryStruct
--- PASS: TestGitHubClient_RepositoryStruct (0.00s)
=== RUN   TestGitHubClient_FileContentStruct
--- PASS: TestGitHubClient_FileContentStruct (0.00s)
=== RUN   TestGitHubClient_CommitInfoStruct
--- PASS: TestGitHubClient_CommitInfoStruct (0.00s)
=== RUN   TestGitHubOAuthClient_TokenPersistence
--- PASS: TestGitHubOAuthClient_TokenPersistence (0.26s)
=== RUN   TestGitHubOAuthClient_LoadToken_FileNotExists
--- PASS: TestGitHubOAuthClient_LoadToken_FileNotExists (0.27s)
=== RUN   TestGitHubOAuthClient_IsAuthenticated_WithValidToken
--- PASS: TestGitHubOAuthClient_IsAuthenticated_WithValidToken (0.26s)
=== RUN   TestGitHubOAuthClient_IsAuthenticated_WithExpiredToken
--- PASS: TestGitHubOAuthClient_IsAuthenticated_WithExpiredToken (0.26s)
=== RUN   TestGitHubOAuthClient_IsAuthenticated_NoToken
--- PASS: TestGitHubOAuthClient_IsAuthenticated_NoToken (0.28s)
=== RUN   TestGitHubOAuthClient_SaveToken_CreatesDirectory
--- PASS: TestGitHubOAuthClient_SaveToken_CreatesDirectory (0.29s)
=== RUN   TestGitHubOAuthClient_TokenFilePermissions
--- PASS: TestGitHubOAuthClient_TokenFilePermissions (0.29s)
=== RUN   TestGitHubOAuthClient_GetToken_ValidToken
--- PASS: TestGitHubOAuthClient_GetToken_ValidToken (0.27s)
=== RUN   TestGitHubOAuthClient_GetToken_NoToken
--- PASS: TestGitHubOAuthClient_GetToken_NoToken (0.26s)
=== RUN   TestGitHubOAuthClient_NewGitHubOAuthClient
--- PASS: TestGitHubOAuthClient_NewGitHubOAuthClient (0.27s)
=== RUN   TestNewGitHubPublisher
=== RUN   TestNewGitHubPublisher/With_Token
=== RUN   TestNewGitHubPublisher/Without_Token
--- PASS: TestNewGitHubPublisher (0.00s)
    --- PASS: TestNewGitHubPublisher/With_Token (0.00s)
    --- PASS: TestNewGitHubPublisher/Without_Token (0.00s)
=== RUN   TestGetForkURL
=== RUN   TestGetForkURL/Standard_Repository
=== RUN   TestGetForkURL/Organization_Repository
--- PASS: TestGetForkURL (0.00s)
    --- PASS: TestGetForkURL/Standard_Repository (0.00s)
    --- PASS: TestGetForkURL/Organization_Repository (0.00s)
=== RUN   TestGetForkHTTPSURL
=== RUN   TestGetForkHTTPSURL/With_Token
=== RUN   TestGetForkHTTPSURL/Without_Token
--- PASS: TestGetForkHTTPSURL (0.00s)
    --- PASS: TestGetForkHTTPSURL/With_Token (0.00s)
    --- PASS: TestGetForkHTTPSURL/Without_Token (0.00s)
=== RUN   TestBuildPRTemplate_Complete
--- PASS: TestBuildPRTemplate_Complete (0.00s)
=== RUN   TestBuildPRTemplate_MinimalMetadata
--- PASS: TestBuildPRTemplate_MinimalMetadata (0.00s)
=== RUN   TestBuildPRTemplate_EmptyMetadata
--- PASS: TestBuildPRTemplate_EmptyMetadata (0.00s)
=== RUN   TestBuildPRTemplate_WithStats
--- PASS: TestBuildPRTemplate_WithStats (0.00s)
=== RUN   TestBuildPRTemplate_WithPartialStats
--- PASS: TestBuildPRTemplate_WithPartialStats (0.00s)
=== RUN   TestBuildPRTemplate_WithLinks
--- PASS: TestBuildPRTemplate_WithLinks (0.00s)
=== RUN   TestBuildPRTemplate_EmptyLinks
--- PASS: TestBuildPRTemplate_EmptyLinks (0.00s)
=== RUN   TestForkRepositoryOptions_Structure
--- PASS: TestForkRepositoryOptions_Structure (0.00s)
=== RUN   TestCloneOptions_Structure
--- PASS: TestCloneOptions_Structure (0.00s)
=== RUN   TestCommitOptions_Structure
--- PASS: TestCommitOptions_Structure (0.00s)
=== RUN   TestPushOptions_Structure
--- PASS: TestPushOptions_Structure (0.00s)
=== RUN   TestPullRequestOptions_Structure
--- PASS: TestPullRequestOptions_Structure (0.00s)
=== RUN   TestReleaseOptions_Structure
--- PASS: TestReleaseOptions_Structure (0.00s)
=== RUN   TestBuildPRTemplate_LongDescription
--- PASS: TestBuildPRTemplate_LongDescription (0.00s)
=== RUN   TestBuildPRTemplate_SpecialCharacters
--- PASS: TestBuildPRTemplate_SpecialCharacters (0.00s)
=== RUN   TestMemoryContentPersistence
    memory_persistence_test.go:37: Checking YAML file at: /tmp/TestMemoryContentPersistence787930056/001/memory/2025-12-22/memory_Test Memory_20251222-222033.yaml
    memory_persistence_test.go:44: YAML Content:
        metadata:
            id: memory_Test Memory_20251222-222033
            type: memory
            name: Test Memory
            description: Memory for testing persistence
            version: 1.0.0
            author: test-author
            tags: []
            isactive: true
            createdat: 2025-12-22T22:20:33.748191303-03:00
            updatedat: 2025-12-22T22:20:33.748191303-03:00
            custom: {}
        data:
            content: This is the memory content that MUST be persisted in YAML!
            content_hash: 0b7296a8c9dbd15e0423459dc076da64ff0ecb02c832f1a376199bd09b9c7950
            date_created: "2025-12-22"
            metadata:
                category: test
                priority: high
            search_index:
                - test
                - persistence
                - memory
--- PASS: TestMemoryContentPersistence (0.00s)
=== RUN   TestPersonaContentPersistence
    memory_persistence_test.go:105: Persona YAML:
        metadata:
            id: persona_Test Persona_20251222-222033
            type: persona
            name: Test Persona
            description: Persona for testing
            version: 1.0.0
            author: test-author
            tags: []
            isactive: true
            createdat: 2025-12-22T22:20:33.750136592-03:00
            updatedat: 2025-12-22T22:20:33.750142329-03:00
            custom: {}
        data:
            behavioral_traits:
                - name: analytical
                  intensity: 9
            expertise_areas: []
            hot_swappable: true
            owner: ""
            privacy_level: public
            response_style:
                tone: ""
                formality: ""
                verbosity: ""
            shared_with: []
            system_prompt: You are a test persona for validation purposes.
--- PASS: TestPersonaContentPersistence (0.00s)
=== RUN   TestSkillContentPersistence
    memory_persistence_test.go:153: Skill YAML:
        metadata:
            id: skill_Test Skill_20251222-222033
            type: skill
            name: Test Skill
            description: Skill for testing
            version: 1.0.0
            author: test-author
            tags: []
            isactive: true
            createdat: 2025-12-22T22:20:33.752026609-03:00
            updatedat: 2025-12-22T22:20:33.752089163-03:00
            custom: {}
        data:
            composable: true
            dependencies: []
            inputs: {}
            outputs: {}
            procedures:
                - step: 1
                  action: test_action
                  description: Test procedure
            tools_required: []
            triggers:
                - type: keyword
                  keywords:
                    - test
--- PASS: TestSkillContentPersistence (0.00s)
=== RUN   TestNewPRTracker
--- PASS: TestNewPRTracker (0.00s)
=== RUN   TestNewPRTracker_DefaultDir
--- PASS: TestNewPRTracker_DefaultDir (0.00s)
=== RUN   TestPRTracker_LoadHistory_NewFile
--- PASS: TestPRTracker_LoadHistory_NewFile (0.00s)
=== RUN   TestPRTracker_SaveAndLoad
--- PASS: TestPRTracker_SaveAndLoad (0.00s)
=== RUN   TestPRTracker_TrackSubmission
--- PASS: TestPRTracker_TrackSubmission (0.00s)
=== RUN   TestPRTracker_UpdateSubmissionStatus
--- PASS: TestPRTracker_UpdateSubmissionStatus (0.01s)
=== RUN   TestPRTracker_UpdateSubmissionStatus_NotFound
--- PASS: TestPRTracker_UpdateSubmissionStatus_NotFound (0.00s)
=== RUN   TestPRTracker_GetSubmissionByPRNumber
--- PASS: TestPRTracker_GetSubmissionByPRNumber (0.00s)
=== RUN   TestPRTracker_GetSubmissionsByElement
--- PASS: TestPRTracker_GetSubmissionsByElement (0.00s)
=== RUN   TestPRTracker_GetSubmissionsByStatus
--- PASS: TestPRTracker_GetSubmissionsByStatus (0.00s)
=== RUN   TestPRTracker_GetRecentSubmissions
--- PASS: TestPRTracker_GetRecentSubmissions (0.00s)
=== RUN   TestPRTracker_GetStats
--- PASS: TestPRTracker_GetStats (0.00s)
=== RUN   TestPRTracker_AddReviewComment
--- PASS: TestPRTracker_AddReviewComment (0.00s)
=== RUN   TestPRTracker_UpdateNotes
--- PASS: TestPRTracker_UpdateNotes (0.00s)
=== RUN   TestPRTracker_DeleteSubmission
--- PASS: TestPRTracker_DeleteSubmission (0.00s)
=== RUN   TestPRTracker_Clear
--- PASS: TestPRTracker_Clear (0.00s)
=== RUN   TestNewInMemoryElementRepository
--- PASS: TestNewInMemoryElementRepository (0.00s)
=== RUN   TestInMemoryElementRepository_Create
=== RUN   TestInMemoryElementRepository_Create/create_valid_element
=== RUN   TestInMemoryElementRepository_Create/create_nil_element
=== RUN   TestInMemoryElementRepository_Create/create_duplicate_element
--- PASS: TestInMemoryElementRepository_Create (0.00s)
    --- PASS: TestInMemoryElementRepository_Create/create_valid_element (0.00s)
    --- PASS: TestInMemoryElementRepository_Create/create_nil_element (0.00s)
    --- PASS: TestInMemoryElementRepository_Create/create_duplicate_element (0.00s)
=== RUN   TestInMemoryElementRepository_GetByID
=== RUN   TestInMemoryElementRepository_GetByID/get_existing_element
=== RUN   TestInMemoryElementRepository_GetByID/get_non-existing_element
--- PASS: TestInMemoryElementRepository_GetByID (0.00s)
    --- PASS: TestInMemoryElementRepository_GetByID/get_existing_element (0.00s)
    --- PASS: TestInMemoryElementRepository_GetByID/get_non-existing_element (0.00s)
=== RUN   TestInMemoryElementRepository_Update
=== RUN   TestInMemoryElementRepository_Update/update_existing_element
=== RUN   TestInMemoryElementRepository_Update/update_non-existing_element
=== RUN   TestInMemoryElementRepository_Update/update_nil_element
--- PASS: TestInMemoryElementRepository_Update (0.00s)
    --- PASS: TestInMemoryElementRepository_Update/update_existing_element (0.00s)
    --- PASS: TestInMemoryElementRepository_Update/update_non-existing_element (0.00s)
    --- PASS: TestInMemoryElementRepository_Update/update_nil_element (0.00s)
=== RUN   TestInMemoryElementRepository_Delete
=== RUN   TestInMemoryElementRepository_Delete/delete_existing_element
=== RUN   TestInMemoryElementRepository_Delete/delete_non-existing_element
--- PASS: TestInMemoryElementRepository_Delete (0.00s)
    --- PASS: TestInMemoryElementRepository_Delete/delete_existing_element (0.00s)
    --- PASS: TestInMemoryElementRepository_Delete/delete_non-existing_element (0.00s)
=== RUN   TestInMemoryElementRepository_List
=== RUN   TestInMemoryElementRepository_List/list_all_elements
=== RUN   TestInMemoryElementRepository_List/filter_by_type
=== RUN   TestInMemoryElementRepository_List/filter_by_active_status
=== RUN   TestInMemoryElementRepository_List/filter_by_tags
=== RUN   TestInMemoryElementRepository_List/filter_with_pagination
--- PASS: TestInMemoryElementRepository_List (0.00s)
    --- PASS: TestInMemoryElementRepository_List/list_all_elements (0.00s)
    --- PASS: TestInMemoryElementRepository_List/filter_by_type (0.00s)
    --- PASS: TestInMemoryElementRepository_List/filter_by_active_status (0.00s)
    --- PASS: TestInMemoryElementRepository_List/filter_by_tags (0.00s)
    --- PASS: TestInMemoryElementRepository_List/filter_with_pagination (0.00s)
=== RUN   TestInMemoryElementRepository_Exists
=== RUN   TestInMemoryElementRepository_Exists/existing_element
=== RUN   TestInMemoryElementRepository_Exists/non-existing_element
--- PASS: TestInMemoryElementRepository_Exists (0.00s)
    --- PASS: TestInMemoryElementRepository_Exists/existing_element (0.00s)
    --- PASS: TestInMemoryElementRepository_Exists/non-existing_element (0.00s)
=== RUN   TestInMemoryElementRepository_Clear
--- PASS: TestInMemoryElementRepository_Clear (0.00s)
=== RUN   TestInMemoryElementRepository_Concurrency
--- PASS: TestInMemoryElementRepository_Concurrency (0.00s)
=== RUN   TestNewConflictDetector
=== RUN   TestNewConflictDetector/explicit_local-wins_strategy
=== RUN   TestNewConflictDetector/explicit_remote-wins_strategy
=== RUN   TestNewConflictDetector/empty_strategy_defaults_to_manual
=== RUN   TestNewConflictDetector/newest-wins_strategy
--- PASS: TestNewConflictDetector (0.00s)
    --- PASS: TestNewConflictDetector/explicit_local-wins_strategy (0.00s)
    --- PASS: TestNewConflictDetector/explicit_remote-wins_strategy (0.00s)
    --- PASS: TestNewConflictDetector/empty_strategy_defaults_to_manual (0.00s)
    --- PASS: TestNewConflictDetector/newest-wins_strategy (0.00s)
=== RUN   TestDetectConflicts
=== RUN   TestDetectConflicts/no_conflicts_-_identical_elements
=== RUN   TestDetectConflicts/modify-modify_conflict
=== RUN   TestDetectConflicts/modify-delete_conflict
=== RUN   TestDetectConflicts/delete-modify_conflict
=== RUN   TestDetectConflicts/multiple_conflicts
=== RUN   TestDetectConflicts/no_conflict_-_only_remote_modified_before_sync
--- PASS: TestDetectConflicts (0.00s)
    --- PASS: TestDetectConflicts/no_conflicts_-_identical_elements (0.00s)
    --- PASS: TestDetectConflicts/modify-modify_conflict (0.00s)
    --- PASS: TestDetectConflicts/modify-delete_conflict (0.00s)
    --- PASS: TestDetectConflicts/delete-modify_conflict (0.00s)
    --- PASS: TestDetectConflicts/multiple_conflicts (0.00s)
    --- PASS: TestDetectConflicts/no_conflict_-_only_remote_modified_before_sync (0.00s)
=== RUN   TestResolveConflict
=== RUN   TestResolveConflict/local-wins_strategy
=== RUN   TestResolveConflict/remote-wins_strategy
=== RUN   TestResolveConflict/newest-wins_strategy
=== RUN   TestResolveConflict/merge-content_strategy
=== RUN   TestResolveConflict/manual_strategy_returns_error
=== RUN   TestResolveConflict/local-wins_with_nil_local_returns_error
=== RUN   TestResolveConflict/remote-wins_with_nil_remote_returns_error
=== RUN   TestResolveConflict/newest-wins_with_nil_local_returns_remote
--- PASS: TestResolveConflict (0.00s)
    --- PASS: TestResolveConflict/local-wins_strategy (0.00s)
    --- PASS: TestResolveConflict/remote-wins_strategy (0.00s)
    --- PASS: TestResolveConflict/newest-wins_strategy (0.00s)
    --- PASS: TestResolveConflict/merge-content_strategy (0.00s)
    --- PASS: TestResolveConflict/manual_strategy_returns_error (0.00s)
    --- PASS: TestResolveConflict/local-wins_with_nil_local_returns_error (0.00s)
    --- PASS: TestResolveConflict/remote-wins_with_nil_remote_returns_error (0.00s)
    --- PASS: TestResolveConflict/newest-wins_with_nil_local_returns_remote (0.00s)
=== RUN   TestCalculateChecksum
--- PASS: TestCalculateChecksum (0.00s)
=== RUN   TestSyncConflictMethods
=== RUN   TestSyncConflictMethods/GetConflictSummary
=== RUN   TestSyncConflictMethods/IsResolved
--- PASS: TestSyncConflictMethods (0.00s)
    --- PASS: TestSyncConflictMethods/GetConflictSummary (0.00s)
    --- PASS: TestSyncConflictMethods/IsResolved (0.00s)
=== RUN   TestCompareChecksums
--- PASS: TestCompareChecksums (0.00s)
=== RUN   TestNewIncrementalSync
--- PASS: TestNewIncrementalSync (0.00s)
=== RUN   TestIncrementalSync_GetChangedFiles
--- PASS: TestIncrementalSync_GetChangedFiles (0.00s)
=== RUN   TestIncrementalSync_SyncLocal_FirstSync
--- PASS: TestIncrementalSync_SyncLocal_FirstSync (0.00s)
=== RUN   TestIncrementalSync_SyncLocal_IncrementalSync
--- PASS: TestIncrementalSync_SyncLocal_IncrementalSync (0.00s)
=== RUN   TestIncrementalSync_SyncLocal_DryRun
--- PASS: TestIncrementalSync_SyncLocal_DryRun (0.00s)
=== RUN   TestIncrementalSync_SyncLocal_WithTypeFilters
--- PASS: TestIncrementalSync_SyncLocal_WithTypeFilters (0.00s)
=== RUN   TestIncrementalSync_SyncLocal_WithProgressCallback
--- PASS: TestIncrementalSync_SyncLocal_WithProgressCallback (0.00s)
=== RUN   TestIncrementalSync_DetectConflicts
--- PASS: TestIncrementalSync_DetectConflicts (0.00s)
=== RUN   TestIncrementalSync_ResolveConflicts
--- PASS: TestIncrementalSync_ResolveConflicts (0.00s)
=== RUN   TestIncrementalSync_ExtractElementIDFromPath
=== RUN   TestIncrementalSync_ExtractElementIDFromPath/agent/2025-01-01/agent_test_123.yaml
=== RUN   TestIncrementalSync_ExtractElementIDFromPath/persona/2025-01-01/persona_abc.yaml
=== RUN   TestIncrementalSync_ExtractElementIDFromPath/test.yaml
=== RUN   TestIncrementalSync_ExtractElementIDFromPath/path/to/element.json
--- PASS: TestIncrementalSync_ExtractElementIDFromPath (0.00s)
    --- PASS: TestIncrementalSync_ExtractElementIDFromPath/agent/2025-01-01/agent_test_123.yaml (0.00s)
    --- PASS: TestIncrementalSync_ExtractElementIDFromPath/persona/2025-01-01/persona_abc.yaml (0.00s)
    --- PASS: TestIncrementalSync_ExtractElementIDFromPath/test.yaml (0.00s)
    --- PASS: TestIncrementalSync_ExtractElementIDFromPath/path/to/element.json (0.00s)
=== RUN   TestIncrementalSync_ExtractElementTypeFromPath
=== RUN   TestIncrementalSync_ExtractElementTypeFromPath/agent/2025-01-01/agent_test_123.yaml
=== RUN   TestIncrementalSync_ExtractElementTypeFromPath/persona/2025-01-01/persona_abc.yaml
=== RUN   TestIncrementalSync_ExtractElementTypeFromPath/skill/2025-01-01/skill_xyz.yaml
--- PASS: TestIncrementalSync_ExtractElementTypeFromPath (0.00s)
    --- PASS: TestIncrementalSync_ExtractElementTypeFromPath/agent/2025-01-01/agent_test_123.yaml (0.00s)
    --- PASS: TestIncrementalSync_ExtractElementTypeFromPath/persona/2025-01-01/persona_abc.yaml (0.00s)
    --- PASS: TestIncrementalSync_ExtractElementTypeFromPath/skill/2025-01-01/skill_xyz.yaml (0.00s)
=== RUN   TestIncrementalSync_GetSyncState
--- PASS: TestIncrementalSync_GetSyncState (0.00s)
=== RUN   TestIncrementalSync_ClearSyncState
--- PASS: TestIncrementalSync_ClearSyncState (0.00s)
=== RUN   TestNewSyncState
--- PASS: TestNewSyncState (0.00s)
=== RUN   TestSyncMetadataManager_SaveAndLoad
--- PASS: TestSyncMetadataManager_SaveAndLoad (0.00s)
=== RUN   TestSyncMetadataManager_LoadNonExistent
--- PASS: TestSyncMetadataManager_LoadNonExistent (0.00s)
=== RUN   TestSyncMetadataManager_TrackFile
--- PASS: TestSyncMetadataManager_TrackFile (0.00s)
=== RUN   TestSyncMetadataManager_UntrackFile
--- PASS: TestSyncMetadataManager_UntrackFile (0.00s)
=== RUN   TestSyncMetadataManager_MarkFileModified
--- PASS: TestSyncMetadataManager_MarkFileModified (0.00s)
=== RUN   TestSyncMetadataManager_MarkFileConflicted
--- PASS: TestSyncMetadataManager_MarkFileConflicted (0.00s)
=== RUN   TestSyncMetadataManager_AddHistory
--- PASS: TestSyncMetadataManager_AddHistory (0.00s)
=== RUN   TestSyncMetadataManager_GetFileState
--- PASS: TestSyncMetadataManager_GetFileState (0.00s)
=== RUN   TestSyncMetadataManager_GetModifiedFiles
--- PASS: TestSyncMetadataManager_GetModifiedFiles (0.00s)
=== RUN   TestSyncMetadataManager_GetConflictedFiles
--- PASS: TestSyncMetadataManager_GetConflictedFiles (0.00s)
=== RUN   TestSyncMetadataManager_UpdateLastSync
--- PASS: TestSyncMetadataManager_UpdateLastSync (0.00s)
=== RUN   TestSyncMetadataManager_ConflictManagement
--- PASS: TestSyncMetadataManager_ConflictManagement (0.00s)
=== RUN   TestSyncMetadataManager_IsFileTracked
--- PASS: TestSyncMetadataManager_IsFileTracked (0.00s)
=== RUN   TestSyncMetadataManager_GetTrackedFilesCount
--- PASS: TestSyncMetadataManager_GetTrackedFilesCount (0.00s)
=== RUN   TestSyncMetadataManager_Clear
--- PASS: TestSyncMetadataManager_Clear (0.00s)
=== RUN   TestSyncMetadataManager_GetSyncDir
--- PASS: TestSyncMetadataManager_GetSyncDir (0.00s)
=== RUN   TestSyncMetadataManager_GetStatePath
--- PASS: TestSyncMetadataManager_GetStatePath (0.00s)
PASS
coverage: 68.5% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/infrastructure	(cached)	coverage: 68.5% of statements
=== RUN   TestNewLogBuffer
--- PASS: TestNewLogBuffer (0.00s)
=== RUN   TestLogBuffer_Add
--- PASS: TestLogBuffer_Add (0.00s)
=== RUN   TestLogBuffer_CircularOverwrite
--- PASS: TestLogBuffer_CircularOverwrite (0.00s)
=== RUN   TestLogBuffer_Query_All
--- PASS: TestLogBuffer_Query_All (0.00s)
=== RUN   TestLogBuffer_Query_LevelFilter
--- PASS: TestLogBuffer_Query_LevelFilter (0.00s)
=== RUN   TestLogBuffer_Query_DateFilter
--- PASS: TestLogBuffer_Query_DateFilter (0.00s)
=== RUN   TestLogBuffer_Query_KeywordFilter
--- PASS: TestLogBuffer_Query_KeywordFilter (0.00s)
=== RUN   TestLogBuffer_Query_UserFilter
--- PASS: TestLogBuffer_Query_UserFilter (0.00s)
=== RUN   TestLogBuffer_Query_OperationFilter
--- PASS: TestLogBuffer_Query_OperationFilter (0.00s)
=== RUN   TestLogBuffer_Query_ToolFilter
--- PASS: TestLogBuffer_Query_ToolFilter (0.00s)
=== RUN   TestLogBuffer_Query_Limit
--- PASS: TestLogBuffer_Query_Limit (0.00s)
=== RUN   TestLogBuffer_Query_CombinedFilters
--- PASS: TestLogBuffer_Query_CombinedFilters (0.00s)
=== RUN   TestLogBuffer_Clear
--- PASS: TestLogBuffer_Clear (0.00s)
=== RUN   TestBufferedHandler_Handle
--- PASS: TestBufferedHandler_Handle (0.00s)
=== RUN   TestBufferedHandler_Enabled
--- PASS: TestBufferedHandler_Enabled (0.00s)
=== RUN   TestBufferedHandler_WithAttrs
--- PASS: TestBufferedHandler_WithAttrs (0.00s)
=== RUN   TestBufferedHandler_WithGroup
--- PASS: TestBufferedHandler_WithGroup (0.00s)
=== RUN   TestInitWithBuffer
{"time":"2025-12-22T22:20:28.44583836-03:00","level":"INFO","msg":"test message","key":"value"}
--- PASS: TestInitWithBuffer (0.00s)
=== RUN   TestGetLogBuffer_NotInitialized
--- PASS: TestGetLogBuffer_NotInitialized (0.00s)
=== RUN   TestParseLevelValue
--- PASS: TestParseLevelValue (0.00s)
=== RUN   TestContains
--- PASS: TestContains (0.00s)
=== RUN   TestToLower
--- PASS: TestToLower (0.00s)
=== RUN   TestLogBuffer_Query_InvalidDates
--- PASS: TestLogBuffer_Query_InvalidDates (0.00s)
=== RUN   TestLogBuffer_Concurrency
--- PASS: TestLogBuffer_Concurrency (0.00s)
=== RUN   TestLogBuffer_SortOrder
--- PASS: TestLogBuffer_SortOrder (0.00s)
=== RUN   TestDefaultConfig
--- PASS: TestDefaultConfig (0.00s)
=== RUN   TestInit_JSONHandler
--- PASS: TestInit_JSONHandler (0.00s)
=== RUN   TestInit_TextHandler
--- PASS: TestInit_TextHandler (0.00s)
=== RUN   TestLogLevels
--- PASS: TestLogLevels (0.00s)
=== RUN   TestWithContext_RequestID
--- PASS: TestWithContext_RequestID (0.00s)
=== RUN   TestWithContext_User
--- PASS: TestWithContext_User (0.00s)
=== RUN   TestWithContext_Operation
--- PASS: TestWithContext_Operation (0.00s)
=== RUN   TestWithContext_Tool
--- PASS: TestWithContext_Tool (0.00s)
=== RUN   TestWithContext_MultipleFields
--- PASS: TestWithContext_MultipleFields (0.00s)
=== RUN   TestWith
--- PASS: TestWith (0.00s)
=== RUN   TestContextLogging
--- PASS: TestContextLogging (0.00s)
=== RUN   TestLevelFiltering
--- PASS: TestLevelFiltering (0.00s)
=== RUN   TestPerformanceMetrics_RecordAndGetDashboard
--- PASS: TestPerformanceMetrics_RecordAndGetDashboard (0.00s)
=== RUN   TestPerformanceMetrics_PeriodFiltering
--- PASS: TestPerformanceMetrics_PeriodFiltering (0.00s)
=== RUN   TestPerformanceMetrics_SaveAndLoad
--- PASS: TestPerformanceMetrics_SaveAndLoad (0.00s)
=== RUN   TestPerformanceMetrics_TimedOperation
--- PASS: TestPerformanceMetrics_TimedOperation (0.01s)
=== RUN   TestPerformanceMetrics_SlowOperationAlerts
--- PASS: TestPerformanceMetrics_SlowOperationAlerts (0.00s)
=== RUN   TestPerformanceMetrics_Percentiles
--- PASS: TestPerformanceMetrics_Percentiles (0.00s)
=== RUN   TestPerformanceMetrics_CircularBuffer
--- PASS: TestPerformanceMetrics_CircularBuffer (0.02s)
PASS
coverage: 92.5% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/logger	(cached)	coverage: 92.5% of statements
=== RUN   TestHandleGetUsageStats
=== RUN   TestHandleGetUsageStats/default_period
{"time":"2025-12-22T22:20:29.329614095-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetUsageStats/custom_period
{"time":"2025-12-22T22:20:29.553457789-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetUsageStats/last_hour_period
{"time":"2025-12-22T22:20:29.761660361-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats (0.68s)
    --- PASS: TestHandleGetUsageStats/default_period (0.25s)
    --- PASS: TestHandleGetUsageStats/custom_period (0.22s)
    --- PASS: TestHandleGetUsageStats/last_hour_period (0.21s)
=== RUN   TestHandleGetUsageStats_OutputStructure
{"time":"2025-12-22T22:20:29.978735631-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_OutputStructure (0.22s)
=== RUN   TestHandleGetUsageStats_MostUsedToolsFormat
{"time":"2025-12-22T22:20:30.20187255-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_MostUsedToolsFormat (0.22s)
=== RUN   TestHandleGetUsageStats_SlowestOperationsFormat
{"time":"2025-12-22T22:20:30.432901643-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_SlowestOperationsFormat (0.23s)
=== RUN   TestHandleGetUsageStats_RecentErrorsFormat
{"time":"2025-12-22T22:20:30.636990377-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_RecentErrorsFormat (0.20s)
=== RUN   TestHandleGetUsageStats_NilResult
{"time":"2025-12-22T22:20:30.83736492-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_NilResult (0.20s)
=== RUN   TestHandleGetUsageStats_EmptyPeriod
{"time":"2025-12-22T22:20:31.056354443-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_EmptyPeriod (0.22s)
=== RUN   TestHandleGetUsageStats_CustomPeriods
=== RUN   TestHandleGetUsageStats_CustomPeriods/last_1h
{"time":"2025-12-22T22:20:31.246142982-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetUsageStats_CustomPeriods/last_24h
{"time":"2025-12-22T22:20:31.475262356-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetUsageStats_CustomPeriods/last_7d
{"time":"2025-12-22T22:20:31.682237736-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetUsageStats_CustomPeriods/last_30d
{"time":"2025-12-22T22:20:31.879663684-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_CustomPeriods (0.82s)
    --- PASS: TestHandleGetUsageStats_CustomPeriods/last_1h (0.19s)
    --- PASS: TestHandleGetUsageStats_CustomPeriods/last_24h (0.23s)
    --- PASS: TestHandleGetUsageStats_CustomPeriods/last_7d (0.21s)
    --- PASS: TestHandleGetUsageStats_CustomPeriods/last_30d (0.20s)
=== RUN   TestHandleGetUsageStats_ConsistentFields
{"time":"2025-12-22T22:20:32.066638112-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_ConsistentFields (0.19s)
=== RUN   TestHandleGetUsageStats_SuccessRate
{"time":"2025-12-22T22:20:32.273155254-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_SuccessRate (0.21s)
=== RUN   TestHandleGetUsageStats_OperationCounts
{"time":"2025-12-22T22:20:32.465280434-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_OperationCounts (0.19s)
=== RUN   TestHandleGetUsageStats_TimeFormat
{"time":"2025-12-22T22:20:32.676105431-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_TimeFormat (0.21s)
=== RUN   TestHandleGetUsageStats_ActiveUsers
{"time":"2025-12-22T22:20:32.880752399-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_ActiveUsers (0.20s)
=== RUN   TestHandleGetUsageStats_SlicesNotNil
{"time":"2025-12-22T22:20:33.083875599-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetUsageStats_SlicesNotNil (0.20s)
=== RUN   TestSaveConversationContext
{"time":"2025-12-22T22:20:33.283966451-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestSaveConversationContext/save_basic_conversation_context
=== RUN   TestSaveConversationContext/save_with_importance_level
=== RUN   TestSaveConversationContext/save_with_related_elements
=== RUN   TestSaveConversationContext/fail_on_empty_context
=== RUN   TestSaveConversationContext/fail_on_too_short_context
=== RUN   TestSaveConversationContext/auto-save_disabled_returns_early
--- PASS: TestSaveConversationContext (0.20s)
    --- PASS: TestSaveConversationContext/save_basic_conversation_context (0.00s)
    --- PASS: TestSaveConversationContext/save_with_importance_level (0.00s)
    --- PASS: TestSaveConversationContext/save_with_related_elements (0.00s)
    --- PASS: TestSaveConversationContext/fail_on_empty_context (0.00s)
    --- PASS: TestSaveConversationContext/fail_on_too_short_context (0.00s)
    --- PASS: TestSaveConversationContext/auto-save_disabled_returns_early (0.00s)
=== RUN   TestSaveConversationContextWithDisabledAutoSave
{"time":"2025-12-22T22:20:33.482035187-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestSaveConversationContextWithDisabledAutoSave (0.19s)
=== RUN   TestExtractKeywords
=== RUN   TestExtractKeywords/extract_from_technical_text
=== RUN   TestExtractKeywords/extract_from_Portuguese_text
=== RUN   TestExtractKeywords/handle_short_text
--- PASS: TestExtractKeywords (0.00s)
    --- PASS: TestExtractKeywords/extract_from_technical_text (0.00s)
    --- PASS: TestExtractKeywords/extract_from_Portuguese_text (0.00s)
    --- PASS: TestExtractKeywords/handle_short_text (0.00s)
=== RUN   TestLanguageDetection
=== RUN   TestLanguageDetection/detect_English
=== RUN   TestLanguageDetection/detect_Portuguese
=== RUN   TestLanguageDetection/detect_Spanish
=== RUN   TestLanguageDetection/detect_French
=== RUN   TestLanguageDetection/detect_German
=== RUN   TestLanguageDetection/detect_Italian
=== RUN   TestLanguageDetection/detect_Russian
=== RUN   TestLanguageDetection/detect_Japanese
=== RUN   TestLanguageDetection/detect_Chinese
=== RUN   TestLanguageDetection/detect_Arabic
=== RUN   TestLanguageDetection/detect_Hindi
=== RUN   TestLanguageDetection/default_to_English_for_empty
=== RUN   TestLanguageDetection/default_to_English_for_numbers_only
--- PASS: TestLanguageDetection (0.00s)
    --- PASS: TestLanguageDetection/detect_English (0.00s)
    --- PASS: TestLanguageDetection/detect_Portuguese (0.00s)
    --- PASS: TestLanguageDetection/detect_Spanish (0.00s)
    --- PASS: TestLanguageDetection/detect_French (0.00s)
    --- PASS: TestLanguageDetection/detect_German (0.00s)
    --- PASS: TestLanguageDetection/detect_Italian (0.00s)
    --- PASS: TestLanguageDetection/detect_Russian (0.00s)
    --- PASS: TestLanguageDetection/detect_Japanese (0.00s)
    --- PASS: TestLanguageDetection/detect_Chinese (0.00s)
    --- PASS: TestLanguageDetection/detect_Arabic (0.00s)
    --- PASS: TestLanguageDetection/detect_Hindi (0.00s)
    --- PASS: TestLanguageDetection/default_to_English_for_empty (0.00s)
    --- PASS: TestLanguageDetection/default_to_English_for_numbers_only (0.00s)
=== RUN   TestMultilingualKeywordExtraction
=== RUN   TestMultilingualKeywordExtraction/English_technical_text
=== RUN   TestMultilingualKeywordExtraction/Portuguese_technical_text
=== RUN   TestMultilingualKeywordExtraction/Spanish_technical_text
=== RUN   TestMultilingualKeywordExtraction/French_technical_text
=== RUN   TestMultilingualKeywordExtraction/German_technical_text
=== RUN   TestMultilingualKeywordExtraction/Italian_technical_text
=== RUN   TestMultilingualKeywordExtraction/Russian_technical_text
=== RUN   TestMultilingualKeywordExtraction/Japanese_technical_text
=== RUN   TestMultilingualKeywordExtraction/Chinese_technical_text
=== RUN   TestMultilingualKeywordExtraction/Arabic_technical_text
=== RUN   TestMultilingualKeywordExtraction/Hindi_technical_text
=== RUN   TestMultilingualKeywordExtraction/Mixed_English-Technical_terms
--- PASS: TestMultilingualKeywordExtraction (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/English_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/Portuguese_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/Spanish_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/French_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/German_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/Italian_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/Russian_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/Japanese_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/Chinese_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/Arabic_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/Hindi_technical_text (0.00s)
    --- PASS: TestMultilingualKeywordExtraction/Mixed_English-Technical_terms (0.00s)
=== RUN   TestGetStopWords
=== RUN   TestGetStopWords/English_stop_words
=== RUN   TestGetStopWords/Portuguese_stop_words
=== RUN   TestGetStopWords/Spanish_stop_words
=== RUN   TestGetStopWords/French_stop_words
=== RUN   TestGetStopWords/German_stop_words
=== RUN   TestGetStopWords/Italian_stop_words
=== RUN   TestGetStopWords/Russian_stop_words
=== RUN   TestGetStopWords/Japanese_stop_words
=== RUN   TestGetStopWords/Chinese_stop_words
=== RUN   TestGetStopWords/Arabic_stop_words
=== RUN   TestGetStopWords/Hindi_stop_words
=== RUN   TestGetStopWords/Unknown_language_defaults_to_English
--- PASS: TestGetStopWords (0.00s)
    --- PASS: TestGetStopWords/English_stop_words (0.00s)
    --- PASS: TestGetStopWords/Portuguese_stop_words (0.00s)
    --- PASS: TestGetStopWords/Spanish_stop_words (0.00s)
    --- PASS: TestGetStopWords/French_stop_words (0.00s)
    --- PASS: TestGetStopWords/German_stop_words (0.00s)
    --- PASS: TestGetStopWords/Italian_stop_words (0.00s)
    --- PASS: TestGetStopWords/Russian_stop_words (0.00s)
    --- PASS: TestGetStopWords/Japanese_stop_words (0.00s)
    --- PASS: TestGetStopWords/Chinese_stop_words (0.00s)
    --- PASS: TestGetStopWords/Arabic_stop_words (0.00s)
    --- PASS: TestGetStopWords/Hindi_stop_words (0.00s)
    --- PASS: TestGetStopWords/Unknown_language_defaults_to_English (0.00s)
=== RUN   TestKeywordExtractionEdgeCases
=== RUN   TestKeywordExtractionEdgeCases/empty_text
=== RUN   TestKeywordExtractionEdgeCases/only_stop_words
=== RUN   TestKeywordExtractionEdgeCases/very_short_words
=== RUN   TestKeywordExtractionEdgeCases/mixed_valid_and_invalid
=== RUN   TestKeywordExtractionEdgeCases/special_characters_only
=== RUN   TestKeywordExtractionEdgeCases/numbers_and_words
--- PASS: TestKeywordExtractionEdgeCases (0.00s)
    --- PASS: TestKeywordExtractionEdgeCases/empty_text (0.00s)
    --- PASS: TestKeywordExtractionEdgeCases/only_stop_words (0.00s)
    --- PASS: TestKeywordExtractionEdgeCases/very_short_words (0.00s)
    --- PASS: TestKeywordExtractionEdgeCases/mixed_valid_and_invalid (0.00s)
    --- PASS: TestKeywordExtractionEdgeCases/special_characters_only (0.00s)
    --- PASS: TestKeywordExtractionEdgeCases/numbers_and_words (0.00s)
=== RUN   TestHandleBackupPortfolio
{"time":"2025-12-22T22:20:33.678356884-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleBackupPortfolio (0.19s)
=== RUN   TestHandleRestorePortfolio
{"time":"2025-12-22T22:20:33.894454308-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleRestorePortfolio (0.22s)
=== RUN   TestHandleActivateElement
{"time":"2025-12-22T22:20:34.08906484-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleActivateElement (0.19s)
=== RUN   TestHandleDeactivateElement
{"time":"2025-12-22T22:20:34.283286667-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleDeactivateElement (0.19s)
=== RUN   TestBackupPortfolio_EmptyPath
{"time":"2025-12-22T22:20:34.489336939-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBackupPortfolio_EmptyPath (0.21s)
=== RUN   TestRestorePortfolio_InvalidPath
{"time":"2025-12-22T22:20:34.676657547-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestRestorePortfolio_InvalidPath (0.19s)
=== RUN   TestActivateElement_EmptyID
{"time":"2025-12-22T22:20:34.873500453-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestActivateElement_EmptyID (0.20s)
=== RUN   TestActivateElement_NonExistentID
{"time":"2025-12-22T22:20:35.079656941-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestActivateElement_NonExistentID (0.21s)
=== RUN   TestDeactivateElement_EmptyID
{"time":"2025-12-22T22:20:35.268831759-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestDeactivateElement_EmptyID (0.19s)
=== RUN   TestBackupPortfolio_CompressionOptions
{"time":"2025-12-22T22:20:35.456149984-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestBackupPortfolio_CompressionOptions/None_compression
=== RUN   TestBackupPortfolio_CompressionOptions/Fast_compression
=== RUN   TestBackupPortfolio_CompressionOptions/Best_compression
=== RUN   TestBackupPortfolio_CompressionOptions/Default_compression
--- PASS: TestBackupPortfolio_CompressionOptions (0.20s)
    --- PASS: TestBackupPortfolio_CompressionOptions/None_compression (0.00s)
    --- PASS: TestBackupPortfolio_CompressionOptions/Fast_compression (0.00s)
    --- PASS: TestBackupPortfolio_CompressionOptions/Best_compression (0.00s)
    --- PASS: TestBackupPortfolio_CompressionOptions/Default_compression (0.00s)
=== RUN   TestRestorePortfolio_DryRun
{"time":"2025-12-22T22:20:35.657328404-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestRestorePortfolio_DryRun (0.20s)
=== RUN   TestHandleBatchCreateElements_EmptyElements
{"time":"2025-12-22T22:20:35.847691988-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleBatchCreateElements_EmptyElements (0.19s)
=== RUN   TestHandleBatchCreateElements_ExceedsMaxBatchSize
{"time":"2025-12-22T22:20:36.033144791-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleBatchCreateElements_ExceedsMaxBatchSize (0.19s)
=== RUN   TestHandleBatchCreateElements_SinglePersona
{"time":"2025-12-22T22:20:36.22024799-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleBatchCreateElements_SinglePersona (0.19s)
=== RUN   TestHandleBatchCreateElements_MultipleElements
{"time":"2025-12-22T22:20:36.422178392-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleBatchCreateElements_MultipleElements (0.20s)
=== RUN   TestHandleBatchCreateElements_PartialFailure
{"time":"2025-12-22T22:20:36.613840533-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleBatchCreateElements_PartialFailure (0.19s)
=== RUN   TestHandleBatchCreateElements_UnsupportedType
{"time":"2025-12-22T22:20:36.809499437-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleBatchCreateElements_UnsupportedType (0.20s)
=== RUN   TestHandleBatchCreateElements_ResultStructure
{"time":"2025-12-22T22:20:36.997474757-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleBatchCreateElements_ResultStructure (0.19s)
=== RUN   TestBatchCreatePersona_WithoutTemplate
    batch_tools_test.go:201: Direct persona creation requires BehavioralTraits and ExpertiseAreas, tested via template creation
--- SKIP: TestBatchCreatePersona_WithoutTemplate (0.00s)
=== RUN   TestBatchCreatePersona_WithTemplate
{"time":"2025-12-22T22:20:37.209246468-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBatchCreatePersona_WithTemplate (0.21s)
=== RUN   TestBatchCreateSkill_WithoutTemplate
    batch_tools_test.go:223: Direct skill creation requires triggers, tested via template creation
--- SKIP: TestBatchCreateSkill_WithoutTemplate (0.00s)
=== RUN   TestBatchCreateSkill_WithTemplate
{"time":"2025-12-22T22:20:37.399410274-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBatchCreateSkill_WithTemplate (0.19s)
=== RUN   TestBatchCreateMemory_Success
{"time":"2025-12-22T22:20:37.588189612-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBatchCreateMemory_Success (0.19s)
=== RUN   TestBatchCreateMemory_MissingContent
{"time":"2025-12-22T22:20:37.773609164-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBatchCreateMemory_MissingContent (0.19s)
=== RUN   TestBatchCreateTemplate_Success
{"time":"2025-12-22T22:20:37.967471817-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBatchCreateTemplate_Success (0.19s)
=== RUN   TestBatchCreateTemplate_MissingContent
{"time":"2025-12-22T22:20:38.168102301-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBatchCreateTemplate_MissingContent (0.20s)
=== RUN   TestBatchCreateAgent_Success
    batch_tools_test.go:312: Agent creation requires actions array, tested via integration
--- SKIP: TestBatchCreateAgent_Success (0.00s)
=== RUN   TestBatchCreateAgent_MissingGoal
{"time":"2025-12-22T22:20:38.401395457-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBatchCreateAgent_MissingGoal (0.23s)
=== RUN   TestBatchCreateEnsemble_Success
    batch_tools_test.go:331: Ensemble creation requires member array, tested via integration
--- SKIP: TestBatchCreateEnsemble_Success (0.00s)
=== RUN   TestBatchCreateEnsemble_DefaultExecutionMode
    batch_tools_test.go:335: Ensemble creation requires member array, tested via integration
--- SKIP: TestBatchCreateEnsemble_DefaultExecutionMode (0.00s)
=== RUN   TestBatchCreateElements_AllTypes
{"time":"2025-12-22T22:20:38.62139291-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBatchCreateElements_AllTypes (0.22s)
=== RUN   TestBatchCreateElements_MCPIntegration
{"time":"2025-12-22T22:20:38.826100353-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestBatchCreateElements_MCPIntegration (0.20s)
=== RUN   TestHandleSubmitElementToCollection_RequiredElementID
{"time":"2025-12-22T22:20:39.013176947-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSubmitElementToCollection_RequiredElementID (0.19s)
=== RUN   TestHandleSubmitElementToCollection_RequiredCollectionRepo
{"time":"2025-12-22T22:20:39.233892891-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSubmitElementToCollection_RequiredCollectionRepo (0.22s)
=== RUN   TestHandleSubmitElementToCollection_InvalidRepoURL
{"time":"2025-12-22T22:20:39.424865018-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSubmitElementToCollection_InvalidRepoURL (0.19s)
=== RUN   TestHandleSubmitElementToCollection_ElementNotFound
{"time":"2025-12-22T22:20:39.612079457-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSubmitElementToCollection_ElementNotFound (0.44s)
=== RUN   TestSanitizeBranchName
=== RUN   TestSanitizeBranchName/simple_name
=== RUN   TestSanitizeBranchName/with_spaces
=== RUN   TestSanitizeBranchName/with_underscores
=== RUN   TestSanitizeBranchName/with_special_chars
=== RUN   TestSanitizeBranchName/mixed_case_with_spaces
=== RUN   TestSanitizeBranchName/leading/trailing_hyphens
=== RUN   TestSanitizeBranchName/multiple_consecutive_hyphens
=== RUN   TestSanitizeBranchName/long_name
=== RUN   TestSanitizeBranchName/numbers_only
=== RUN   TestSanitizeBranchName/empty_after_sanitization
--- PASS: TestSanitizeBranchName (0.00s)
    --- PASS: TestSanitizeBranchName/simple_name (0.00s)
    --- PASS: TestSanitizeBranchName/with_spaces (0.00s)
    --- PASS: TestSanitizeBranchName/with_underscores (0.00s)
    --- PASS: TestSanitizeBranchName/with_special_chars (0.00s)
    --- PASS: TestSanitizeBranchName/mixed_case_with_spaces (0.00s)
    --- PASS: TestSanitizeBranchName/leading/trailing_hyphens (0.00s)
    --- PASS: TestSanitizeBranchName/multiple_consecutive_hyphens (0.00s)
    --- PASS: TestSanitizeBranchName/long_name (0.00s)
    --- PASS: TestSanitizeBranchName/numbers_only (0.00s)
    --- PASS: TestSanitizeBranchName/empty_after_sanitization (0.00s)
=== RUN   TestSanitizeBranchName_Length
--- PASS: TestSanitizeBranchName_Length (0.00s)
=== RUN   TestSanitizeBranchName_LowerCase
--- PASS: TestSanitizeBranchName_LowerCase (0.00s)
=== RUN   TestGeneratePRDescription
    collection_submission_tools_test.go:152: Complex type assertions, tested via integration
--- SKIP: TestGeneratePRDescription (0.00s)
=== RUN   TestGeneratePRDescription_NoCategory
    collection_submission_tools_test.go:156: Complex type assertions, tested via integration
--- SKIP: TestGeneratePRDescription_NoCategory (0.00s)
=== RUN   TestGeneratePRDescription_NoTags
    collection_submission_tools_test.go:160: Complex type assertions, tested via integration
--- SKIP: TestGeneratePRDescription_NoTags (0.00s)
=== RUN   TestSubmitElementToCollectionInput_Validation
=== RUN   TestSubmitElementToCollectionInput_Validation/valid_input
{"time":"2025-12-22T22:20:40.055623169-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestSubmitElementToCollectionInput_Validation/missing_element_id
{"time":"2025-12-22T22:20:40.521494838-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestSubmitElementToCollectionInput_Validation/missing_collection_repo
{"time":"2025-12-22T22:20:40.712895682-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestSubmitElementToCollectionInput_Validation (0.84s)
    --- PASS: TestSubmitElementToCollectionInput_Validation/valid_input (0.45s)
    --- PASS: TestSubmitElementToCollectionInput_Validation/missing_element_id (0.20s)
    --- PASS: TestSubmitElementToCollectionInput_Validation/missing_collection_repo (0.19s)
=== RUN   TestSubmitElementToCollectionInput_DefaultTargetBranch
{"time":"2025-12-22T22:20:40.897373456-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestSubmitElementToCollectionInput_DefaultTargetBranch (0.44s)
=== RUN   TestSubmitElementToCollectionInput_WithOptionalFields
{"time":"2025-12-22T22:20:41.346471447-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestSubmitElementToCollectionInput_WithOptionalFields (0.45s)
=== RUN   TestSubmitElementToCollectionOutput_Structure
--- PASS: TestSubmitElementToCollectionOutput_Structure (0.00s)
=== RUN   TestSanitizeBranchName_PreservesValid
--- PASS: TestSanitizeBranchName_PreservesValid (0.00s)
=== RUN   TestSanitizeBranchName_RemovesInvalid
--- PASS: TestSanitizeBranchName_RemovesInvalid (0.00s)
=== RUN   TestGeneratePRDescription_Structure
    collection_submission_tools_test.go:301: Complex type assertions, tested via integration
--- SKIP: TestGeneratePRDescription_Structure (0.00s)
=== RUN   TestHandleSubmitElementToCollection_NilResult
{"time":"2025-12-22T22:20:41.817034245-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSubmitElementToCollection_NilResult (0.47s)
=== RUN   TestCollectionTools_ToolDefinitions
--- PASS: TestCollectionTools_ToolDefinitions (0.00s)
=== RUN   TestCollectionTools_BrowseCollections
--- PASS: TestCollectionTools_BrowseCollections (0.00s)
=== RUN   TestCollectionTools_InstallCollection
--- PASS: TestCollectionTools_InstallCollection (0.00s)
=== RUN   TestCollectionTools_InstallCollection_MissingURI
--- PASS: TestCollectionTools_InstallCollection_MissingURI (0.00s)
=== RUN   TestCollectionTools_UninstallCollection
--- PASS: TestCollectionTools_UninstallCollection (0.04s)
=== RUN   TestCollectionTools_ListInstalled
--- PASS: TestCollectionTools_ListInstalled (0.00s)
=== RUN   TestCollectionTools_GetCollectionInfo_Installed
--- PASS: TestCollectionTools_GetCollectionInfo_Installed (0.00s)
=== RUN   TestCollectionTools_GetCollectionInfo_Registry
--- PASS: TestCollectionTools_GetCollectionInfo_Registry (0.00s)
=== RUN   TestCollectionTools_ExportCollection
--- PASS: TestCollectionTools_ExportCollection (0.01s)
=== RUN   TestCollectionTools_HandleTool_UnknownTool
--- PASS: TestCollectionTools_HandleTool_UnknownTool (0.00s)
=== RUN   TestCollectionTools_ParseManifestFromMap
--- PASS: TestCollectionTools_ParseManifestFromMap (0.00s)
=== RUN   TestCollectionTools_ToolDefinitions_Schema
--- PASS: TestCollectionTools_ToolDefinitions_Schema (0.00s)
=== RUN   TestParseManifestFromMap
=== RUN   TestParseManifestFromMap/valid_manifest
=== RUN   TestParseManifestFromMap/with_elements
--- PASS: TestParseManifestFromMap (0.00s)
    --- PASS: TestParseManifestFromMap/valid_manifest (0.00s)
    --- PASS: TestParseManifestFromMap/with_elements (0.00s)
=== RUN   TestToolDef_JSONMarshaling
--- PASS: TestToolDef_JSONMarshaling (0.00s)
=== RUN   TestHandleExpandMemoryContext_Success
--- PASS: TestHandleExpandMemoryContext_Success (0.00s)
=== RUN   TestHandleExpandMemoryContext_MissingMemoryID
--- PASS: TestHandleExpandMemoryContext_MissingMemoryID (0.00s)
=== RUN   TestHandleExpandMemoryContext_MemoryNotFound
--- PASS: TestHandleExpandMemoryContext_MemoryNotFound (0.00s)
=== RUN   TestHandleExpandMemoryContext_NotAMemory
--- PASS: TestHandleExpandMemoryContext_NotAMemory (0.00s)
=== RUN   TestHandleExpandMemoryContext_WithIncludeTypes
--- PASS: TestHandleExpandMemoryContext_WithIncludeTypes (0.00s)
=== RUN   TestHandleExpandMemoryContext_WithExcludeTypes
--- PASS: TestHandleExpandMemoryContext_WithExcludeTypes (0.00s)
=== RUN   TestHandleExpandMemoryContext_InvalidElementType
--- PASS: TestHandleExpandMemoryContext_InvalidElementType (0.00s)
=== RUN   TestHandleExpandMemoryContext_WithMaxElements
--- PASS: TestHandleExpandMemoryContext_WithMaxElements (0.00s)
=== RUN   TestHandleExpandMemoryContext_WithIgnoreErrors
--- PASS: TestHandleExpandMemoryContext_WithIgnoreErrors (0.00s)
=== RUN   TestIsValidElementType
=== RUN   TestIsValidElementType/persona
=== RUN   TestIsValidElementType/skill
=== RUN   TestIsValidElementType/template
=== RUN   TestIsValidElementType/agent
=== RUN   TestIsValidElementType/memory
=== RUN   TestIsValidElementType/ensemble
=== RUN   TestIsValidElementType/invalid
=== RUN   TestIsValidElementType/empty
--- PASS: TestIsValidElementType (0.00s)
    --- PASS: TestIsValidElementType/persona (0.00s)
    --- PASS: TestIsValidElementType/skill (0.00s)
    --- PASS: TestIsValidElementType/template (0.00s)
    --- PASS: TestIsValidElementType/agent (0.00s)
    --- PASS: TestIsValidElementType/memory (0.00s)
    --- PASS: TestIsValidElementType/ensemble (0.00s)
    --- PASS: TestIsValidElementType/invalid (0.00s)
    --- PASS: TestIsValidElementType/empty (0.00s)
=== RUN   TestConvertMemoryToMap
--- PASS: TestConvertMemoryToMap (0.00s)
=== RUN   TestConvertElementsToMaps
--- PASS: TestConvertElementsToMaps (0.00s)
=== RUN   TestConvertRelationshipMapToStrings
--- PASS: TestConvertRelationshipMapToStrings (0.00s)
=== RUN   TestExpandMemoryContextOutput_JSONSerialization
--- PASS: TestExpandMemoryContextOutput_JSONSerialization (0.00s)
=== RUN   TestGetUserContext
=== RUN   TestGetUserContext/empty_username_returns_anonymous
=== RUN   TestGetUserContext/whitespace_username_returns_anonymous
=== RUN   TestGetUserContext/valid_username_alice
=== RUN   TestGetUserContext/valid_username_bob
=== RUN   TestGetUserContext/username_with_whitespace_is_trimmed
--- PASS: TestGetUserContext (0.00s)
    --- PASS: TestGetUserContext/empty_username_returns_anonymous (0.00s)
    --- PASS: TestGetUserContext/whitespace_username_returns_anonymous (0.00s)
    --- PASS: TestGetUserContext/valid_username_alice (0.00s)
    --- PASS: TestGetUserContext/valid_username_bob (0.00s)
    --- PASS: TestGetUserContext/username_with_whitespace_is_trimmed (0.00s)
=== RUN   TestGetUserContextFromAuthor
=== RUN   TestGetUserContextFromAuthor/empty_author_returns_anonymous
=== RUN   TestGetUserContextFromAuthor/valid_author
=== RUN   TestGetUserContextFromAuthor/author_with_whitespace_is_trimmed
--- PASS: TestGetUserContextFromAuthor (0.00s)
    --- PASS: TestGetUserContextFromAuthor/empty_author_returns_anonymous (0.00s)
    --- PASS: TestGetUserContextFromAuthor/valid_author (0.00s)
    --- PASS: TestGetUserContextFromAuthor/author_with_whitespace_is_trimmed (0.00s)
=== RUN   TestHandleSearchCollections_DefaultValues
{"time":"2025-12-22T22:20:42.330255486-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSearchCollections_DefaultValues (0.20s)
=== RUN   TestHandleSearchCollections_WithFilters
{"time":"2025-12-22T22:20:42.518088491-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSearchCollections_WithFilters (0.19s)
=== RUN   TestHandleSearchCollections_RichFormat
{"time":"2025-12-22T22:20:42.719539771-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSearchCollections_RichFormat (0.20s)
=== RUN   TestHandleSearchCollections_Timing
{"time":"2025-12-22T22:20:42.912239488-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSearchCollections_Timing (0.19s)
=== RUN   TestSortCollections_ByStarsAscending
--- PASS: TestSortCollections_ByStarsAscending (0.00s)
=== RUN   TestSortCollections_ByStarsDescending
--- PASS: TestSortCollections_ByStarsDescending (0.00s)
=== RUN   TestSortCollections_ByDownloads
--- PASS: TestSortCollections_ByDownloads (0.00s)
=== RUN   TestSortCollections_ByName
--- PASS: TestSortCollections_ByName (0.00s)
=== RUN   TestSortCollections_ByRelevance
--- PASS: TestSortCollections_ByRelevance (0.00s)
=== RUN   TestSortCollections_DefaultSortBy
--- PASS: TestSortCollections_DefaultSortBy (0.00s)
=== RUN   TestCollectionMetadataToResult_BasicConversion
--- PASS: TestCollectionMetadataToResult_BasicConversion (0.00s)
=== RUN   TestCollectionMetadataToResult_WithRichFormat
--- PASS: TestCollectionMetadataToResult_WithRichFormat (0.00s)
=== RUN   TestFormatCollectionRich_Complete
--- PASS: TestFormatCollectionRich_Complete (0.00s)
=== RUN   TestFormatCollectionRich_Minimal
--- PASS: TestFormatCollectionRich_Minimal (0.00s)
=== RUN   TestGetCategoryEmoji_KnownCategories
=== RUN   TestGetCategoryEmoji_KnownCategories/devops
=== RUN   TestGetCategoryEmoji_KnownCategories/creative-writing
=== RUN   TestGetCategoryEmoji_KnownCategories/data-science
=== RUN   TestGetCategoryEmoji_KnownCategories/web-development
=== RUN   TestGetCategoryEmoji_KnownCategories/mobile
=== RUN   TestGetCategoryEmoji_KnownCategories/ai-ml
=== RUN   TestGetCategoryEmoji_KnownCategories/security
=== RUN   TestGetCategoryEmoji_KnownCategories/testing
=== RUN   TestGetCategoryEmoji_KnownCategories/productivity
=== RUN   TestGetCategoryEmoji_KnownCategories/education
--- PASS: TestGetCategoryEmoji_KnownCategories (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/devops (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/creative-writing (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/data-science (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/web-development (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/mobile (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/ai-ml (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/security (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/testing (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/productivity (0.00s)
    --- PASS: TestGetCategoryEmoji_KnownCategories/education (0.00s)
=== RUN   TestGetCategoryEmoji_UnknownCategory
--- PASS: TestGetCategoryEmoji_UnknownCategory (0.00s)
=== RUN   TestGetCategoryEmoji_CaseInsensitive
--- PASS: TestGetCategoryEmoji_CaseInsensitive (0.00s)
=== RUN   TestFormatNumber_SmallNumbers
=== RUN   TestFormatNumber_SmallNumbers/0
=== RUN   TestFormatNumber_SmallNumbers/42
=== RUN   TestFormatNumber_SmallNumbers/100
=== RUN   TestFormatNumber_SmallNumbers/999
--- PASS: TestFormatNumber_SmallNumbers (0.00s)
    --- PASS: TestFormatNumber_SmallNumbers/0 (0.00s)
    --- PASS: TestFormatNumber_SmallNumbers/42 (0.00s)
    --- PASS: TestFormatNumber_SmallNumbers/100 (0.00s)
    --- PASS: TestFormatNumber_SmallNumbers/999 (0.00s)
=== RUN   TestFormatNumber_Thousands
=== RUN   TestFormatNumber_Thousands/1.0K
=== RUN   TestFormatNumber_Thousands/1.5K
=== RUN   TestFormatNumber_Thousands/10.0K
=== RUN   TestFormatNumber_Thousands/1000.0K
--- PASS: TestFormatNumber_Thousands (0.00s)
    --- PASS: TestFormatNumber_Thousands/1.0K (0.00s)
    --- PASS: TestFormatNumber_Thousands/1.5K (0.00s)
    --- PASS: TestFormatNumber_Thousands/10.0K (0.00s)
    --- PASS: TestFormatNumber_Thousands/1000.0K (0.00s)
=== RUN   TestFormatNumber_Millions
=== RUN   TestFormatNumber_Millions/1.0M
=== RUN   TestFormatNumber_Millions/1.5M
=== RUN   TestFormatNumber_Millions/10.0M
--- PASS: TestFormatNumber_Millions (0.00s)
    --- PASS: TestFormatNumber_Millions/1.0M (0.00s)
    --- PASS: TestFormatNumber_Millions/1.5M (0.00s)
    --- PASS: TestFormatNumber_Millions/10.0M (0.00s)
=== RUN   TestFormatNumber_Billions
=== RUN   TestFormatNumber_Billions/1.0B
=== RUN   TestFormatNumber_Billions/5.5B
--- PASS: TestFormatNumber_Billions (0.00s)
    --- PASS: TestFormatNumber_Billions/1.0B (0.00s)
    --- PASS: TestFormatNumber_Billions/5.5B (0.00s)
=== RUN   TestHandleListCollections_DefaultLimit
{"time":"2025-12-22T22:20:43.118246449-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListCollections_DefaultLimit (0.20s)
=== RUN   TestHandleListCollections_WithFilters
{"time":"2025-12-22T22:20:43.31022835-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListCollections_WithFilters (0.19s)
=== RUN   TestHandleListCollections_WithGroupBy
{"time":"2025-12-22T22:20:43.498368039-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleListCollections_WithGroupBy/Group_by_category
=== RUN   TestHandleListCollections_WithGroupBy/Group_by_author
=== RUN   TestHandleListCollections_WithGroupBy/Group_by_source
--- PASS: TestHandleListCollections_WithGroupBy (0.19s)
    --- PASS: TestHandleListCollections_WithGroupBy/Group_by_category (0.00s)
    --- PASS: TestHandleListCollections_WithGroupBy/Group_by_author (0.00s)
    --- PASS: TestHandleListCollections_WithGroupBy/Group_by_source (0.00s)
=== RUN   TestHandleListCollections_WithoutGroupBy
{"time":"2025-12-22T22:20:43.686459794-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListCollections_WithoutGroupBy (0.19s)
=== RUN   TestHandleListCollections_Summary
{"time":"2025-12-22T22:20:43.872519078-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListCollections_Summary (0.19s)
=== RUN   TestHandleListCollections_RichFormat
{"time":"2025-12-22T22:20:44.059292159-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListCollections_RichFormat (0.19s)
=== RUN   TestSearchCollections_EmptyQuery
{"time":"2025-12-22T22:20:44.247349642-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestSearchCollections_EmptyQuery (0.19s)
=== RUN   TestSearchCollections_LargeLimit
{"time":"2025-12-22T22:20:44.439239859-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestSearchCollections_LargeLimit (0.19s)
=== RUN   TestCollectionResult_ElementStats
--- PASS: TestCollectionResult_ElementStats (0.00s)
=== RUN   TestHandleValidateElement
=== RUN   TestHandleValidateElement/Valid_persona_-_comprehensive_level
=== RUN   TestHandleValidateElement/Valid_persona_-_basic_level
=== RUN   TestHandleValidateElement/Invalid_element_ID
=== RUN   TestHandleValidateElement/Missing_element_ID
=== RUN   TestHandleValidateElement/Invalid_element_type
=== RUN   TestHandleValidateElement/Invalid_validation_level
=== RUN   TestHandleValidateElement/Type_mismatch
--- PASS: TestHandleValidateElement (0.00s)
    --- PASS: TestHandleValidateElement/Valid_persona_-_comprehensive_level (0.00s)
    --- PASS: TestHandleValidateElement/Valid_persona_-_basic_level (0.00s)
    --- PASS: TestHandleValidateElement/Invalid_element_ID (0.00s)
    --- PASS: TestHandleValidateElement/Missing_element_ID (0.00s)
    --- PASS: TestHandleValidateElement/Invalid_element_type (0.00s)
    --- PASS: TestHandleValidateElement/Invalid_validation_level (0.00s)
    --- PASS: TestHandleValidateElement/Type_mismatch (0.00s)
=== RUN   TestHandleValidateElement_StrictLevel
--- PASS: TestHandleValidateElement_StrictLevel (0.00s)
=== RUN   TestHandleExecuteEnsemble_RequiredEnsembleID
{"time":"2025-12-22T22:20:44.631124853-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleExecuteEnsemble_RequiredEnsembleID (0.19s)
=== RUN   TestHandleExecuteEnsemble_DefaultTimeout
{"time":"2025-12-22T22:20:44.817959214-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleExecuteEnsemble_DefaultTimeout (0.19s)
=== RUN   TestHandleExecuteEnsemble_DefaultMaxRetries
{"time":"2025-12-22T22:20:45.008244875-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleExecuteEnsemble_DefaultMaxRetries (0.19s)
=== RUN   TestHandleExecuteEnsemble_DefaultInput
{"time":"2025-12-22T22:20:45.197195038-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleExecuteEnsemble_DefaultInput (0.19s)
=== RUN   TestHandleExecuteEnsemble_CustomTimeout
{"time":"2025-12-22T22:20:45.388103949-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleExecuteEnsemble_CustomTimeout (0.19s)
=== RUN   TestHandleExecuteEnsemble_FailFast
{"time":"2025-12-22T22:20:45.576268587-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleExecuteEnsemble_FailFast (0.19s)
=== RUN   TestHandleExecuteEnsemble_EnableMonitoring
{"time":"2025-12-22T22:20:45.762398335-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleExecuteEnsemble_EnableMonitoring (0.19s)
=== RUN   TestHandleGetEnsembleStatus_RequiredEnsembleID
{"time":"2025-12-22T22:20:45.955110054-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetEnsembleStatus_RequiredEnsembleID (0.19s)
=== RUN   TestHandleGetEnsembleStatus_EnsembleNotFound
{"time":"2025-12-22T22:20:46.182120416-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetEnsembleStatus_EnsembleNotFound (0.23s)
=== RUN   TestHandleGetEnsembleStatus_ValidEnsemble
{"time":"2025-12-22T22:20:46.416170886-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetEnsembleStatus_ValidEnsemble (0.23s)
=== RUN   TestHandleGetEnsembleStatus_WrongElementType
{"time":"2025-12-22T22:20:46.651118772-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetEnsembleStatus_WrongElementType (0.23s)
=== RUN   TestGenerateEnsembleSummary_Success
{"time":"2025-12-22T22:20:46.857937062-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestGenerateEnsembleSummary_Success (0.21s)
=== RUN   TestGenerateEnsembleSummary_PartialSuccess
{"time":"2025-12-22T22:20:47.049873351-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestGenerateEnsembleSummary_PartialSuccess (0.19s)
=== RUN   TestGenerateEnsembleSummary_Failed
{"time":"2025-12-22T22:20:47.239659394-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestGenerateEnsembleSummary_Failed (0.19s)
=== RUN   TestCountSuccessfulAgents
=== RUN   TestCountSuccessfulAgents/all_successful
=== RUN   TestCountSuccessfulAgents/partial_success
=== RUN   TestCountSuccessfulAgents/all_failed
=== RUN   TestCountSuccessfulAgents/empty
--- PASS: TestCountSuccessfulAgents (0.00s)
    --- PASS: TestCountSuccessfulAgents/all_successful (0.00s)
    --- PASS: TestCountSuccessfulAgents/partial_success (0.00s)
    --- PASS: TestCountSuccessfulAgents/all_failed (0.00s)
    --- PASS: TestCountSuccessfulAgents/empty (0.00s)
=== RUN   TestHandleGetEnsembleStatus_NilResult
{"time":"2025-12-22T22:20:47.463970581-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetEnsembleStatus_NilResult (0.22s)
=== RUN   TestHandleGetEnsembleStatus_EmptyMembers
{"time":"2025-12-22T22:20:47.682445253-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetEnsembleStatus_EmptyMembers (0.22s)
=== RUN   TestExecuteEnsembleInput_Validation
=== RUN   TestExecuteEnsembleInput_Validation/valid_with_all_fields
{"time":"2025-12-22T22:20:47.896300361-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestExecuteEnsembleInput_Validation/missing_ensemble_id
{"time":"2025-12-22T22:20:48.093216325-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestExecuteEnsembleInput_Validation (0.41s)
    --- PASS: TestExecuteEnsembleInput_Validation/valid_with_all_fields (0.21s)
    --- PASS: TestExecuteEnsembleInput_Validation/missing_ensemble_id (0.20s)
=== RUN   TestExecuteEnsembleOutput_Structure
--- PASS: TestExecuteEnsembleOutput_Structure (0.00s)
=== RUN   TestGetEnsembleStatusOutput_Structure
--- PASS: TestGetEnsembleStatusOutput_Structure (0.00s)
=== RUN   TestHandleCheckGitHubAuth_NotConfigured
{"time":"2025-12-22T22:20:48.093576716-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:20:48.287636131-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:20:48.54161692-03:00","level":"INFO","msg":"No GitHub token found","error":"token file not found: user needs to authenticate"}
--- PASS: TestHandleCheckGitHubAuth_NotConfigured (0.45s)
=== RUN   TestHandleCheckGitHubAuth_NoToken
{"time":"2025-12-22T22:20:48.541805828-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:20:48.73195918-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:20:48.993126277-03:00","level":"INFO","msg":"No GitHub token found","error":"token file not found: user needs to authenticate"}
--- PASS: TestHandleCheckGitHubAuth_NoToken (0.45s)
=== RUN   TestHandleRefreshGitHubToken_NoToken
{"time":"2025-12-22T22:20:48.993260976-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:20:49.179848697-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleRefreshGitHubToken_NoToken (0.45s)
=== RUN   TestHandleInitGitHubAuth
{"time":"2025-12-22T22:20:49.445400911-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:20:49.633224166-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:20:50.194105966-03:00","level":"ERROR","msg":"Failed to initiate GitHub device flow","error":"failed to initiate device flow: oauth2: \"Not Found\""}
    github_auth_tools_test.go:79: Expected behavior - GitHub device flow not accessible: failed to initiate device flow: failed to initiate device flow: oauth2: "Not Found"
--- PASS: TestHandleInitGitHubAuth (0.75s)
=== RUN   TestGetGitHubOAuthClient
{"time":"2025-12-22T22:20:50.194626712-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:20:50.38815718-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestGetGitHubOAuthClient (0.45s)
=== RUN   TestHandleRefreshGitHubToken_WithForce
{"time":"2025-12-22T22:20:50.645731719-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:20:50.847330198-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleRefreshGitHubToken_WithForce (0.46s)
=== RUN   TestDeviceCodeStorage
{"time":"2025-12-22T22:20:51.106588454-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:20:51.293064914-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestDeviceCodeStorage (0.19s)
=== RUN   TestHandleSearchPortfolioGitHub_RequiredQuery
{"time":"2025-12-22T22:20:51.493113307-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSearchPortfolioGitHub_RequiredQuery (0.20s)
=== RUN   TestHandleSearchPortfolioGitHub_ValidQuery
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_ValidQuery (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_DefaultElementType
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_DefaultElementType (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_DefaultSortBy
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_DefaultSortBy (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_LimitDefaults
=== RUN   TestHandleSearchPortfolioGitHub_LimitDefaults/zero_limit
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_LimitDefaults/negative_limit
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_LimitDefaults/default_applied
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- PASS: TestHandleSearchPortfolioGitHub_LimitDefaults (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_LimitDefaults/zero_limit (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_LimitDefaults/negative_limit (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_LimitDefaults/default_applied (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_LimitMaxCap
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_LimitMaxCap (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_InvalidElementType
{"time":"2025-12-22T22:20:51.688769705-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSearchPortfolioGitHub_InvalidElementType (0.19s)
=== RUN   TestHandleSearchPortfolioGitHub_ValidElementTypes
=== RUN   TestHandleSearchPortfolioGitHub_ValidElementTypes/all
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_ValidElementTypes/persona
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_ValidElementTypes/skill
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_ValidElementTypes/template
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_ValidElementTypes/agent
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_ValidElementTypes/memory
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_ValidElementTypes/ensemble
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- PASS: TestHandleSearchPortfolioGitHub_ValidElementTypes (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidElementTypes/all (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidElementTypes/persona (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidElementTypes/skill (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidElementTypes/template (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidElementTypes/agent (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidElementTypes/memory (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidElementTypes/ensemble (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_InvalidSortBy
{"time":"2025-12-22T22:20:51.881813247-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSearchPortfolioGitHub_InvalidSortBy (0.19s)
=== RUN   TestHandleSearchPortfolioGitHub_ValidSortByOptions
=== RUN   TestHandleSearchPortfolioGitHub_ValidSortByOptions/stars
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_ValidSortByOptions/updated
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_ValidSortByOptions/created
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
=== RUN   TestHandleSearchPortfolioGitHub_ValidSortByOptions/relevance
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- PASS: TestHandleSearchPortfolioGitHub_ValidSortByOptions (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidSortByOptions/stars (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidSortByOptions/updated (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidSortByOptions/created (0.00s)
    --- SKIP: TestHandleSearchPortfolioGitHub_ValidSortByOptions/relevance (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_WithTags
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_WithTags (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_WithAuthor
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_WithAuthor (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_IncludeArchived
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_IncludeArchived (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_OutputStructure
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_OutputStructure (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_SearchTime
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_SearchTime (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_NilResult
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_NilResult (0.00s)
=== RUN   TestHandleSearchPortfolioGitHub_CompleteInput
    github_portfolio_tools_test.go:23: Skipping test: GitHub OAuth token not configured. Set GITHUB_TOKEN env var or authenticate with GitHub.
--- SKIP: TestHandleSearchPortfolioGitHub_CompleteInput (0.00s)
=== RUN   TestGitHubAuthStartOutput_Structure
--- PASS: TestGitHubAuthStartOutput_Structure (0.00s)
=== RUN   TestGitHubAuthStatusOutput_Structure
--- PASS: TestGitHubAuthStatusOutput_Structure (0.00s)
=== RUN   TestGitHubAuthStatusOutput_PendingStatus
--- PASS: TestGitHubAuthStatusOutput_PendingStatus (0.00s)
=== RUN   TestRepositoryInfo_Structure
--- PASS: TestRepositoryInfo_Structure (0.00s)
=== RUN   TestGitHubListReposOutput_Structure
--- PASS: TestGitHubListReposOutput_Structure (0.00s)
=== RUN   TestGitHubSyncPushInput_Structure
--- PASS: TestGitHubSyncPushInput_Structure (0.00s)
=== RUN   TestGitHubSyncPushOutput_Structure
--- PASS: TestGitHubSyncPushOutput_Structure (0.00s)
=== RUN   TestGitHubSyncPullInput_Structure
--- PASS: TestGitHubSyncPullInput_Structure (0.00s)
=== RUN   TestGitHubSyncPullOutput_Structure
--- PASS: TestGitHubSyncPullOutput_Structure (0.00s)
=== RUN   TestAuthState_Structure
--- PASS: TestAuthState_Structure (0.00s)
=== RUN   TestAuthState_ExpirationCheck
--- PASS: TestAuthState_ExpirationCheck (0.00s)
=== RUN   TestGitHubSyncInput_DefaultBranch
--- PASS: TestGitHubSyncInput_DefaultBranch (0.00s)
=== RUN   TestGitHubSyncInput_DefaultConflictResolution
--- PASS: TestGitHubSyncInput_DefaultConflictResolution (0.00s)
=== RUN   TestHandleSearchCapabilityIndex
{"time":"2025-12-22T22:20:52.071977614-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleSearchCapabilityIndex/Valid_search_query
=== RUN   TestHandleSearchCapabilityIndex/Empty_query
=== RUN   TestHandleSearchCapabilityIndex/Query_with_type_filter
=== RUN   TestHandleSearchCapabilityIndex/Large_max_results_gets_capped
=== RUN   TestHandleSearchCapabilityIndex/Zero_max_results_uses_default
--- PASS: TestHandleSearchCapabilityIndex (0.19s)
    --- PASS: TestHandleSearchCapabilityIndex/Valid_search_query (0.00s)
    --- PASS: TestHandleSearchCapabilityIndex/Empty_query (0.00s)
    --- PASS: TestHandleSearchCapabilityIndex/Query_with_type_filter (0.00s)
    --- PASS: TestHandleSearchCapabilityIndex/Large_max_results_gets_capped (0.00s)
    --- PASS: TestHandleSearchCapabilityIndex/Zero_max_results_uses_default (0.00s)
=== RUN   TestHandleFindSimilarCapabilities
{"time":"2025-12-22T22:20:52.262826683-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleFindSimilarCapabilities/Valid_element_ID
=== RUN   TestHandleFindSimilarCapabilities/Empty_element_ID
=== RUN   TestHandleFindSimilarCapabilities/Non-existent_element
=== RUN   TestHandleFindSimilarCapabilities/Zero_max_results_uses_default
=== RUN   TestHandleFindSimilarCapabilities/Large_max_results_gets_capped
--- PASS: TestHandleFindSimilarCapabilities (0.19s)
    --- PASS: TestHandleFindSimilarCapabilities/Valid_element_ID (0.00s)
    --- PASS: TestHandleFindSimilarCapabilities/Empty_element_ID (0.00s)
    --- PASS: TestHandleFindSimilarCapabilities/Non-existent_element (0.00s)
    --- PASS: TestHandleFindSimilarCapabilities/Zero_max_results_uses_default (0.00s)
    --- PASS: TestHandleFindSimilarCapabilities/Large_max_results_gets_capped (0.00s)
=== RUN   TestHandleMapCapabilityRelationships
{"time":"2025-12-22T22:20:52.456778922-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleMapCapabilityRelationships/Valid_element_with_default_threshold
=== RUN   TestHandleMapCapabilityRelationships/Valid_element_with_custom_threshold
=== RUN   TestHandleMapCapabilityRelationships/Empty_element_ID
=== RUN   TestHandleMapCapabilityRelationships/Non-existent_element
=== RUN   TestHandleMapCapabilityRelationships/Zero_threshold_uses_default
--- PASS: TestHandleMapCapabilityRelationships (0.19s)
    --- PASS: TestHandleMapCapabilityRelationships/Valid_element_with_default_threshold (0.00s)
    --- PASS: TestHandleMapCapabilityRelationships/Valid_element_with_custom_threshold (0.00s)
    --- PASS: TestHandleMapCapabilityRelationships/Empty_element_ID (0.00s)
    --- PASS: TestHandleMapCapabilityRelationships/Non-existent_element (0.00s)
    --- PASS: TestHandleMapCapabilityRelationships/Zero_threshold_uses_default (0.00s)
=== RUN   TestHandleGetCapabilityIndexStats
{"time":"2025-12-22T22:20:52.643716097-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetCapabilityIndexStats (0.19s)
=== RUN   TestSearchCapabilityIndexInputValidation
{"time":"2025-12-22T22:20:52.826915412-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestSearchCapabilityIndexInputValidation/Whitespace-only_query
=== RUN   TestSearchCapabilityIndexInputValidation/Negative_max_results
=== RUN   TestSearchCapabilityIndexInputValidation/Valid_types_array
--- PASS: TestSearchCapabilityIndexInputValidation (0.18s)
    --- PASS: TestSearchCapabilityIndexInputValidation/Whitespace-only_query (0.00s)
    --- PASS: TestSearchCapabilityIndexInputValidation/Negative_max_results (0.00s)
    --- PASS: TestSearchCapabilityIndexInputValidation/Valid_types_array (0.00s)
=== RUN   TestFindSimilarCapabilitiesEdgeCases
{"time":"2025-12-22T22:20:53.02141159-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestFindSimilarCapabilitiesEdgeCases/Max_results_boundary
=== RUN   TestFindSimilarCapabilitiesEdgeCases/Whitespace_element_ID
--- PASS: TestFindSimilarCapabilitiesEdgeCases (0.19s)
    --- PASS: TestFindSimilarCapabilitiesEdgeCases/Max_results_boundary (0.00s)
    --- PASS: TestFindSimilarCapabilitiesEdgeCases/Whitespace_element_ID (0.00s)
=== RUN   TestMapCapabilityRelationshipsThresholds
{"time":"2025-12-22T22:20:53.206164824-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestMapCapabilityRelationshipsThresholds/Low_threshold
=== RUN   TestMapCapabilityRelationshipsThresholds/Medium_threshold
=== RUN   TestMapCapabilityRelationshipsThresholds/High_threshold
=== RUN   TestMapCapabilityRelationshipsThresholds/Zero_uses_default
=== RUN   TestMapCapabilityRelationshipsThresholds/Negative_uses_default
--- PASS: TestMapCapabilityRelationshipsThresholds (0.19s)
    --- PASS: TestMapCapabilityRelationshipsThresholds/Low_threshold (0.00s)
    --- PASS: TestMapCapabilityRelationshipsThresholds/Medium_threshold (0.00s)
    --- PASS: TestMapCapabilityRelationshipsThresholds/High_threshold (0.00s)
    --- PASS: TestMapCapabilityRelationshipsThresholds/Zero_uses_default (0.00s)
    --- PASS: TestMapCapabilityRelationshipsThresholds/Negative_uses_default (0.00s)
=== RUN   TestOutputStructures
=== RUN   TestOutputStructures/SearchCapabilityIndexOutput
=== RUN   TestOutputStructures/FindSimilarCapabilitiesOutput
=== RUN   TestOutputStructures/MapCapabilityRelationshipsOutput
=== RUN   TestOutputStructures/GetCapabilityIndexStatsOutput
--- PASS: TestOutputStructures (0.00s)
    --- PASS: TestOutputStructures/SearchCapabilityIndexOutput (0.00s)
    --- PASS: TestOutputStructures/FindSimilarCapabilitiesOutput (0.00s)
    --- PASS: TestOutputStructures/MapCapabilityRelationshipsOutput (0.00s)
    --- PASS: TestOutputStructures/GetCapabilityIndexStatsOutput (0.00s)
=== RUN   TestHandleListLogs
{"time":"2025-12-22T22:20:53.395008667-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:20:53.395064223-03:00","level":"INFO","msg":"Test info message","user":"alice","operation":"test_op"}
{"time":"2025-12-22T22:20:53.395084868-03:00","level":"WARN","msg":"Test warning message","user":"bob"}
{"time":"2025-12-22T22:20:53.395102489-03:00","level":"ERROR","msg":"Test error message","tool":"test_tool"}
--- PASS: TestHandleListLogs (0.20s)
=== RUN   TestHandleListLogs_LevelFilter
{"time":"2025-12-22T22:20:53.600468951-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:20:53.600524794-03:00","level":"INFO","msg":"Info message"}
{"time":"2025-12-22T22:20:53.600539844-03:00","level":"WARN","msg":"Warning message"}
{"time":"2025-12-22T22:20:53.60055255-03:00","level":"ERROR","msg":"Error message"}
--- PASS: TestHandleListLogs_LevelFilter (0.21s)
=== RUN   TestHandleListLogs_KeywordFilter
{"time":"2025-12-22T22:20:53.800867795-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:20:53.800914677-03:00","level":"INFO","msg":"Creating persona element"}
{"time":"2025-12-22T22:20:53.800931017-03:00","level":"INFO","msg":"Updating memory element"}
--- PASS: TestHandleListLogs_KeywordFilter (0.20s)
=== RUN   TestHandleListLogs_UserFilter
{"time":"2025-12-22T22:20:54.001816957-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:20:54.001866625-03:00","level":"INFO","msg":"Alice action","user":"alice"}
{"time":"2025-12-22T22:20:54.001885802-03:00","level":"INFO","msg":"Bob action","user":"bob"}
--- PASS: TestHandleListLogs_UserFilter (0.20s)
=== RUN   TestHandleListLogs_InvalidDateFormat
{"time":"2025-12-22T22:20:54.225985905-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListLogs_InvalidDateFormat (0.21s)
=== RUN   TestHandleListLogs_Limit
{"time":"2025-12-22T22:20:54.416516861-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:20:54.416575722-03:00","level":"INFO","msg":"Test log"}
{"time":"2025-12-22T22:20:54.416596771-03:00","level":"INFO","msg":"Test log"}
{"time":"2025-12-22T22:20:54.41661683-03:00","level":"INFO","msg":"Test log"}
{"time":"2025-12-22T22:20:54.416632403-03:00","level":"INFO","msg":"Test log"}
{"time":"2025-12-22T22:20:54.416647937-03:00","level":"INFO","msg":"Test log"}
{"time":"2025-12-22T22:20:54.41666527-03:00","level":"INFO","msg":"Test log"}
{"time":"2025-12-22T22:20:54.41668319-03:00","level":"INFO","msg":"Test log"}
{"time":"2025-12-22T22:20:54.416703441-03:00","level":"INFO","msg":"Test log"}
{"time":"2025-12-22T22:20:54.4167184-03:00","level":"INFO","msg":"Test log"}
{"time":"2025-12-22T22:20:54.416730705-03:00","level":"INFO","msg":"Test log"}
--- PASS: TestHandleListLogs_Limit (0.20s)
=== RUN   TestHandleSearchMemory
{"time":"2025-12-22T22:20:54.640206473-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleSearchMemory/Search_by_timeline
=== RUN   TestHandleSearchMemory/Search_by_authentication
=== RUN   TestHandleSearchMemory/Search_by_author
=== RUN   TestHandleSearchMemory/No_results
--- PASS: TestHandleSearchMemory (0.21s)
    --- PASS: TestHandleSearchMemory/Search_by_timeline (0.00s)
    --- PASS: TestHandleSearchMemory/Search_by_authentication (0.00s)
    --- PASS: TestHandleSearchMemory/Search_by_author (0.00s)
    --- PASS: TestHandleSearchMemory/No_results (0.00s)
=== RUN   TestHandleSearchMemory_DateFiltering
{"time":"2025-12-22T22:20:54.841508316-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSearchMemory_DateFiltering (0.20s)
=== RUN   TestHandleSearchMemory_EmptyQuery
{"time":"2025-12-22T22:20:55.032567784-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSearchMemory_EmptyQuery (0.19s)
=== RUN   TestHandleSummarizeMemories
{"time":"2025-12-22T22:20:55.221466058-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSummarizeMemories (0.19s)
=== RUN   TestHandleSummarizeMemories_AuthorFilter
{"time":"2025-12-22T22:20:55.408585902-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSummarizeMemories_AuthorFilter (0.19s)
=== RUN   TestHandleUpdateMemory
{"time":"2025-12-22T22:20:55.60428539-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleUpdateMemory (0.20s)
=== RUN   TestHandleUpdateMemory_EmptyID
{"time":"2025-12-22T22:20:55.788077632-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleUpdateMemory_EmptyID (0.18s)
=== RUN   TestHandleUpdateMemory_NonExistent
{"time":"2025-12-22T22:20:55.97396307-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleUpdateMemory_NonExistent (0.19s)
=== RUN   TestHandleDeleteMemory
{"time":"2025-12-22T22:20:56.162735567-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleDeleteMemory (0.19s)
=== RUN   TestHandleDeleteMemory_EmptyID
{"time":"2025-12-22T22:20:56.349477007-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleDeleteMemory_EmptyID (0.19s)
=== RUN   TestHandleDeleteMemory_NonMemoryElement
{"time":"2025-12-22T22:20:56.547320356-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleDeleteMemory_NonMemoryElement (0.20s)
=== RUN   TestHandleClearMemories
{"time":"2025-12-22T22:20:56.766028409-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleClearMemories (0.22s)
=== RUN   TestHandleClearMemories_DateFilter
{"time":"2025-12-22T22:20:56.964274204-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleClearMemories_DateFilter (0.20s)
=== RUN   TestHandleClearMemories_NoConfirmation
{"time":"2025-12-22T22:20:57.211456127-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleClearMemories_NoConfirmation (0.25s)
=== RUN   TestHandleGetPerformanceDashboard
=== RUN   TestHandleGetPerformanceDashboard/default_period
{"time":"2025-12-22T22:20:57.411716762-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetPerformanceDashboard/custom_period
{"time":"2025-12-22T22:20:57.69766923-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetPerformanceDashboard/last_hour_period
{"time":"2025-12-22T22:20:57.913254314-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetPerformanceDashboard (0.70s)
    --- PASS: TestHandleGetPerformanceDashboard/default_period (0.20s)
    --- PASS: TestHandleGetPerformanceDashboard/custom_period (0.29s)
    --- PASS: TestHandleGetPerformanceDashboard/last_hour_period (0.22s)
=== RUN   TestHandleGetPerformanceDashboard_OutputStructure
{"time":"2025-12-22T22:20:58.125057212-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetPerformanceDashboard_OutputStructure (0.21s)
=== RUN   TestHandleGetPerformanceDashboard_SlowOperationsFormat
{"time":"2025-12-22T22:20:58.322099881-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetPerformanceDashboard_SlowOperationsFormat (0.20s)
=== RUN   TestHandleGetPerformanceDashboard_FastOperationsFormat
{"time":"2025-12-22T22:20:58.527356869-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetPerformanceDashboard_FastOperationsFormat (0.21s)
=== RUN   TestHandleGetPerformanceDashboard_ByOperationFormat
{"time":"2025-12-22T22:20:58.755434915-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetPerformanceDashboard_ByOperationFormat (0.23s)
=== RUN   TestHandleGetPerformanceDashboard_NilResult
{"time":"2025-12-22T22:20:58.96858368-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetPerformanceDashboard_NilResult (0.21s)
=== RUN   TestHandleGetPerformanceDashboard_EmptyPeriod
{"time":"2025-12-22T22:20:59.164450815-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetPerformanceDashboard_EmptyPeriod (0.20s)
=== RUN   TestHandleGetPerformanceDashboard_CustomPeriods
=== RUN   TestHandleGetPerformanceDashboard_CustomPeriods/last_1h
{"time":"2025-12-22T22:20:59.370315724-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetPerformanceDashboard_CustomPeriods/last_24h
{"time":"2025-12-22T22:20:59.574688602-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetPerformanceDashboard_CustomPeriods/last_7d
{"time":"2025-12-22T22:20:59.772954847-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetPerformanceDashboard_CustomPeriods/last_30d
{"time":"2025-12-22T22:20:59.970466733-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetPerformanceDashboard_CustomPeriods (0.81s)
    --- PASS: TestHandleGetPerformanceDashboard_CustomPeriods/last_1h (0.21s)
    --- PASS: TestHandleGetPerformanceDashboard_CustomPeriods/last_24h (0.20s)
    --- PASS: TestHandleGetPerformanceDashboard_CustomPeriods/last_7d (0.20s)
    --- PASS: TestHandleGetPerformanceDashboard_CustomPeriods/last_30d (0.20s)
=== RUN   TestHandleGetPerformanceDashboard_ConsistentFields
{"time":"2025-12-22T22:21:00.164547668-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetPerformanceDashboard_ConsistentFields (0.19s)
=== RUN   TestHandlePublishCollection_MissingManifestPath
    publishing_tools_test.go:27: Requires filesystem access and manifest validation, tested via integration
--- SKIP: TestHandlePublishCollection_MissingManifestPath (0.00s)
=== RUN   TestHandlePublishCollection_InvalidRegistryFormat
{"time":"2025-12-22T22:21:00.371279071-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandlePublishCollection_InvalidRegistryFormat (0.21s)
=== RUN   TestHandlePublishCollection_DefaultRegistry
    publishing_tools_test.go:47: Requires filesystem access and manifest validation, tested via integration
--- SKIP: TestHandlePublishCollection_DefaultRegistry (0.00s)
=== RUN   TestHandlePublishCollection_DryRun
    publishing_tools_test.go:51: Requires filesystem access and manifest validation, tested via integration
--- SKIP: TestHandlePublishCollection_DryRun (0.00s)
=== RUN   TestHandlePublishCollection_SkipSecurityScan
    publishing_tools_test.go:55: Requires filesystem access and manifest validation, tested via integration
--- SKIP: TestHandlePublishCollection_SkipSecurityScan (0.00s)
=== RUN   TestHandlePublishCollection_ValidationFailed
    publishing_tools_test.go:59: Requires filesystem access and manifest validation, tested via integration
--- SKIP: TestHandlePublishCollection_ValidationFailed (0.00s)
=== RUN   TestHandlePublishCollection_SecurityFailed
    publishing_tools_test.go:63: Requires filesystem access and security scanning, tested via integration
--- SKIP: TestHandlePublishCollection_SecurityFailed (0.00s)
=== RUN   TestHandlePublishCollection_GitHubAuthFailed
    publishing_tools_test.go:67: Requires GitHub API access, tested via integration
--- SKIP: TestHandlePublishCollection_GitHubAuthFailed (0.00s)
=== RUN   TestCreateCollectionTarball_BasicManifest
--- PASS: TestCreateCollectionTarball_BasicManifest (0.00s)
=== RUN   TestCreateCollectionTarball_MissingManifest
--- PASS: TestCreateCollectionTarball_MissingManifest (0.00s)
=== RUN   TestCreateCollectionTarball_MissingElement
--- PASS: TestCreateCollectionTarball_MissingElement (0.00s)
=== RUN   TestCreateCollectionTarball_InvalidPath
--- PASS: TestCreateCollectionTarball_InvalidPath (0.00s)
=== RUN   TestAddFileToTar_ValidFile
--- PASS: TestAddFileToTar_ValidFile (0.00s)
=== RUN   TestAddFileToTar_NonexistentFile
--- PASS: TestAddFileToTar_NonexistentFile (0.00s)
=== RUN   TestAddFileToTar_Directory
    publishing_tools_test.go:234: addFileToTar expects files, not directories
--- SKIP: TestAddFileToTar_Directory (0.00s)
=== RUN   TestCopyFile_Success
--- PASS: TestCopyFile_Success (0.00s)
=== RUN   TestCopyFile_SourceNotFound
--- PASS: TestCopyFile_SourceNotFound (0.00s)
=== RUN   TestCopyFile_DestinationDirNotExists
--- PASS: TestCopyFile_DestinationDirNotExists (0.00s)
=== RUN   TestCopyFile_LargeFile
--- PASS: TestCopyFile_LargeFile (0.01s)
=== RUN   TestPublishCollectionOutput_SuccessStatus
--- PASS: TestPublishCollectionOutput_SuccessStatus (0.00s)
=== RUN   TestPublishCollectionOutput_ValidationFailedStatus
--- PASS: TestPublishCollectionOutput_ValidationFailedStatus (0.00s)
=== RUN   TestPublishCollectionOutput_SecurityFailedStatus
--- PASS: TestPublishCollectionOutput_SecurityFailedStatus (0.00s)
=== RUN   TestPublishCollectionOutput_DryRunStatus
--- PASS: TestPublishCollectionOutput_DryRunStatus (0.00s)
=== RUN   TestPublishCollectionOutput_ErrorStatus
--- PASS: TestPublishCollectionOutput_ErrorStatus (0.00s)
=== RUN   TestPublishCollectionInput_AllFieldsSet
--- PASS: TestPublishCollectionInput_AllFieldsSet (0.00s)
=== RUN   TestPublishCollectionInput_DefaultValues
--- PASS: TestPublishCollectionInput_DefaultValues (0.00s)
=== RUN   TestQuickCreatePersona
{"time":"2025-12-22T22:21:00.616800695-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestQuickCreatePersona/create_with_technical_template
=== RUN   TestQuickCreatePersona/create_with_custom_expertise
=== RUN   TestQuickCreatePersona/create_with_creative_template
=== RUN   TestQuickCreatePersona/create_with_business_template
=== RUN   TestQuickCreatePersona/create_with_support_template
=== RUN   TestQuickCreatePersona/create_with_unknown_template_defaults_to_technical
--- PASS: TestQuickCreatePersona (0.22s)
    --- PASS: TestQuickCreatePersona/create_with_technical_template (0.00s)
    --- PASS: TestQuickCreatePersona/create_with_custom_expertise (0.00s)
    --- PASS: TestQuickCreatePersona/create_with_creative_template (0.00s)
    --- PASS: TestQuickCreatePersona/create_with_business_template (0.00s)
    --- PASS: TestQuickCreatePersona/create_with_support_template (0.00s)
    --- PASS: TestQuickCreatePersona/create_with_unknown_template_defaults_to_technical (0.00s)
=== RUN   TestQuickCreateSkill
{"time":"2025-12-22T22:21:00.845392543-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestQuickCreateSkill/create_with_api_template
=== RUN   TestQuickCreateSkill/create_with_custom_trigger
=== RUN   TestQuickCreateSkill/create_with_data_template
=== RUN   TestQuickCreateSkill/create_with_analysis_template
--- PASS: TestQuickCreateSkill (0.23s)
    --- PASS: TestQuickCreateSkill/create_with_api_template (0.00s)
    --- PASS: TestQuickCreateSkill/create_with_custom_trigger (0.00s)
    --- PASS: TestQuickCreateSkill/create_with_data_template (0.00s)
    --- PASS: TestQuickCreateSkill/create_with_analysis_template (0.00s)
=== RUN   TestQuickCreateMemory
{"time":"2025-12-22T22:21:01.081363409-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestQuickCreateMemory/create_basic_memory
=== RUN   TestQuickCreateMemory/create_with_tags
=== RUN   TestQuickCreateMemory/create_with_importance
--- PASS: TestQuickCreateMemory (0.23s)
    --- PASS: TestQuickCreateMemory/create_basic_memory (0.00s)
    --- PASS: TestQuickCreateMemory/create_with_tags (0.00s)
    --- PASS: TestQuickCreateMemory/create_with_importance (0.00s)
=== RUN   TestPersonaTemplates
{"time":"2025-12-22T22:21:01.307918897-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestPersonaTemplates/template_technical
=== RUN   TestPersonaTemplates/template_creative
=== RUN   TestPersonaTemplates/template_business
=== RUN   TestPersonaTemplates/template_support
=== RUN   TestPersonaTemplates/template_unknown
--- PASS: TestPersonaTemplates (0.22s)
    --- PASS: TestPersonaTemplates/template_technical (0.00s)
    --- PASS: TestPersonaTemplates/template_creative (0.00s)
    --- PASS: TestPersonaTemplates/template_business (0.00s)
    --- PASS: TestPersonaTemplates/template_support (0.00s)
    --- PASS: TestPersonaTemplates/template_unknown (0.00s)
=== RUN   TestSkillTemplates
{"time":"2025-12-22T22:21:01.520118287-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestSkillTemplates/template_api
=== RUN   TestSkillTemplates/template_data
=== RUN   TestSkillTemplates/template_automation
=== RUN   TestSkillTemplates/template_analysis
=== RUN   TestSkillTemplates/template_unknown
--- PASS: TestSkillTemplates (0.21s)
    --- PASS: TestSkillTemplates/template_api (0.00s)
    --- PASS: TestSkillTemplates/template_data (0.00s)
    --- PASS: TestSkillTemplates/template_automation (0.00s)
    --- PASS: TestSkillTemplates/template_analysis (0.00s)
    --- PASS: TestSkillTemplates/template_unknown (0.00s)
=== RUN   TestHelperFunctions
=== RUN   TestHelperFunctions/orDefault_with_value
=== RUN   TestHelperFunctions/orDefault_with_empty
=== RUN   TestHelperFunctions/getCurrentUserFromContext_with_user
=== RUN   TestHelperFunctions/getCurrentUserFromContext_without_user
--- PASS: TestHelperFunctions (0.00s)
    --- PASS: TestHelperFunctions/orDefault_with_value (0.00s)
    --- PASS: TestHelperFunctions/orDefault_with_empty (0.00s)
    --- PASS: TestHelperFunctions/getCurrentUserFromContext_with_user (0.00s)
    --- PASS: TestHelperFunctions/getCurrentUserFromContext_without_user (0.00s)
=== RUN   TestQuickCreateIndexing
{"time":"2025-12-22T22:21:01.717247324-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestQuickCreateIndexing (0.25s)
=== RUN   TestHandleSuggestRelatedElements_Success
--- PASS: TestHandleSuggestRelatedElements_Success (0.00s)
=== RUN   TestHandleSuggestRelatedElements_MissingElementID
--- PASS: TestHandleSuggestRelatedElements_MissingElementID (0.00s)
=== RUN   TestHandleSuggestRelatedElements_ElementNotFound
--- PASS: TestHandleSuggestRelatedElements_ElementNotFound (0.00s)
=== RUN   TestHandleSuggestRelatedElements_FilterByType
--- PASS: TestHandleSuggestRelatedElements_FilterByType (0.00s)
=== RUN   TestHandleSuggestRelatedElements_ExcludeIDs
--- PASS: TestHandleSuggestRelatedElements_ExcludeIDs (0.00s)
=== RUN   TestHandleSuggestRelatedElements_MinScore
--- PASS: TestHandleSuggestRelatedElements_MinScore (0.00s)
=== RUN   TestHandleSuggestRelatedElements_MaxResults
--- PASS: TestHandleSuggestRelatedElements_MaxResults (0.00s)
=== RUN   TestHandleSuggestRelatedElements_InvalidElementType
--- PASS: TestHandleSuggestRelatedElements_InvalidElementType (0.00s)
=== RUN   TestHandleSuggestRelatedElements_JSONSerialization
--- PASS: TestHandleSuggestRelatedElements_JSONSerialization (0.00s)
=== RUN   TestHandleSuggestRelatedElements_SearchDuration
--- PASS: TestHandleSuggestRelatedElements_SearchDuration (0.00s)
=== RUN   TestHandleFindRelatedMemories_Success
--- PASS: TestHandleFindRelatedMemories_Success (0.00s)
=== RUN   TestHandleFindRelatedMemories_MissingElementID
--- PASS: TestHandleFindRelatedMemories_MissingElementID (0.00s)
=== RUN   TestHandleFindRelatedMemories_ElementNotFound
--- PASS: TestHandleFindRelatedMemories_ElementNotFound (0.00s)
=== RUN   TestHandleFindRelatedMemories_NoRelatedMemories
--- PASS: TestHandleFindRelatedMemories_NoRelatedMemories (0.00s)
=== RUN   TestHandleFindRelatedMemories_FilterByAuthor
--- PASS: TestHandleFindRelatedMemories_FilterByAuthor (0.00s)
=== RUN   TestHandleFindRelatedMemories_FilterByIncludeTags
--- PASS: TestHandleFindRelatedMemories_FilterByIncludeTags (0.00s)
=== RUN   TestHandleFindRelatedMemories_FilterByExcludeTags
--- PASS: TestHandleFindRelatedMemories_FilterByExcludeTags (0.00s)
=== RUN   TestHandleFindRelatedMemories_SortByName
--- PASS: TestHandleFindRelatedMemories_SortByName (0.00s)
=== RUN   TestHandleFindRelatedMemories_WithLimit
--- PASS: TestHandleFindRelatedMemories_WithLimit (0.01s)
=== RUN   TestHandleFindRelatedMemories_IndexStats
--- PASS: TestHandleFindRelatedMemories_IndexStats (0.00s)
=== RUN   TestHandleFindRelatedMemories_JSONSerialization
--- PASS: TestHandleFindRelatedMemories_JSONSerialization (0.00s)
=== RUN   TestApplyMemoryFilters
=== RUN   TestApplyMemoryFilters/filter_by_author
=== RUN   TestApplyMemoryFilters/filter_by_include_tags
=== RUN   TestApplyMemoryFilters/filter_by_exclude_tags
--- PASS: TestApplyMemoryFilters (0.00s)
    --- PASS: TestApplyMemoryFilters/filter_by_author (0.00s)
    --- PASS: TestApplyMemoryFilters/filter_by_include_tags (0.00s)
    --- PASS: TestApplyMemoryFilters/filter_by_exclude_tags (0.00s)
=== RUN   TestSortMemories
=== RUN   TestSortMemories/sort_by_name_asc
=== RUN   TestSortMemories/sort_by_name_desc
=== RUN   TestSortMemories/sort_by_created_at_desc
--- PASS: TestSortMemories (0.00s)
    --- PASS: TestSortMemories/sort_by_name_asc (0.00s)
    --- PASS: TestSortMemories/sort_by_name_desc (0.00s)
    --- PASS: TestSortMemories/sort_by_created_at_desc (0.00s)
=== RUN   TestHasAllTags
--- PASS: TestHasAllTags (0.00s)
=== RUN   TestHasAnyTag
--- PASS: TestHasAnyTag (0.00s)
=== RUN   TestGetRelatedElementsInput_Structure
--- PASS: TestGetRelatedElementsInput_Structure (0.00s)
=== RUN   TestGetRelatedElementsOutput_Structure
--- PASS: TestGetRelatedElementsOutput_Structure (0.00s)
=== RUN   TestExpandRelationshipsInput_Structure
--- PASS: TestExpandRelationshipsInput_Structure (0.00s)
=== RUN   TestExpandRelationshipsOutput_Structure
--- PASS: TestExpandRelationshipsOutput_Structure (0.00s)
=== RUN   TestInferRelationshipsInput_Structure
--- PASS: TestInferRelationshipsInput_Structure (0.00s)
=== RUN   TestInferRelationshipsOutput_Structure
--- PASS: TestInferRelationshipsOutput_Structure (0.00s)
=== RUN   TestGetRecommendationsInput_Structure
--- PASS: TestGetRecommendationsInput_Structure (0.00s)
=== RUN   TestGetRecommendationsOutput_Structure
--- PASS: TestGetRecommendationsOutput_Structure (0.00s)
=== RUN   TestGetRelationshipStatsInput_Structure
--- PASS: TestGetRelationshipStatsInput_Structure (0.00s)
=== RUN   TestGetRelationshipStatsOutput_Structure
--- PASS: TestGetRelationshipStatsOutput_Structure (0.00s)
=== RUN   TestConvertNodeToMap_NilNode
--- PASS: TestConvertNodeToMap_NilNode (0.00s)
=== RUN   TestConvertNodeToMap_SingleNode
--- PASS: TestConvertNodeToMap_SingleNode (0.00s)
=== RUN   TestConvertNodeToMap_WithChildren
--- PASS: TestConvertNodeToMap_WithChildren (0.00s)
=== RUN   TestCountNodesInTree_NilNode
--- PASS: TestCountNodesInTree_NilNode (0.00s)
=== RUN   TestCountNodesInTree_SingleNode
--- PASS: TestCountNodesInTree_SingleNode (0.00s)
=== RUN   TestCountNodesInTree_WithChildren
--- PASS: TestCountNodesInTree_WithChildren (0.00s)
=== RUN   TestContainsString_Found
--- PASS: TestContainsString_Found (0.00s)
=== RUN   TestContainsString_NotFound
--- PASS: TestContainsString_NotFound (0.00s)
=== RUN   TestContainsString_EmptySlice
--- PASS: TestContainsString_EmptySlice (0.00s)
=== RUN   TestContainsString_CaseSensitive
--- PASS: TestContainsString_CaseSensitive (0.00s)
=== RUN   TestHandleGetRelatedElements_DefaultDirection
--- PASS: TestHandleGetRelatedElements_DefaultDirection (0.00s)
=== RUN   TestHandleExpandRelationships_MaxDepthDefaults
=== RUN   TestHandleExpandRelationships_MaxDepthDefaults/Zero_defaults_to_3
=== RUN   TestHandleExpandRelationships_MaxDepthDefaults/Under_limit_unchanged
=== RUN   TestHandleExpandRelationships_MaxDepthDefaults/At_limit_unchanged
=== RUN   TestHandleExpandRelationships_MaxDepthDefaults/Over_limit_capped_at_5
--- PASS: TestHandleExpandRelationships_MaxDepthDefaults (0.00s)
    --- PASS: TestHandleExpandRelationships_MaxDepthDefaults/Zero_defaults_to_3 (0.00s)
    --- PASS: TestHandleExpandRelationships_MaxDepthDefaults/Under_limit_unchanged (0.00s)
    --- PASS: TestHandleExpandRelationships_MaxDepthDefaults/At_limit_unchanged (0.00s)
    --- PASS: TestHandleExpandRelationships_MaxDepthDefaults/Over_limit_capped_at_5 (0.00s)
=== RUN   TestGetRelationshipStatsOutput_CacheHitRateCalculation
=== RUN   TestGetRelationshipStatsOutput_CacheHitRateCalculation/High_hit_rate
=== RUN   TestGetRelationshipStatsOutput_CacheHitRateCalculation/Low_hit_rate
=== RUN   TestGetRelationshipStatsOutput_CacheHitRateCalculation/Perfect_hit_rate
=== RUN   TestGetRelationshipStatsOutput_CacheHitRateCalculation/Zero_hits
=== RUN   TestGetRelationshipStatsOutput_CacheHitRateCalculation/No_requests
--- PASS: TestGetRelationshipStatsOutput_CacheHitRateCalculation (0.00s)
    --- PASS: TestGetRelationshipStatsOutput_CacheHitRateCalculation/High_hit_rate (0.00s)
    --- PASS: TestGetRelationshipStatsOutput_CacheHitRateCalculation/Low_hit_rate (0.00s)
    --- PASS: TestGetRelationshipStatsOutput_CacheHitRateCalculation/Perfect_hit_rate (0.00s)
    --- PASS: TestGetRelationshipStatsOutput_CacheHitRateCalculation/Zero_hits (0.00s)
    --- PASS: TestGetRelationshipStatsOutput_CacheHitRateCalculation/No_requests (0.00s)
=== RUN   TestInferRelationshipsOutput_InferenceFormat
--- PASS: TestInferRelationshipsOutput_InferenceFormat (0.00s)
=== RUN   TestGetRecommendationsOutput_RecommendationFormat
=== RUN   TestGetRecommendationsOutput_RecommendationFormat/With_Reasons
=== RUN   TestGetRecommendationsOutput_RecommendationFormat/Without_Reasons
--- PASS: TestGetRecommendationsOutput_RecommendationFormat (0.00s)
    --- PASS: TestGetRecommendationsOutput_RecommendationFormat/With_Reasons (0.00s)
    --- PASS: TestGetRecommendationsOutput_RecommendationFormat/Without_Reasons (0.00s)
=== RUN   TestHandleReloadElements
=== RUN   TestHandleReloadElements/Reload_all_elements
=== RUN   TestHandleReloadElements/Reload_only_personas
=== RUN   TestHandleReloadElements/Reload_multiple_types
=== RUN   TestHandleReloadElements/Reload_without_validation
=== RUN   TestHandleReloadElements/Invalid_element_type
=== RUN   TestHandleReloadElements/Default_parameters_(reload_all)
--- PASS: TestHandleReloadElements (0.00s)
    --- PASS: TestHandleReloadElements/Reload_all_elements (0.00s)
    --- PASS: TestHandleReloadElements/Reload_only_personas (0.00s)
    --- PASS: TestHandleReloadElements/Reload_multiple_types (0.00s)
    --- PASS: TestHandleReloadElements/Reload_without_validation (0.00s)
    --- PASS: TestHandleReloadElements/Invalid_element_type (0.00s)
    --- PASS: TestHandleReloadElements/Default_parameters_(reload_all) (0.00s)
=== RUN   TestHandleReloadElements_ValidationErrors
--- PASS: TestHandleReloadElements_ValidationErrors (0.00s)
=== RUN   TestHandleReloadElements_TypeFiltering
--- PASS: TestHandleReloadElements_TypeFiltering (0.00s)
=== RUN   TestHandleRenderTemplate
=== RUN   TestHandleRenderTemplate/Render_with_template_id
=== RUN   TestHandleRenderTemplate/Render_with_template_content
=== RUN   TestHandleRenderTemplate/Missing_required_field_-_no_template_id_or_content
=== RUN   TestHandleRenderTemplate/Both_template_id_and_content_provided
=== RUN   TestHandleRenderTemplate/No_data_provided
=== RUN   TestHandleRenderTemplate/Invalid_output_format
=== RUN   TestHandleRenderTemplate/Template_not_found
=== RUN   TestHandleRenderTemplate/Missing_required_variables_with_validation
--- PASS: TestHandleRenderTemplate (0.04s)
    --- PASS: TestHandleRenderTemplate/Render_with_template_id (0.02s)
    --- PASS: TestHandleRenderTemplate/Render_with_template_content (0.00s)
    --- PASS: TestHandleRenderTemplate/Missing_required_field_-_no_template_id_or_content (0.00s)
    --- PASS: TestHandleRenderTemplate/Both_template_id_and_content_provided (0.00s)
    --- PASS: TestHandleRenderTemplate/No_data_provided (0.00s)
    --- PASS: TestHandleRenderTemplate/Invalid_output_format (0.00s)
    --- PASS: TestHandleRenderTemplate/Template_not_found (0.01s)
    --- PASS: TestHandleRenderTemplate/Missing_required_variables_with_validation (0.01s)
=== RUN   TestHandleRenderTemplate_WithHelpers
--- PASS: TestHandleRenderTemplate_WithHelpers (0.00s)
=== RUN   TestHandleRenderTemplate_OutputFormats
=== RUN   TestHandleRenderTemplate_OutputFormats/text
=== RUN   TestHandleRenderTemplate_OutputFormats/markdown
=== RUN   TestHandleRenderTemplate_OutputFormats/yaml
=== RUN   TestHandleRenderTemplate_OutputFormats/json
--- PASS: TestHandleRenderTemplate_OutputFormats (0.00s)
    --- PASS: TestHandleRenderTemplate_OutputFormats/text (0.00s)
    --- PASS: TestHandleRenderTemplate_OutputFormats/markdown (0.00s)
    --- PASS: TestHandleRenderTemplate_OutputFormats/yaml (0.00s)
    --- PASS: TestHandleRenderTemplate_OutputFormats/json (0.00s)
=== RUN   TestHandleSearchElements
{"time":"2025-12-22T22:21:02.055391423-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleSearchElements/Search_with_query
=== RUN   TestHandleSearchElements/Search_with_type_filter
=== RUN   TestHandleSearchElements/Search_with_author_filter
=== RUN   TestHandleSearchElements/Search_with_tags_filter
=== RUN   TestHandleSearchElements/Search_with_pagination
=== RUN   TestHandleSearchElements/Search_with_sort
=== RUN   TestHandleSearchElements/Search_with_maximum_limit
=== RUN   TestHandleSearchElements/Search_with_default_limit
--- PASS: TestHandleSearchElements (0.22s)
    --- PASS: TestHandleSearchElements/Search_with_query (0.00s)
    --- PASS: TestHandleSearchElements/Search_with_type_filter (0.00s)
    --- PASS: TestHandleSearchElements/Search_with_author_filter (0.00s)
    --- PASS: TestHandleSearchElements/Search_with_tags_filter (0.00s)
    --- PASS: TestHandleSearchElements/Search_with_pagination (0.00s)
    --- PASS: TestHandleSearchElements/Search_with_sort (0.00s)
    --- PASS: TestHandleSearchElements/Search_with_maximum_limit (0.00s)
    --- PASS: TestHandleSearchElements/Search_with_default_limit (0.00s)
=== RUN   TestCalculateRelevance
=== RUN   TestCalculateRelevance/Full_match
=== RUN   TestCalculateRelevance/Partial_match
=== RUN   TestCalculateRelevance/No_match
=== RUN   TestCalculateRelevance/Empty_query
=== RUN   TestCalculateRelevance/Case_insensitive
--- PASS: TestCalculateRelevance (0.00s)
    --- PASS: TestCalculateRelevance/Full_match (0.00s)
    --- PASS: TestCalculateRelevance/Partial_match (0.00s)
    --- PASS: TestCalculateRelevance/No_match (0.00s)
    --- PASS: TestCalculateRelevance/Empty_query (0.00s)
    --- PASS: TestCalculateRelevance/Case_insensitive (0.00s)
=== RUN   TestSortResults
=== RUN   TestSortResults/Sort_by_name_ascending
=== RUN   TestSortResults/Sort_by_name_descending
=== RUN   TestSortResults/Sort_by_created_at_ascending
=== RUN   TestSortResults/Sort_by_relevance_descending
--- PASS: TestSortResults (0.00s)
    --- PASS: TestSortResults/Sort_by_name_ascending (0.00s)
    --- PASS: TestSortResults/Sort_by_name_descending (0.00s)
    --- PASS: TestSortResults/Sort_by_created_at_ascending (0.00s)
    --- PASS: TestSortResults/Sort_by_relevance_descending (0.00s)
=== RUN   TestNewMCPServer
{"time":"2025-12-22T22:21:02.284597247-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestNewMCPServer (0.23s)
=== RUN   TestHandleListElements
{"time":"2025-12-22T22:21:02.482154565-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleListElements/list_all_elements
=== RUN   TestHandleListElements/filter_by_type
=== RUN   TestHandleListElements/filter_by_active_status
=== RUN   TestHandleListElements/filter_by_tags
--- PASS: TestHandleListElements (0.20s)
    --- PASS: TestHandleListElements/list_all_elements (0.00s)
    --- PASS: TestHandleListElements/filter_by_type (0.00s)
    --- PASS: TestHandleListElements/filter_by_active_status (0.00s)
    --- PASS: TestHandleListElements/filter_by_tags (0.00s)
=== RUN   TestHandleGetElement
{"time":"2025-12-22T22:21:02.714476974-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleGetElement/get_existing_element
=== RUN   TestHandleGetElement/get_non-existing_element
=== RUN   TestHandleGetElement/empty_ID
--- PASS: TestHandleGetElement (0.23s)
    --- PASS: TestHandleGetElement/get_existing_element (0.00s)
    --- PASS: TestHandleGetElement/get_non-existing_element (0.00s)
    --- PASS: TestHandleGetElement/empty_ID (0.00s)
=== RUN   TestHandleCreateElement
{"time":"2025-12-22T22:21:02.928606797-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleCreateElement/create_valid_persona
=== RUN   TestHandleCreateElement/create_valid_skill
=== RUN   TestHandleCreateElement/missing_type
=== RUN   TestHandleCreateElement/invalid_type
=== RUN   TestHandleCreateElement/name_too_short
=== RUN   TestHandleCreateElement/name_too_long
=== RUN   TestHandleCreateElement/description_too_long
=== RUN   TestHandleCreateElement/missing_version
=== RUN   TestHandleCreateElement/missing_author
--- PASS: TestHandleCreateElement (0.21s)
    --- PASS: TestHandleCreateElement/create_valid_persona (0.00s)
    --- PASS: TestHandleCreateElement/create_valid_skill (0.00s)
    --- PASS: TestHandleCreateElement/missing_type (0.00s)
    --- PASS: TestHandleCreateElement/invalid_type (0.00s)
    --- PASS: TestHandleCreateElement/name_too_short (0.00s)
    --- PASS: TestHandleCreateElement/name_too_long (0.00s)
    --- PASS: TestHandleCreateElement/description_too_long (0.00s)
    --- PASS: TestHandleCreateElement/missing_version (0.00s)
    --- PASS: TestHandleCreateElement/missing_author (0.00s)
=== RUN   TestHandleUpdateElement
{"time":"2025-12-22T22:21:03.145041794-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleUpdateElement/update_name
=== RUN   TestHandleUpdateElement/update_description
=== RUN   TestHandleUpdateElement/update_tags
=== RUN   TestHandleUpdateElement/update_active_status
=== RUN   TestHandleUpdateElement/update_multiple_fields
=== RUN   TestHandleUpdateElement/missing_ID
=== RUN   TestHandleUpdateElement/non-existing_element
--- PASS: TestHandleUpdateElement (0.22s)
    --- PASS: TestHandleUpdateElement/update_name (0.00s)
    --- PASS: TestHandleUpdateElement/update_description (0.00s)
    --- PASS: TestHandleUpdateElement/update_tags (0.00s)
    --- PASS: TestHandleUpdateElement/update_active_status (0.00s)
    --- PASS: TestHandleUpdateElement/update_multiple_fields (0.00s)
    --- PASS: TestHandleUpdateElement/missing_ID (0.00s)
    --- PASS: TestHandleUpdateElement/non-existing_element (0.00s)
=== RUN   TestHandleDeleteElement
{"time":"2025-12-22T22:21:03.337715684-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleDeleteElement/delete_existing_element
=== RUN   TestHandleDeleteElement/delete_non-existing_element
=== RUN   TestHandleDeleteElement/empty_ID
--- PASS: TestHandleDeleteElement (0.19s)
    --- PASS: TestHandleDeleteElement/delete_existing_element (0.00s)
    --- PASS: TestHandleDeleteElement/delete_non-existing_element (0.00s)
    --- PASS: TestHandleDeleteElement/empty_ID (0.00s)
=== RUN   TestHandleDeleteElement_VerifyDeletion
{"time":"2025-12-22T22:21:03.553651351-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleDeleteElement_VerifyDeletion (0.22s)
=== RUN   TestMockRepository
--- PASS: TestMockRepository (0.00s)
=== RUN   TestHandleListTemplates_DefaultParameters
{"time":"2025-12-22T22:21:03.752169752-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListTemplates_DefaultParameters (0.21s)
=== RUN   TestHandleListTemplates_CustomPage
{"time":"2025-12-22T22:21:03.961174336-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListTemplates_CustomPage (0.21s)
=== RUN   TestHandleListTemplates_FilterByCategory
{"time":"2025-12-22T22:21:04.171112366-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListTemplates_FilterByCategory (0.21s)
=== RUN   TestHandleListTemplates_FilterByTags
{"time":"2025-12-22T22:21:04.375548144-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListTemplates_FilterByTags (0.20s)
=== RUN   TestHandleListTemplates_FilterByElementType
{"time":"2025-12-22T22:21:04.590888902-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListTemplates_FilterByElementType (0.22s)
=== RUN   TestHandleListTemplates_IncludeBuiltIn
{"time":"2025-12-22T22:21:04.806626476-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListTemplates_IncludeBuiltIn (0.21s)
=== RUN   TestHandleListTemplates_OutputStructure
{"time":"2025-12-22T22:21:05.040282863-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleListTemplates_OutputStructure (0.23s)
=== RUN   TestHandleGetTemplate_RequiredID
{"time":"2025-12-22T22:21:05.254384715-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetTemplate_RequiredID (0.20s)
=== RUN   TestHandleGetTemplate_TemplateNotFound
{"time":"2025-12-22T22:21:05.45502143-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetTemplate_TemplateNotFound (0.21s)
=== RUN   TestHandleGetTemplate_ValidTemplate
{"time":"2025-12-22T22:21:05.665169365-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleGetTemplate_ValidTemplate (0.21s)
=== RUN   TestHandleInstantiateTemplate_RequiredTemplateID
{"time":"2025-12-22T22:21:05.885921233-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleInstantiateTemplate_RequiredTemplateID (0.21s)
=== RUN   TestHandleInstantiateTemplate_TemplateNotFound
{"time":"2025-12-22T22:21:06.085960167-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleInstantiateTemplate_TemplateNotFound (0.21s)
=== RUN   TestHandleInstantiateTemplate_Success
{"time":"2025-12-22T22:21:06.312606426-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleInstantiateTemplate_Success (0.23s)
=== RUN   TestHandleInstantiateTemplate_WithDryRun
{"time":"2025-12-22T22:21:06.643378339-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleInstantiateTemplate_WithDryRun (0.33s)
=== RUN   TestHandleInstantiateTemplate_WithSaveAs
{"time":"2025-12-22T22:21:06.889891703-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleInstantiateTemplate_WithSaveAs (0.25s)
=== RUN   TestHandleValidateTemplate_RequiredTemplateID
{"time":"2025-12-22T22:21:07.114828727-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleValidateTemplate_RequiredTemplateID (0.21s)
=== RUN   TestHandleValidateTemplate_TemplateNotFound
{"time":"2025-12-22T22:21:07.313974916-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleValidateTemplate_TemplateNotFound (0.21s)
=== RUN   TestHandleValidateTemplate_ValidSyntax
{"time":"2025-12-22T22:21:07.521472751-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleValidateTemplate_ValidSyntax (0.21s)
=== RUN   TestHandleValidateTemplate_InvalidSyntax
{"time":"2025-12-22T22:21:07.724925443-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleValidateTemplate_InvalidSyntax (0.20s)
=== RUN   TestHandleValidateTemplate_WithVariables
{"time":"2025-12-22T22:21:07.938403231-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleValidateTemplate_WithVariables (0.21s)
=== RUN   TestInferElementType
    template_tools_test.go:376: Template metadata is private, tested via integration
--- SKIP: TestInferElementType (0.00s)
=== RUN   TestIsBuiltInTemplate
=== RUN   TestIsBuiltInTemplate/Standard_library_template
=== RUN   TestIsBuiltInTemplate/Standard_library_prefix
=== RUN   TestIsBuiltInTemplate/Custom_template
=== RUN   TestIsBuiltInTemplate/Short_ID
=== RUN   TestIsBuiltInTemplate/Empty_ID
--- PASS: TestIsBuiltInTemplate (0.00s)
    --- PASS: TestIsBuiltInTemplate/Standard_library_template (0.00s)
    --- PASS: TestIsBuiltInTemplate/Standard_library_prefix (0.00s)
    --- PASS: TestIsBuiltInTemplate/Custom_template (0.00s)
    --- PASS: TestIsBuiltInTemplate/Short_ID (0.00s)
    --- PASS: TestIsBuiltInTemplate/Empty_ID (0.00s)
=== RUN   TestTemplateInfo_Structure
--- PASS: TestTemplateInfo_Structure (0.00s)
=== RUN   TestValidationErrorInfo_Structure
--- PASS: TestValidationErrorInfo_Structure (0.00s)
=== RUN   TestSimpleElement_GetMetadata
--- PASS: TestSimpleElement_GetMetadata (0.00s)
=== RUN   TestSimpleElement_Validate
--- PASS: TestSimpleElement_Validate (0.00s)
=== RUN   TestSimpleElement_GetType
--- PASS: TestSimpleElement_GetType (0.00s)
=== RUN   TestSimpleElement_GetID
--- PASS: TestSimpleElement_GetID (0.00s)
=== RUN   TestSimpleElement_IsActive
=== RUN   TestSimpleElement_IsActive/active_element
=== RUN   TestSimpleElement_IsActive/inactive_element
--- PASS: TestSimpleElement_IsActive (0.00s)
    --- PASS: TestSimpleElement_IsActive/active_element (0.00s)
    --- PASS: TestSimpleElement_IsActive/inactive_element (0.00s)
=== RUN   TestSimpleElement_Activate
--- PASS: TestSimpleElement_Activate (0.00s)
=== RUN   TestSimpleElement_Deactivate
--- PASS: TestSimpleElement_Deactivate (0.00s)
=== RUN   TestInputOutputStructures
=== RUN   TestInputOutputStructures/ListElementsInput
=== RUN   TestInputOutputStructures/ListElementsOutput
=== RUN   TestInputOutputStructures/GetElementInput
=== RUN   TestInputOutputStructures/GetElementOutput
=== RUN   TestInputOutputStructures/CreateElementInput
=== RUN   TestInputOutputStructures/CreateElementOutput
=== RUN   TestInputOutputStructures/UpdateElementInput
=== RUN   TestInputOutputStructures/UpdateElementOutput
=== RUN   TestInputOutputStructures/DeleteElementInput
=== RUN   TestInputOutputStructures/DeleteElementOutput
--- PASS: TestInputOutputStructures (0.00s)
    --- PASS: TestInputOutputStructures/ListElementsInput (0.00s)
    --- PASS: TestInputOutputStructures/ListElementsOutput (0.00s)
    --- PASS: TestInputOutputStructures/GetElementInput (0.00s)
    --- PASS: TestInputOutputStructures/GetElementOutput (0.00s)
    --- PASS: TestInputOutputStructures/CreateElementInput (0.00s)
    --- PASS: TestInputOutputStructures/CreateElementOutput (0.00s)
    --- PASS: TestInputOutputStructures/UpdateElementInput (0.00s)
    --- PASS: TestInputOutputStructures/UpdateElementOutput (0.00s)
    --- PASS: TestInputOutputStructures/DeleteElementInput (0.00s)
    --- PASS: TestInputOutputStructures/DeleteElementOutput (0.00s)
=== RUN   TestHandleCreatePersona_Success
{"time":"2025-12-22T22:21:08.148284372-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleCreatePersona_Success (0.19s)
=== RUN   TestHandleCreatePersona_ValidationErrors
{"time":"2025-12-22T22:21:08.337498902-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleCreatePersona_ValidationErrors/missing_name
=== RUN   TestHandleCreatePersona_ValidationErrors/missing_system_prompt
=== RUN   TestHandleCreatePersona_ValidationErrors/invalid_privacy_level
--- PASS: TestHandleCreatePersona_ValidationErrors (0.19s)
    --- PASS: TestHandleCreatePersona_ValidationErrors/missing_name (0.00s)
    --- PASS: TestHandleCreatePersona_ValidationErrors/missing_system_prompt (0.00s)
    --- PASS: TestHandleCreatePersona_ValidationErrors/invalid_privacy_level (0.00s)
=== RUN   TestHandleCreateSkill_Success
{"time":"2025-12-22T22:21:08.536573245-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleCreateSkill_Success (0.20s)
=== RUN   TestHandleCreateSkill_ValidationErrors
{"time":"2025-12-22T22:21:08.734072573-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleCreateSkill_ValidationErrors/missing_triggers
=== RUN   TestHandleCreateSkill_ValidationErrors/missing_procedures
--- PASS: TestHandleCreateSkill_ValidationErrors (0.20s)
    --- PASS: TestHandleCreateSkill_ValidationErrors/missing_triggers (0.00s)
    --- PASS: TestHandleCreateSkill_ValidationErrors/missing_procedures (0.00s)
=== RUN   TestHandleCreateTemplate_Success
{"time":"2025-12-22T22:21:08.92308986-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleCreateTemplate_Success (0.19s)
=== RUN   TestHandleCreateTemplate_ValidationErrors
{"time":"2025-12-22T22:21:09.118537165-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleCreateTemplate_ValidationErrors/missing_content
=== RUN   TestHandleCreateTemplate_ValidationErrors/invalid_format
--- PASS: TestHandleCreateTemplate_ValidationErrors (0.20s)
    --- PASS: TestHandleCreateTemplate_ValidationErrors/missing_content (0.00s)
    --- PASS: TestHandleCreateTemplate_ValidationErrors/invalid_format (0.00s)
=== RUN   TestHandleCreateAgent_Success
{"time":"2025-12-22T22:21:09.310148915-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleCreateAgent_Success (0.19s)
=== RUN   TestHandleCreateAgent_ValidationErrors
{"time":"2025-12-22T22:21:09.498724181-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleCreateAgent_ValidationErrors/missing_goals
=== RUN   TestHandleCreateAgent_ValidationErrors/missing_actions
--- PASS: TestHandleCreateAgent_ValidationErrors (0.19s)
    --- PASS: TestHandleCreateAgent_ValidationErrors/missing_goals (0.00s)
    --- PASS: TestHandleCreateAgent_ValidationErrors/missing_actions (0.00s)
=== RUN   TestHandleCreateMemory_Success
{"time":"2025-12-22T22:21:09.68923254-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleCreateMemory_Success (0.19s)
=== RUN   TestHandleCreateMemory_ValidationErrors
{"time":"2025-12-22T22:21:09.880921893-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleCreateMemory_ValidationErrors/missing_content
--- PASS: TestHandleCreateMemory_ValidationErrors (0.19s)
    --- PASS: TestHandleCreateMemory_ValidationErrors/missing_content (0.00s)
=== RUN   TestHandleCreateEnsemble_Success
{"time":"2025-12-22T22:21:10.064599223-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleCreateEnsemble_Success (0.18s)
=== RUN   TestHandleCreateEnsemble_ValidationErrors
{"time":"2025-12-22T22:21:10.255496972-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
=== RUN   TestHandleCreateEnsemble_ValidationErrors/missing_members
=== RUN   TestHandleCreateEnsemble_ValidationErrors/missing_aggregation_strategy
=== RUN   TestHandleCreateEnsemble_ValidationErrors/invalid_execution_mode
--- PASS: TestHandleCreateEnsemble_ValidationErrors (0.19s)
    --- PASS: TestHandleCreateEnsemble_ValidationErrors/missing_members (0.00s)
    --- PASS: TestHandleCreateEnsemble_ValidationErrors/missing_aggregation_strategy (0.00s)
    --- PASS: TestHandleCreateEnsemble_ValidationErrors/invalid_execution_mode (0.00s)
=== RUN   TestHandleGetCurrentUser_NoUser
{"time":"2025-12-22T22:21:10.255874098-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:10.446574232-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:21:10.446622352-03:00","level":"INFO","msg":"Retrieved current user context","user":"","is_authenticated":false}
--- PASS: TestHandleGetCurrentUser_NoUser (0.19s)
=== RUN   TestHandleSetUserContext
{"time":"2025-12-22T22:21:10.446733354-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:10.643641802-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:21:10.643720274-03:00","level":"INFO","msg":"User context updated","user":"alice"}
{"time":"2025-12-22T22:21:10.643756135-03:00","level":"INFO","msg":"User context set","user":"alice","metadata_count":2}
--- PASS: TestHandleSetUserContext (0.20s)
=== RUN   TestHandleSetUserContext_EmptyUsername
{"time":"2025-12-22T22:21:10.643947743-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:10.84776616-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
--- PASS: TestHandleSetUserContext_EmptyUsername (0.20s)
=== RUN   TestHandleGetCurrentUser_WithUser
{"time":"2025-12-22T22:21:10.847916055-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:11.040143787-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:21:11.040188636-03:00","level":"INFO","msg":"User context updated","user":"bob"}
{"time":"2025-12-22T22:21:11.040213583-03:00","level":"INFO","msg":"User context set","user":"bob","metadata_count":1}
{"time":"2025-12-22T22:21:11.040257475-03:00","level":"INFO","msg":"Retrieved current user context","user":"bob","is_authenticated":true}
--- PASS: TestHandleGetCurrentUser_WithUser (0.19s)
=== RUN   TestHandleClearUserContext
{"time":"2025-12-22T22:21:11.040372806-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:11.233099301-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:21:11.233144746-03:00","level":"INFO","msg":"User context updated","user":"charlie"}
{"time":"2025-12-22T22:21:11.233165438-03:00","level":"INFO","msg":"User context set","user":"charlie","metadata_count":1}
{"time":"2025-12-22T22:21:11.233197028-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:11.233210691-03:00","level":"INFO","msg":"User context cleared","previous_user":"charlie"}
--- PASS: TestHandleClearUserContext (0.19s)
=== RUN   TestHandleClearUserContext_NoConfirmation
{"time":"2025-12-22T22:21:11.233319549-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:11.423788197-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:21:11.423832064-03:00","level":"INFO","msg":"User context updated","user":"dave"}
{"time":"2025-12-22T22:21:11.423853518-03:00","level":"INFO","msg":"User context set","user":"dave","metadata_count":0}
--- PASS: TestHandleClearUserContext_NoConfirmation (0.19s)
=== RUN   TestUserSession_Concurrent
{"time":"2025-12-22T22:21:11.423966464-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:11.42401138-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424042833-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424067687-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42408828-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424106534-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424123216-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424141373-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424161768-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424179978-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424197635-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424214469-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424230197-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424255745-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.424313982-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.424337528-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.424363446-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42438368-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.424401569-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.424422208-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.424444261-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.424472118-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424510236-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424531898-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424550122-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42456682-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424584509-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424603668-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424619622-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424635574-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424651817-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424683538-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424706884-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424727368-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424745277-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424765653-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424783215-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424804401-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42482217-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424842085-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424861329-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424884126-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42490636-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424930937-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424949542-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424969065-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.424987362-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425016942-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425036355-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425055369-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425074966-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42509566-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425114454-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425138244-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42515598-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425176811-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425217367-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425249507-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42527419-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425292128-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425310577-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42532705-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425342869-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425360756-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425378145-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425404949-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425427549-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425443597-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425460004-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425478697-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425500646-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425519496-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425534907-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425552257-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425575685-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425598653-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425621476-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425646675-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425662713-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425678195-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425693451-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425724808-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425761123-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425784383-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425806646-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.425830592-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425856361-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425874618-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425890799-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425909651-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42592855-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.425947124-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42596412-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42597981-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426014234-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42605888-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426083352-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426111427-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426141409-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426174737-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426203026-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426241882-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426262108-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426283733-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426312695-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426342907-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426372684-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426397659-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426415661-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426438714-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426481177-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426508713-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426533127-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426562931-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426590737-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42662115-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426643217-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426666776-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42669666-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426725291-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.426944798-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426974402-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.426995062-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427028609-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427046845-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427068326-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427085572-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427104619-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427121533-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42713937-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427160344-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427177754-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427194844-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42721029-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427225673-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427240534-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427263605-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427282582-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427299348-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427329678-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42735481-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427378133-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427398157-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427419823-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427441234-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427461089-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427480398-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427499924-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427523481-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427540746-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427567182-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427617201-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427644814-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427664381-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427682894-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427703175-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427718703-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427737401-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427755557-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427776665-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427797382-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427816125-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427834328-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427853376-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427872077-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427890318-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427908393-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427925051-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.427951532-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427970464-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.427986511-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428009498-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428027213-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428043286-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428058706-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428075555-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428093007-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428111846-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428133209-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428150223-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428167575-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428183652-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428199013-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428214359-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.428248003-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.428269175-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42828784-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.428303739-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.42832577-03:00","level":"INFO","msg":"User context updated","user":"user2"}
{"time":"2025-12-22T22:21:11.428347267-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428365806-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428388596-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428404404-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428421816-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.42843831-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428455384-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428478316-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428497981-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428513396-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428530106-03:00","level":"INFO","msg":"User context updated","user":"user1"}
{"time":"2025-12-22T22:21:11.428547298-03:00","level":"INFO","msg":"User context updated","user":"user1"}
--- PASS: TestUserSession_Concurrent (0.00s)
=== RUN   TestUserSession_IsAuthenticated
{"time":"2025-12-22T22:21:11.428644166-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:11.428670179-03:00","level":"INFO","msg":"User context updated","user":"testuser"}
{"time":"2025-12-22T22:21:11.428688619-03:00","level":"INFO","msg":"User context cleared"}
--- PASS: TestUserSession_IsAuthenticated (0.00s)
=== RUN   TestHandleSetUserContext_WithoutMetadata
{"time":"2025-12-22T22:21:11.428771533-03:00","level":"INFO","msg":"User context cleared"}
{"time":"2025-12-22T22:21:11.614869032-03:00","level":"INFO","msg":"MCP Resources Protocol disabled (set --resources-enabled=true to enable)"}
{"time":"2025-12-22T22:21:11.614918763-03:00","level":"INFO","msg":"User context updated","user":"eve"}
{"time":"2025-12-22T22:21:11.614941897-03:00","level":"INFO","msg":"User context set","user":"eve","metadata_count":0}
--- PASS: TestHandleSetUserContext_WithoutMetadata (0.19s)
PASS
coverage: 59.2% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/mcp	(cached)	coverage: 59.2% of statements
	github.com/fsvxavier/nexs-mcp/internal/mcp/resources		coverage: 0.0% of statements
=== RUN   TestGitHubMapper_LocalToGitHubPath
=== RUN   TestGitHubMapper_LocalToGitHubPath/Valid_local_path
=== RUN   TestGitHubMapper_LocalToGitHubPath/Private_user_path
=== RUN   TestGitHubMapper_LocalToGitHubPath/Path_outside_base_directory
--- PASS: TestGitHubMapper_LocalToGitHubPath (0.00s)
    --- PASS: TestGitHubMapper_LocalToGitHubPath/Valid_local_path (0.00s)
    --- PASS: TestGitHubMapper_LocalToGitHubPath/Private_user_path (0.00s)
    --- PASS: TestGitHubMapper_LocalToGitHubPath/Path_outside_base_directory (0.00s)
=== RUN   TestGitHubMapper_GitHubToLocalPath
=== RUN   TestGitHubMapper_GitHubToLocalPath/Valid_GitHub_path
=== RUN   TestGitHubMapper_GitHubToLocalPath/Private_user_path
=== RUN   TestGitHubMapper_GitHubToLocalPath/Invalid_GitHub_path_-_missing_elements_prefix
--- PASS: TestGitHubMapper_GitHubToLocalPath (0.00s)
    --- PASS: TestGitHubMapper_GitHubToLocalPath/Valid_GitHub_path (0.00s)
    --- PASS: TestGitHubMapper_GitHubToLocalPath/Private_user_path (0.00s)
    --- PASS: TestGitHubMapper_GitHubToLocalPath/Invalid_GitHub_path_-_missing_elements_prefix (0.00s)
=== RUN   TestGitHubMapper_ParseGitHubPath
=== RUN   TestGitHubMapper_ParseGitHubPath/Valid_GitHub_path
=== RUN   TestGitHubMapper_ParseGitHubPath/Private_user_path
=== RUN   TestGitHubMapper_ParseGitHubPath/Invalid_-_too_few_parts
=== RUN   TestGitHubMapper_ParseGitHubPath/Invalid_-_wrong_prefix
=== RUN   TestGitHubMapper_ParseGitHubPath/Invalid_-_bad_date_format
=== RUN   TestGitHubMapper_ParseGitHubPath/Invalid_-_missing_yaml_extension
--- PASS: TestGitHubMapper_ParseGitHubPath (0.00s)
    --- PASS: TestGitHubMapper_ParseGitHubPath/Valid_GitHub_path (0.00s)
    --- PASS: TestGitHubMapper_ParseGitHubPath/Private_user_path (0.00s)
    --- PASS: TestGitHubMapper_ParseGitHubPath/Invalid_-_too_few_parts (0.00s)
    --- PASS: TestGitHubMapper_ParseGitHubPath/Invalid_-_wrong_prefix (0.00s)
    --- PASS: TestGitHubMapper_ParseGitHubPath/Invalid_-_bad_date_format (0.00s)
    --- PASS: TestGitHubMapper_ParseGitHubPath/Invalid_-_missing_yaml_extension (0.00s)
=== RUN   TestGitHubMapper_ElementToGitHubPath
--- PASS: TestGitHubMapper_ElementToGitHubPath (0.00s)
=== RUN   TestGitHubMapper_FilterElementPaths
--- PASS: TestGitHubMapper_FilterElementPaths (0.00s)
=== RUN   TestGitHubMapper_GetAuthorFromPath
=== RUN   TestGitHubMapper_GetAuthorFromPath/Valid_path
=== RUN   TestGitHubMapper_GetAuthorFromPath/Private_user
=== RUN   TestGitHubMapper_GetAuthorFromPath/Invalid_path
--- PASS: TestGitHubMapper_GetAuthorFromPath (0.00s)
    --- PASS: TestGitHubMapper_GetAuthorFromPath/Valid_path (0.00s)
    --- PASS: TestGitHubMapper_GetAuthorFromPath/Private_user (0.00s)
    --- PASS: TestGitHubMapper_GetAuthorFromPath/Invalid_path (0.00s)
=== RUN   TestGitHubMapper_GetTypeFromPath
=== RUN   TestGitHubMapper_GetTypeFromPath/Persona_type
=== RUN   TestGitHubMapper_GetTypeFromPath/Skill_type
=== RUN   TestGitHubMapper_GetTypeFromPath/Invalid_path
--- PASS: TestGitHubMapper_GetTypeFromPath (0.00s)
    --- PASS: TestGitHubMapper_GetTypeFromPath/Persona_type (0.00s)
    --- PASS: TestGitHubMapper_GetTypeFromPath/Skill_type (0.00s)
    --- PASS: TestGitHubMapper_GetTypeFromPath/Invalid_path (0.00s)
=== RUN   TestGitHubMapper_GroupPathsByAuthor
--- PASS: TestGitHubMapper_GroupPathsByAuthor (0.00s)
=== RUN   TestGitHubMapper_GroupPathsByType
--- PASS: TestGitHubMapper_GroupPathsByType (0.00s)
=== RUN   TestGenerateCommitMessage
--- PASS: TestGenerateCommitMessage (0.00s)
=== RUN   TestGitHubSync_Push_Success
    github_sync_test.go:146: Created element with ID: persona_Test Persona_20251222-222029
    github_sync_test.go:147: Element metadata: {ID:persona_Test Persona_20251222-222029 Type:persona Name:Test Persona Description:Test description Version:1.0.0 Author:testuser Tags:[] IsActive:true CreatedAt:2025-12-22 22:20:29.085800013 -0300 -03 m=+0.006812734 UpdatedAt:2025-12-22 22:20:29.085800013 -0300 -03 m=+0.006812734 Custom:map[]}
--- PASS: TestGitHubSync_Push_Success (0.00s)
=== RUN   TestGitHubSync_Pull_Success
--- PASS: TestGitHubSync_Pull_Success (0.00s)
=== RUN   TestGitHubSync_ConflictDetection
--- PASS: TestGitHubSync_ConflictDetection (0.00s)
=== RUN   TestGitHubSync_ConflictResolution_LocalWins
--- PASS: TestGitHubSync_ConflictResolution_LocalWins (0.00s)
=== RUN   TestGitHubSync_ConflictResolution_RemoteWins
--- PASS: TestGitHubSync_ConflictResolution_RemoteWins (0.00s)
=== RUN   TestGitHubSync_ConflictResolution_Manual
--- PASS: TestGitHubSync_ConflictResolution_Manual (0.00s)
=== RUN   TestGitHubSync_SyncBidirectional
--- PASS: TestGitHubSync_SyncBidirectional (0.00s)
=== RUN   TestGitHubSync_EmptyRepository
--- PASS: TestGitHubSync_EmptyRepository (0.00s)
=== RUN   TestGitHubSync_MultipleElements
--- PASS: TestGitHubSync_MultipleElements (2.20s)
PASS
coverage: 75.6% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/portfolio	(cached)	coverage: 75.6% of statements
=== RUN   TestNewInstantiationEngine
--- PASS: TestNewInstantiationEngine (0.00s)
=== RUN   TestNewInstantiationEngine_WithOptions
--- PASS: TestNewInstantiationEngine_WithOptions (0.00s)
=== RUN   TestInstantiate_SimpleTemplate
--- PASS: TestInstantiate_SimpleTemplate (0.00s)
=== RUN   TestInstantiate_WithDefaultVariable
--- PASS: TestInstantiate_WithDefaultVariable (0.00s)
=== RUN   TestInstantiate_MissingRequiredVariable
--- PASS: TestInstantiate_MissingRequiredVariable (0.00s)
=== RUN   TestInstantiate_WithHelpers
--- PASS: TestInstantiate_WithHelpers (0.00s)
=== RUN   TestInstantiate_ConditionalTemplate
--- PASS: TestInstantiate_ConditionalTemplate (0.00s)
=== RUN   TestInstantiate_LoopTemplate
--- PASS: TestInstantiate_LoopTemplate (0.00s)
=== RUN   TestInstantiate_EmptyTemplate
--- PASS: TestInstantiate_EmptyTemplate (0.00s)
=== RUN   TestInstantiate_ComplexTemplate
--- PASS: TestInstantiate_ComplexTemplate (0.00s)
=== RUN   TestEngineOptions
--- PASS: TestEngineOptions (0.00s)
=== RUN   TestInstantiationResult
--- PASS: TestInstantiationResult (0.00s)
=== RUN   TestNewTemplateValidator
--- PASS: TestNewTemplateValidator (0.00s)
=== RUN   TestValidateSyntax_ValidTemplate
--- PASS: TestValidateSyntax_ValidTemplate (0.00s)
=== RUN   TestValidateSyntax_TemplateTooBig
--- PASS: TestValidateSyntax_TemplateTooBig (0.03s)
=== RUN   TestValidateSyntax_TooManyVariables
--- PASS: TestValidateSyntax_TooManyVariables (0.00s)
=== RUN   TestCheckBalancedDelimiters_Balanced
=== RUN   TestCheckBalancedDelimiters_Balanced/Simple_variable
=== RUN   TestCheckBalancedDelimiters_Balanced/Multiple_variables
=== RUN   TestCheckBalancedDelimiters_Balanced/Block_helper
=== RUN   TestCheckBalancedDelimiters_Balanced/Nested_blocks
--- PASS: TestCheckBalancedDelimiters_Balanced (0.00s)
    --- PASS: TestCheckBalancedDelimiters_Balanced/Simple_variable (0.00s)
    --- PASS: TestCheckBalancedDelimiters_Balanced/Multiple_variables (0.00s)
    --- PASS: TestCheckBalancedDelimiters_Balanced/Block_helper (0.00s)
    --- PASS: TestCheckBalancedDelimiters_Balanced/Nested_blocks (0.00s)
=== RUN   TestCheckBalancedDelimiters_Unbalanced
=== RUN   TestCheckBalancedDelimiters_Unbalanced/Unclosed_opening
=== RUN   TestCheckBalancedDelimiters_Unbalanced/Unexpected_closing
=== RUN   TestCheckBalancedDelimiters_Unbalanced/Unclosed_block
=== RUN   TestCheckBalancedDelimiters_Unbalanced/Mismatched_block
=== RUN   TestCheckBalancedDelimiters_Unbalanced/Extra_closing_block
--- PASS: TestCheckBalancedDelimiters_Unbalanced (0.00s)
    --- PASS: TestCheckBalancedDelimiters_Unbalanced/Unclosed_opening (0.00s)
    --- PASS: TestCheckBalancedDelimiters_Unbalanced/Unexpected_closing (0.00s)
    --- PASS: TestCheckBalancedDelimiters_Unbalanced/Unclosed_block (0.00s)
    --- PASS: TestCheckBalancedDelimiters_Unbalanced/Mismatched_block (0.00s)
    --- PASS: TestCheckBalancedDelimiters_Unbalanced/Extra_closing_block (0.00s)
=== RUN   TestValidateComprehensive_ValidTemplate
--- PASS: TestValidateComprehensive_ValidTemplate (0.00s)
=== RUN   TestValidateComprehensive_MissingRequiredVariable
--- PASS: TestValidateComprehensive_MissingRequiredVariable (0.00s)
=== RUN   TestValidateComprehensive_WrongVariableType
--- PASS: TestValidateComprehensive_WrongVariableType (0.00s)
=== RUN   TestValidateComprehensive_InvalidVariableName
--- PASS: TestValidateComprehensive_InvalidVariableName (0.00s)
=== RUN   TestValidateComprehensive_WithDefault
--- PASS: TestValidateComprehensive_WithDefault (0.00s)
=== RUN   TestValidateComprehensive_UndefinedVariableWarning
--- PASS: TestValidateComprehensive_UndefinedVariableWarning (0.00s)
=== RUN   TestCheckVariableType_String
--- PASS: TestCheckVariableType_String (0.00s)
=== RUN   TestCheckVariableType_Number
--- PASS: TestCheckVariableType_Number (0.00s)
=== RUN   TestCheckVariableType_Boolean
--- PASS: TestCheckVariableType_Boolean (0.00s)
=== RUN   TestCheckVariableType_Array
--- PASS: TestCheckVariableType_Array (0.00s)
=== RUN   TestCheckVariableType_Object
--- PASS: TestCheckVariableType_Object (0.00s)
=== RUN   TestCheckVariableType_UnknownType
--- PASS: TestCheckVariableType_UnknownType (0.00s)
=== RUN   TestIsValidVariableName
=== RUN   TestIsValidVariableName/Valid_simple
=== RUN   TestIsValidVariableName/Valid_with_underscore
=== RUN   TestIsValidVariableName/Valid_with_number
=== RUN   TestIsValidVariableName/Valid_uppercase
=== RUN   TestIsValidVariableName/Valid_mixed_case
=== RUN   TestIsValidVariableName/Invalid_starts_with_number
=== RUN   TestIsValidVariableName/Invalid_empty
=== RUN   TestIsValidVariableName/Invalid_with_hyphen
=== RUN   TestIsValidVariableName/Invalid_with_space
=== RUN   TestIsValidVariableName/Invalid_with_special_char
--- PASS: TestIsValidVariableName (0.00s)
    --- PASS: TestIsValidVariableName/Valid_simple (0.00s)
    --- PASS: TestIsValidVariableName/Valid_with_underscore (0.00s)
    --- PASS: TestIsValidVariableName/Valid_with_number (0.00s)
    --- PASS: TestIsValidVariableName/Valid_uppercase (0.00s)
    --- PASS: TestIsValidVariableName/Valid_mixed_case (0.00s)
    --- PASS: TestIsValidVariableName/Invalid_starts_with_number (0.00s)
    --- PASS: TestIsValidVariableName/Invalid_empty (0.00s)
    --- PASS: TestIsValidVariableName/Invalid_with_hyphen (0.00s)
    --- PASS: TestIsValidVariableName/Invalid_with_space (0.00s)
    --- PASS: TestIsValidVariableName/Invalid_with_special_char (0.00s)
=== RUN   TestIsHelper
=== RUN   TestIsHelper/if
=== RUN   TestIsHelper/unless
=== RUN   TestIsHelper/each
=== RUN   TestIsHelper/eq
=== RUN   TestIsHelper/upper
=== RUN   TestIsHelper/unknown
=== RUN   TestIsHelper/custom
--- PASS: TestIsHelper (0.00s)
    --- PASS: TestIsHelper/if (0.00s)
    --- PASS: TestIsHelper/unless (0.00s)
    --- PASS: TestIsHelper/each (0.00s)
    --- PASS: TestIsHelper/eq (0.00s)
    --- PASS: TestIsHelper/upper (0.00s)
    --- PASS: TestIsHelper/unknown (0.00s)
    --- PASS: TestIsHelper/custom (0.00s)
=== RUN   TestFindUndefinedVariables
=== RUN   TestFindUndefinedVariables/No_undefined
=== RUN   TestFindUndefinedVariables/One_undefined
=== RUN   TestFindUndefinedVariables/Multiple_undefined
--- PASS: TestFindUndefinedVariables (0.00s)
    --- PASS: TestFindUndefinedVariables/No_undefined (0.00s)
    --- PASS: TestFindUndefinedVariables/One_undefined (0.00s)
    --- PASS: TestFindUndefinedVariables/Multiple_undefined (0.00s)
=== RUN   TestValidateOutput
=== RUN   TestValidateOutput/json
=== RUN   TestValidateOutput/yaml
=== RUN   TestValidateOutput/markdown
=== RUN   TestValidateOutput/text
--- PASS: TestValidateOutput (0.00s)
    --- PASS: TestValidateOutput/json (0.00s)
    --- PASS: TestValidateOutput/yaml (0.00s)
    --- PASS: TestValidateOutput/markdown (0.00s)
    --- PASS: TestValidateOutput/text (0.00s)
=== RUN   TestValidationError_Structure
--- PASS: TestValidationError_Structure (0.00s)
=== RUN   TestValidationResult_Structure
--- PASS: TestValidationResult_Structure (0.00s)
=== RUN   TestCheckBalancedDelimiters_NestedBlocks
--- PASS: TestCheckBalancedDelimiters_NestedBlocks (0.00s)
=== RUN   TestCheckBalancedDelimiters_ComplexNesting
--- PASS: TestCheckBalancedDelimiters_ComplexNesting (0.00s)
=== RUN   TestValidateComprehensive_MultipleErrors
--- PASS: TestValidateComprehensive_MultipleErrors (0.00s)
PASS
coverage: 30.6% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/template	(cached)	coverage: 30.6% of statements
=== RUN   TestNewStandardLibrary
--- PASS: TestNewStandardLibrary (0.00s)
=== RUN   TestStandardLibrary_Load
--- PASS: TestStandardLibrary_Load (0.02s)
=== RUN   TestStandardLibrary_Get_AutoLoad
--- PASS: TestStandardLibrary_Get_AutoLoad (0.02s)
=== RUN   TestStandardLibrary_Get_NotFound
--- PASS: TestStandardLibrary_Get_NotFound (0.02s)
=== RUN   TestStandardLibrary_GetAll
--- PASS: TestStandardLibrary_GetAll (0.02s)
=== RUN   TestStandardLibrary_GetIDs
--- PASS: TestStandardLibrary_GetIDs (0.02s)
=== RUN   TestStandardLibrary_LoadedState
--- PASS: TestStandardLibrary_LoadedState (0.02s)
=== RUN   TestGetString
=== RUN   TestGetString/Valid_string
=== RUN   TestGetString/Missing_key
=== RUN   TestGetString/Wrong_type
--- PASS: TestGetString (0.00s)
    --- PASS: TestGetString/Valid_string (0.00s)
    --- PASS: TestGetString/Missing_key (0.00s)
    --- PASS: TestGetString/Wrong_type (0.00s)
=== RUN   TestGetBool
=== RUN   TestGetBool/Valid_true
=== RUN   TestGetBool/Valid_false
=== RUN   TestGetBool/Missing_key
=== RUN   TestGetBool/Wrong_type
--- PASS: TestGetBool (0.00s)
    --- PASS: TestGetBool/Valid_true (0.00s)
    --- PASS: TestGetBool/Valid_false (0.00s)
    --- PASS: TestGetBool/Missing_key (0.00s)
    --- PASS: TestGetBool/Wrong_type (0.00s)
=== RUN   TestParseTemplate_MissingName
--- PASS: TestParseTemplate_MissingName (0.00s)
=== RUN   TestParseTemplate_ValidTemplate
--- PASS: TestParseTemplate_ValidTemplate (0.00s)
=== RUN   TestParseTemplate_WithVariables
--- PASS: TestParseTemplate_WithVariables (0.00s)
=== RUN   TestParseTemplate_MinimalTemplate
--- PASS: TestParseTemplate_MinimalTemplate (0.00s)
=== RUN   TestParseTemplate_InvalidVariables
--- PASS: TestParseTemplate_InvalidVariables (0.00s)
=== RUN   TestStandardLibrary_LoadEmptyDirectory
--- PASS: TestStandardLibrary_LoadEmptyDirectory (0.02s)
=== RUN   TestStandardLibrary_GetAll_Empty
--- PASS: TestStandardLibrary_GetAll_Empty (0.01s)
=== RUN   TestStandardLibrary_GetIDs_Empty
--- PASS: TestStandardLibrary_GetIDs_Empty (0.01s)
=== RUN   TestStandardLibrary_MultipleLoads
--- PASS: TestStandardLibrary_MultipleLoads (0.02s)
=== RUN   TestParseTemplate_DefaultFormat
--- PASS: TestParseTemplate_DefaultFormat (0.00s)
=== RUN   TestStandardLibrary_ConcurrentAccess
--- PASS: TestStandardLibrary_ConcurrentAccess (0.02s)
=== RUN   TestGetString_NilMap
--- PASS: TestGetString_NilMap (0.00s)
=== RUN   TestGetBool_NilMap
--- PASS: TestGetBool_NilMap (0.00s)
=== RUN   TestParseTemplate_WithEmptyVariablesList
--- PASS: TestParseTemplate_WithEmptyVariablesList (0.00s)
=== RUN   TestParseTemplate_VariablesNotArray
--- PASS: TestParseTemplate_VariablesNotArray (0.00s)
PASS
coverage: 87.0% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/template/stdlib	(cached)	coverage: 87.0% of statements
=== RUN   TestAgentValidator_SupportedType
--- PASS: TestAgentValidator_SupportedType (0.00s)
=== RUN   TestAgentValidator_Validate_Success
--- PASS: TestAgentValidator_Validate_Success (0.00s)
=== RUN   TestAgentValidator_Validate_ComprehensiveLevel
--- PASS: TestAgentValidator_Validate_ComprehensiveLevel (0.00s)
=== RUN   TestAgentValidator_Validate_StrictLevel
--- PASS: TestAgentValidator_Validate_StrictLevel (0.00s)
=== RUN   TestAgentValidator_Validate_InvalidType
--- PASS: TestAgentValidator_Validate_InvalidType (0.00s)
=== RUN   TestEnsembleValidator_SupportedType
--- PASS: TestEnsembleValidator_SupportedType (0.00s)
=== RUN   TestEnsembleValidator_Validate_Success
--- PASS: TestEnsembleValidator_Validate_Success (0.00s)
=== RUN   TestEnsembleValidator_Validate_ComprehensiveLevel
--- PASS: TestEnsembleValidator_Validate_ComprehensiveLevel (0.00s)
=== RUN   TestEnsembleValidator_Validate_StrictLevel
--- PASS: TestEnsembleValidator_Validate_StrictLevel (0.00s)
=== RUN   TestEnsembleValidator_Validate_InvalidType
--- PASS: TestEnsembleValidator_Validate_InvalidType (0.00s)
=== RUN   TestMemoryValidator_SupportedType
--- PASS: TestMemoryValidator_SupportedType (0.00s)
=== RUN   TestMemoryValidator_Validate_Success
--- PASS: TestMemoryValidator_Validate_Success (0.00s)
=== RUN   TestMemoryValidator_Validate_ComprehensiveLevel
--- PASS: TestMemoryValidator_Validate_ComprehensiveLevel (0.00s)
=== RUN   TestMemoryValidator_Validate_StrictLevel
--- PASS: TestMemoryValidator_Validate_StrictLevel (0.00s)
=== RUN   TestMemoryValidator_Validate_InvalidType
--- PASS: TestMemoryValidator_Validate_InvalidType (0.00s)
=== RUN   TestPersonaValidator_SupportedType
--- PASS: TestPersonaValidator_SupportedType (0.00s)
=== RUN   TestPersonaValidator_Validate_Success
--- PASS: TestPersonaValidator_Validate_Success (0.00s)
=== RUN   TestPersonaValidator_Validate_ComprehensiveLevel
--- PASS: TestPersonaValidator_Validate_ComprehensiveLevel (0.00s)
=== RUN   TestPersonaValidator_Validate_StrictLevel
--- PASS: TestPersonaValidator_Validate_StrictLevel (0.00s)
=== RUN   TestPersonaValidator_Validate_InvalidType
--- PASS: TestPersonaValidator_Validate_InvalidType (0.00s)
=== RUN   TestSkillValidator_SupportedType
--- PASS: TestSkillValidator_SupportedType (0.00s)
=== RUN   TestSkillValidator_Validate_Success
--- PASS: TestSkillValidator_Validate_Success (0.00s)
=== RUN   TestSkillValidator_Validate_ComprehensiveLevel
--- PASS: TestSkillValidator_Validate_ComprehensiveLevel (0.00s)
=== RUN   TestSkillValidator_Validate_StrictLevel
--- PASS: TestSkillValidator_Validate_StrictLevel (0.00s)
=== RUN   TestSkillValidator_Validate_InvalidType
--- PASS: TestSkillValidator_Validate_InvalidType (0.00s)
=== RUN   TestTemplateValidator_SupportedType
--- PASS: TestTemplateValidator_SupportedType (0.00s)
=== RUN   TestTemplateValidator_Validate_Success
--- PASS: TestTemplateValidator_Validate_Success (0.00s)
=== RUN   TestTemplateValidator_Validate_ComprehensiveLevel
--- PASS: TestTemplateValidator_Validate_ComprehensiveLevel (0.00s)
=== RUN   TestTemplateValidator_Validate_StrictLevel
--- PASS: TestTemplateValidator_Validate_StrictLevel (0.00s)
=== RUN   TestTemplateValidator_Validate_InvalidType
--- PASS: TestTemplateValidator_Validate_InvalidType (0.00s)
=== RUN   TestValidationResult
--- PASS: TestValidationResult (0.00s)
=== RUN   TestValidationResultWithSuggestion
--- PASS: TestValidationResultWithSuggestion (0.00s)
=== RUN   TestValidatorRegistry
--- PASS: TestValidatorRegistry (0.00s)
=== RUN   TestValidatorRegistry_InvalidType
--- PASS: TestValidatorRegistry_InvalidType (0.00s)
=== RUN   TestValidationLevels
--- PASS: TestValidationLevels (0.00s)
=== RUN   TestValidationSeverities
--- PASS: TestValidationSeverities (0.00s)
=== RUN   TestPersonaValidation_Basic
--- PASS: TestPersonaValidation_Basic (0.00s)
=== RUN   TestPersonaValidation_MissingRequiredFields
--- PASS: TestPersonaValidation_MissingRequiredFields (0.00s)
=== RUN   TestSkillValidation_Basic
--- PASS: TestSkillValidation_Basic (0.00s)
=== RUN   TestTemplateValidation_Basic
--- PASS: TestTemplateValidation_Basic (0.00s)
=== RUN   TestValidationIssueStructure
--- PASS: TestValidationIssueStructure (0.00s)
PASS
coverage: 66.3% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/validation	(cached)	coverage: 66.3% of statements
=== RUN   TestStore_AddAndGet
--- PASS: TestStore_AddAndGet (0.00s)
=== RUN   TestStore_AddBatch
--- PASS: TestStore_AddBatch (0.00s)
=== RUN   TestStore_Delete
--- PASS: TestStore_Delete (0.00s)
=== RUN   TestStore_Search
--- PASS: TestStore_Search (0.00s)
=== RUN   TestStore_SearchByVector
--- PASS: TestStore_SearchByVector (0.00s)
=== RUN   TestStore_Clear
--- PASS: TestStore_Clear (0.00s)
=== RUN   TestStore_List
--- PASS: TestStore_List (0.00s)
=== RUN   TestStore_SimilarityMetrics
=== RUN   TestStore_SimilarityMetrics/cosine_similarity
=== RUN   TestStore_SimilarityMetrics/euclidean_distance
=== RUN   TestStore_SimilarityMetrics/dot_product
--- PASS: TestStore_SimilarityMetrics (0.00s)
    --- PASS: TestStore_SimilarityMetrics/cosine_similarity (0.00s)
    --- PASS: TestStore_SimilarityMetrics/euclidean_distance (0.00s)
    --- PASS: TestStore_SimilarityMetrics/dot_product (0.00s)
=== RUN   TestStore_ErrorCases
=== RUN   TestStore_ErrorCases/empty_ID
=== RUN   TestStore_ErrorCases/empty_text
=== RUN   TestStore_ErrorCases/empty_query
=== RUN   TestStore_ErrorCases/invalid_k
=== RUN   TestStore_ErrorCases/get_non-existent
=== RUN   TestStore_ErrorCases/delete_non-existent
=== RUN   TestStore_ErrorCases/empty_batch
--- PASS: TestStore_ErrorCases (0.00s)
    --- PASS: TestStore_ErrorCases/empty_ID (0.00s)
    --- PASS: TestStore_ErrorCases/empty_text (0.00s)
    --- PASS: TestStore_ErrorCases/empty_query (0.00s)
    --- PASS: TestStore_ErrorCases/invalid_k (0.00s)
    --- PASS: TestStore_ErrorCases/get_non-existent (0.00s)
    --- PASS: TestStore_ErrorCases/delete_non-existent (0.00s)
    --- PASS: TestStore_ErrorCases/empty_batch (0.00s)
=== RUN   TestCosineSimilarity
--- PASS: TestCosineSimilarity (0.00s)
=== RUN   TestEuclideanDistance
--- PASS: TestEuclideanDistance (0.00s)
=== RUN   TestDotProduct
--- PASS: TestDotProduct (0.00s)
PASS
coverage: 83.9% of statements
ok  	github.com/fsvxavier/nexs-mcp/internal/vectorstore	(cached)	coverage: 83.9% of statements
	github.com/fsvxavier/nexs-mcp/internal/version		coverage: 0.0% of statements
=== RUN   TestBidirectionalRelationships
    relationships_integration_test.go:67:  Bidirectional relationships working correctly
--- PASS: TestBidirectionalRelationships (0.00s)
=== RUN   TestRecursiveExpansion
    relationships_integration_test.go:124:  Recursive expansion working correctly
--- PASS: TestRecursiveExpansion (0.00s)
=== RUN   TestRelationshipInference
    relationships_integration_test.go:202:  Relationship inference working correctly
--- PASS: TestRelationshipInference (0.00s)
=== RUN   TestRecommendationEngine
    relationships_integration_test.go:264:  Recommendation engine working correctly
--- PASS: TestRecommendationEngine (0.00s)
=== RUN   TestCacheEfficiency
    relationships_integration_test.go:308:  Cache efficiency working correctly
--- PASS: TestCacheEfficiency (0.00s)
=== RUN   TestRelationshipIndexStats
    relationships_integration_test.go:341:  Relationship index stats working correctly
    relationships_integration_test.go:342:   Forward entries: 5
    relationships_integration_test.go:343:   Reverse entries: 2
--- PASS: TestRelationshipIndexStats (0.00s)
=== RUN   TestRegistryCacheHit
--- PASS: TestRegistryCacheHit (0.01s)
=== RUN   TestCacheExpiration
--- PASS: TestCacheExpiration (0.16s)
=== RUN   TestCacheClear
--- PASS: TestCacheClear (0.01s)
=== RUN   TestCacheHitRate
--- PASS: TestCacheHitRate (0.01s)
=== RUN   TestCacheInvalidation
--- PASS: TestCacheInvalidation (0.02s)
=== RUN   TestSimpleVariableSubstitution
--- PASS: TestSimpleVariableSubstitution (0.00s)
=== RUN   TestConditionalBlocks
--- PASS: TestConditionalBlocks (0.00s)
=== RUN   TestIterationLoops
--- PASS: TestIterationLoops (0.00s)
=== RUN   TestHelperFunctions
--- PASS: TestHelperFunctions (0.00s)
=== RUN   TestComparisonHelpers
--- PASS: TestComparisonHelpers (0.00s)
=== RUN   TestDefaultValues
--- PASS: TestDefaultValues (0.00s)
=== RUN   TestNestedTemplates
--- PASS: TestNestedTemplates (0.00s)
=== RUN   TestArrayHelpers
--- PASS: TestArrayHelpers (0.00s)
=== RUN   TestLogicalHelpers
--- PASS: TestLogicalHelpers (0.00s)
=== RUN   TestPreviewGeneration
--- PASS: TestPreviewGeneration (0.00s)
=== RUN   TestSyntaxValidation
--- PASS: TestSyntaxValidation (0.00s)
=== RUN   TestRequiredVariables
--- PASS: TestRequiredVariables (0.00s)
=== RUN   TestVariableTypes
--- PASS: TestVariableTypes (0.00s)
=== RUN   TestUndefinedVariables
--- PASS: TestUndefinedVariables (0.00s)
=== RUN   TestBalancedDelimiters
=== RUN   TestBalancedDelimiters/balanced
=== RUN   TestBalancedDelimiters/multiple_balanced
=== RUN   TestBalancedDelimiters/unbalanced_open
=== RUN   TestBalancedDelimiters/unbalanced_close
=== RUN   TestBalancedDelimiters/mixed
--- PASS: TestBalancedDelimiters (0.00s)
    --- PASS: TestBalancedDelimiters/balanced (0.00s)
    --- PASS: TestBalancedDelimiters/multiple_balanced (0.00s)
    --- PASS: TestBalancedDelimiters/unbalanced_open (0.00s)
    --- PASS: TestBalancedDelimiters/unbalanced_close (0.00s)
    --- PASS: TestBalancedDelimiters/mixed (0.00s)
=== RUN   TestVariableNameFormat
=== RUN   TestVariableNameFormat/alphanumeric
=== RUN   TestVariableNameFormat/underscore
=== RUN   TestVariableNameFormat/number_suffix
=== RUN   TestVariableNameFormat/starts_with_number
=== RUN   TestVariableNameFormat/special_chars
=== RUN   TestVariableNameFormat/spaces
--- PASS: TestVariableNameFormat (0.00s)
    --- PASS: TestVariableNameFormat/alphanumeric (0.00s)
    --- PASS: TestVariableNameFormat/underscore (0.00s)
    --- PASS: TestVariableNameFormat/number_suffix (0.00s)
    --- PASS: TestVariableNameFormat/starts_with_number (0.00s)
    --- PASS: TestVariableNameFormat/special_chars (0.00s)
    --- PASS: TestVariableNameFormat/spaces (0.00s)
=== RUN   TestTemplateSizeLimit
--- PASS: TestTemplateSizeLimit (0.01s)
=== RUN   TestVariableCountLimit
--- PASS: TestVariableCountLimit (0.00s)
=== RUN   TestStandardLibraryLoading
--- PASS: TestStandardLibraryLoading (0.01s)
=== RUN   TestStandardLibraryRetrieval
--- PASS: TestStandardLibraryRetrieval (0.01s)
=== RUN   TestStandardLibraryCategories
--- PASS: TestStandardLibraryCategories (0.01s)
=== RUN   TestStandardLibraryInstantiation
--- PASS: TestStandardLibraryInstantiation (0.01s)
=== RUN   TestStandardLibraryIDs
--- PASS: TestStandardLibraryIDs (0.02s)
=== RUN   TestStandardLibraryExclusion
--- PASS: TestStandardLibraryExclusion (0.01s)
=== RUN   TestStandardLibraryLazyLoading
--- PASS: TestStandardLibraryLazyLoading (0.01s)
=== RUN   TestAccessControl_FilterPersonas
=== RUN   TestAccessControl_FilterPersonas/Alice_sees_her_private_+_Bob's_public_+_Charlie's_shared
=== RUN   TestAccessControl_FilterPersonas/Bob_sees_his_public_+_Charlie's_shared
=== RUN   TestAccessControl_FilterPersonas/Dave_(not_in_shared_list)_sees_only_Bob's_public
=== RUN   TestAccessControl_FilterPersonas/Anonymous_user_sees_only_Bob's_public
--- PASS: TestAccessControl_FilterPersonas (0.00s)
    --- PASS: TestAccessControl_FilterPersonas/Alice_sees_her_private_+_Bob's_public_+_Charlie's_shared (0.00s)
    --- PASS: TestAccessControl_FilterPersonas/Bob_sees_his_public_+_Charlie's_shared (0.00s)
    --- PASS: TestAccessControl_FilterPersonas/Dave_(not_in_shared_list)_sees_only_Bob's_public (0.00s)
    --- PASS: TestAccessControl_FilterPersonas/Anonymous_user_sees_only_Bob's_public (0.00s)
=== RUN   TestAccessControl_ReadPermissions
=== RUN   TestAccessControl_ReadPermissions/Owner_can_read_own_private_element
=== RUN   TestAccessControl_ReadPermissions/Non-owner_cannot_read_private_element
=== RUN   TestAccessControl_ReadPermissions/Anyone_can_read_public_element
=== RUN   TestAccessControl_ReadPermissions/Anonymous_can_read_public_element
=== RUN   TestAccessControl_ReadPermissions/Shared_user_can_read_shared_element
=== RUN   TestAccessControl_ReadPermissions/Non-shared_user_cannot_read_shared_element
=== RUN   TestAccessControl_ReadPermissions/Anonymous_cannot_read_shared_element
--- PASS: TestAccessControl_ReadPermissions (0.00s)
    --- PASS: TestAccessControl_ReadPermissions/Owner_can_read_own_private_element (0.00s)
    --- PASS: TestAccessControl_ReadPermissions/Non-owner_cannot_read_private_element (0.00s)
    --- PASS: TestAccessControl_ReadPermissions/Anyone_can_read_public_element (0.00s)
    --- PASS: TestAccessControl_ReadPermissions/Anonymous_can_read_public_element (0.00s)
    --- PASS: TestAccessControl_ReadPermissions/Shared_user_can_read_shared_element (0.00s)
    --- PASS: TestAccessControl_ReadPermissions/Non-shared_user_cannot_read_shared_element (0.00s)
    --- PASS: TestAccessControl_ReadPermissions/Anonymous_cannot_read_shared_element (0.00s)
=== RUN   TestAccessControl_WriteAndDeletePermissions
=== RUN   TestAccessControl_WriteAndDeletePermissions/Owner_can_write_and_delete
=== RUN   TestAccessControl_WriteAndDeletePermissions/Non-owner_cannot_write_or_delete
=== RUN   TestAccessControl_WriteAndDeletePermissions/Anonymous_cannot_write_or_delete
--- PASS: TestAccessControl_WriteAndDeletePermissions (0.00s)
    --- PASS: TestAccessControl_WriteAndDeletePermissions/Owner_can_write_and_delete (0.00s)
    --- PASS: TestAccessControl_WriteAndDeletePermissions/Non-owner_cannot_write_or_delete (0.00s)
    --- PASS: TestAccessControl_WriteAndDeletePermissions/Anonymous_cannot_write_or_delete (0.00s)
=== RUN   TestAccessControl_SharePermissions
=== RUN   TestAccessControl_SharePermissions/Owner_can_share_shared_element
=== RUN   TestAccessControl_SharePermissions/Owner_cannot_share_private_element
=== RUN   TestAccessControl_SharePermissions/Owner_cannot_share_public_element
=== RUN   TestAccessControl_SharePermissions/Non-owner_cannot_share
=== RUN   TestAccessControl_SharePermissions/Anonymous_cannot_share
--- PASS: TestAccessControl_SharePermissions (0.00s)
    --- PASS: TestAccessControl_SharePermissions/Owner_can_share_shared_element (0.00s)
    --- PASS: TestAccessControl_SharePermissions/Owner_cannot_share_private_element (0.00s)
    --- PASS: TestAccessControl_SharePermissions/Owner_cannot_share_public_element (0.00s)
    --- PASS: TestAccessControl_SharePermissions/Non-owner_cannot_share (0.00s)
    --- PASS: TestAccessControl_SharePermissions/Anonymous_cannot_share (0.00s)
=== RUN   TestAccessControl_OwnershipValidation
=== RUN   TestAccessControl_OwnershipValidation/User_is_owner
=== RUN   TestAccessControl_OwnershipValidation/User_is_not_owner
=== RUN   TestAccessControl_OwnershipValidation/Anonymous_is_not_owner
=== RUN   TestAccessControl_OwnershipValidation/Empty_owner_with_empty_user_is_not_owner
--- PASS: TestAccessControl_OwnershipValidation (0.00s)
    --- PASS: TestAccessControl_OwnershipValidation/User_is_owner (0.00s)
    --- PASS: TestAccessControl_OwnershipValidation/User_is_not_owner (0.00s)
    --- PASS: TestAccessControl_OwnershipValidation/Anonymous_is_not_owner (0.00s)
    --- PASS: TestAccessControl_OwnershipValidation/Empty_owner_with_empty_user_is_not_owner (0.00s)
=== RUN   TestSkillWithTemplate
    elements_integration_test.go:53:  Skill successfully references Template for rendering
--- PASS: TestSkillWithTemplate (0.00s)
=== RUN   TestAgentExecutingSkills
    elements_integration_test.go:87:  Agent orchestrates 2 Skills in a workflow
--- PASS: TestAgentExecutingSkills (0.00s)
=== RUN   TestEnsembleCoordinatingAgents
    elements_integration_test.go:123:  Ensemble coordinates 2 Agents in parallel mode
--- PASS: TestEnsembleCoordinatingAgents (0.00s)
=== RUN   TestMemoryDeduplication
    elements_integration_test.go:157:  Memory deduplication working correctly via SHA-256 hashing
--- PASS: TestMemoryDeduplication (0.00s)
=== RUN   TestPersonaHotSwap
    elements_integration_test.go:199:  Persona hot-swap successful: switched from Technical Expert to Creative Writer
--- PASS: TestPersonaHotSwap (0.00s)
=== RUN   TestE2EAllElementTypes
    elements_integration_test.go:275:  E2E Test PASSED: All 6 element types created and verified (6 total elements)
--- PASS: TestE2EAllElementTypes (0.00s)
=== RUN   TestRegistryCacheIntegration
=== RUN   TestRegistryCacheIntegration/cache_hit_performance
    registry_integration_test.go:48: Cache miss: 5.905s, Cache hit: 1.555s
=== RUN   TestRegistryCacheIntegration/cache_expiration
=== RUN   TestRegistryCacheIntegration/cache_statistics
=== RUN   TestRegistryCacheIntegration/cache_invalidation
=== RUN   TestRegistryCacheIntegration/cache_clear_all
--- PASS: TestRegistryCacheIntegration (0.15s)
    --- PASS: TestRegistryCacheIntegration/cache_hit_performance (0.00s)
    --- PASS: TestRegistryCacheIntegration/cache_expiration (0.15s)
    --- PASS: TestRegistryCacheIntegration/cache_statistics (0.00s)
    --- PASS: TestRegistryCacheIntegration/cache_invalidation (0.00s)
    --- PASS: TestRegistryCacheIntegration/cache_clear_all (0.00s)
=== RUN   TestMetadataIndexIntegration
=== RUN   TestMetadataIndexIntegration/search_by_category
=== RUN   TestMetadataIndexIntegration/search_by_author
=== RUN   TestMetadataIndexIntegration/search_by_tags
=== RUN   TestMetadataIndexIntegration/search_by_query
=== RUN   TestMetadataIndexIntegration/pagination
=== RUN   TestMetadataIndexIntegration/index_statistics
=== RUN   TestMetadataIndexIntegration/index_rebuild
--- PASS: TestMetadataIndexIntegration (0.00s)
    --- PASS: TestMetadataIndexIntegration/search_by_category (0.00s)
    --- PASS: TestMetadataIndexIntegration/search_by_author (0.00s)
    --- PASS: TestMetadataIndexIntegration/search_by_tags (0.00s)
    --- PASS: TestMetadataIndexIntegration/search_by_query (0.00s)
    --- PASS: TestMetadataIndexIntegration/pagination (0.00s)
    --- PASS: TestMetadataIndexIntegration/index_statistics (0.00s)
    --- PASS: TestMetadataIndexIntegration/index_rebuild (0.00s)
=== RUN   TestDependencyGraphIntegration
=== RUN   TestDependencyGraphIntegration/simple_dependency_chain
=== RUN   TestDependencyGraphIntegration/circular_dependency_detection
=== RUN   TestDependencyGraphIntegration/diamond_dependency
--- PASS: TestDependencyGraphIntegration (0.00s)
    --- PASS: TestDependencyGraphIntegration/simple_dependency_chain (0.00s)
    --- PASS: TestDependencyGraphIntegration/circular_dependency_detection (0.00s)
    --- PASS: TestDependencyGraphIntegration/diamond_dependency (0.00s)
=== RUN   TestSecurityIntegration
=== RUN   TestSecurityIntegration/clean_collection_passes_all_checks
=== RUN   TestSecurityIntegration/malicious_code_detected
=== RUN   TestSecurityIntegration/checksum_tampering_detected
=== RUN   TestSecurityIntegration/trusted_source_validation
=== RUN   TestSecurityIntegration/security_config_validation
--- PASS: TestSecurityIntegration (0.02s)
    --- PASS: TestSecurityIntegration/clean_collection_passes_all_checks (0.00s)
    --- PASS: TestSecurityIntegration/malicious_code_detected (0.00s)
    --- PASS: TestSecurityIntegration/checksum_tampering_detected (0.00s)
    --- PASS: TestSecurityIntegration/trusted_source_validation (0.00s)
    --- PASS: TestSecurityIntegration/security_config_validation (0.00s)
=== RUN   TestCodeScannerPatterns
=== RUN   TestCodeScannerPatterns/eval_injection
=== RUN   TestCodeScannerPatterns/exec_injection
=== RUN   TestCodeScannerPatterns/rm_rf
=== RUN   TestCodeScannerPatterns/curl_bash
=== RUN   TestCodeScannerPatterns/netcat_listener
=== RUN   TestCodeScannerPatterns/chmod_777
=== RUN   TestCodeScannerPatterns/sql_injection
=== RUN   TestCodeScannerPatterns/base64_decode
--- PASS: TestCodeScannerPatterns (0.01s)
    --- PASS: TestCodeScannerPatterns/eval_injection (0.00s)
    --- PASS: TestCodeScannerPatterns/exec_injection (0.00s)
    --- PASS: TestCodeScannerPatterns/rm_rf (0.00s)
    --- PASS: TestCodeScannerPatterns/curl_bash (0.00s)
    --- PASS: TestCodeScannerPatterns/netcat_listener (0.00s)
    --- PASS: TestCodeScannerPatterns/chmod_777 (0.00s)
    --- PASS: TestCodeScannerPatterns/sql_injection (0.00s)
    --- PASS: TestCodeScannerPatterns/base64_decode (0.00s)
=== RUN   TestChecksumAlgorithms
=== RUN   TestChecksumAlgorithms/sha256
=== RUN   TestChecksumAlgorithms/sha512
--- PASS: TestChecksumAlgorithms (0.00s)
    --- PASS: TestChecksumAlgorithms/sha256 (0.00s)
    --- PASS: TestChecksumAlgorithms/sha512 (0.00s)
=== RUN   TestScannerThreshold
=== RUN   TestScannerThreshold/critical
=== RUN   TestScannerThreshold/high
=== RUN   TestScannerThreshold/medium
=== RUN   TestScannerThreshold/low
--- PASS: TestScannerThreshold (0.02s)
    --- PASS: TestScannerThreshold/critical (0.00s)
    --- PASS: TestScannerThreshold/high (0.01s)
    --- PASS: TestScannerThreshold/medium (0.00s)
    --- PASS: TestScannerThreshold/low (0.00s)
=== RUN   TestValidatorIntegration
=== RUN   TestValidatorIntegration/valid_complete_manifest
=== RUN   TestValidatorIntegration/missing_required_fields
=== RUN   TestValidatorIntegration/invalid_version_format
=== RUN   TestValidatorIntegration/invalid_email
=== RUN   TestValidatorIntegration/path_traversal_attempt
=== RUN   TestValidatorIntegration/shell_injection_in_hooks
=== RUN   TestValidatorIntegration/circular_dependency
=== RUN   TestValidatorIntegration/excessive_elements
--- PASS: TestValidatorIntegration (0.01s)
    --- PASS: TestValidatorIntegration/valid_complete_manifest (0.00s)
    --- PASS: TestValidatorIntegration/missing_required_fields (0.00s)
    --- PASS: TestValidatorIntegration/invalid_version_format (0.00s)
    --- PASS: TestValidatorIntegration/invalid_email (0.00s)
    --- PASS: TestValidatorIntegration/path_traversal_attempt (0.00s)
    --- PASS: TestValidatorIntegration/shell_injection_in_hooks (0.00s)
    --- PASS: TestValidatorIntegration/circular_dependency (0.00s)
    --- PASS: TestValidatorIntegration/excessive_elements (0.00s)
=== RUN   TestValidatorWithRealFiles
--- PASS: TestValidatorWithRealFiles (0.00s)
=== RUN   TestValidatorPerformance
    validator_integration_test.go:287: Validated 875 rules for 100 elements
--- PASS: TestValidatorPerformance (0.00s)
=== RUN   TestValidatorErrorMessages
--- PASS: TestValidatorErrorMessages (0.00s)
PASS
coverage: [no statements]
ok  	github.com/fsvxavier/nexs-mcp/test/integration	(cached)	coverage: [no statements]
FAIL
make: *** [Makefile:38: test-coverage] Erro 1
