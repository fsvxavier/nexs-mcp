id: code-review-team-001
name: Comprehensive Code Review Team
type: ensemble
description: Multi-agent ensemble that performs thorough code reviews from security, performance, architecture, and maintainability perspectives.
status: active
version: "1.0.0"
created_at: "2025-12-20T00:00:00Z"
updated_at: "2025-12-20T00:00:00Z"
tags:
  - code-review
  - quality-assurance
  - multi-agent
  - ensemble
category: engineering
metadata:
  author: NEXS-MCP Team
  license: MIT
  difficulty: advanced
  
members:
  - id: security-reviewer
    agent_id: security-agent-001
    role: security_specialist
    weight: 0.3
    description: Focuses on security vulnerabilities and best practices
    
  - id: performance-reviewer
    agent_id: performance-agent-001
    role: performance_specialist
    weight: 0.25
    description: Analyzes performance implications and optimizations
    
  - id: architecture-reviewer
    agent_id: architecture-agent-001
    role: architecture_specialist
    weight: 0.25
    description: Evaluates design patterns and architectural decisions
    
  - id: maintainability-reviewer
    agent_id: maintainability-agent-001
    role: maintainability_specialist
    weight: 0.2
    description: Assesses code quality, readability, and maintainability
    
execution_mode: parallel
max_retries: 2
timeout: 300  # 5 minutes

aggregation_strategy: weighted_consensus
consensus_threshold: 0.75
fallback_strategy: most_experienced

shared_context:
  - code_to_review
  - programming_language
  - project_context
  - coding_standards
  - previous_reviews
  
input_schema:
  type: object
  required:
    - code
    - language
  properties:
    code:
      type: string
      description: Code to review
    language:
      type: string
      description: Programming language
    context:
      type: string
      description: Additional context about code purpose
    focus_areas:
      type: array
      description: Specific areas to prioritize
      
output_schema:
  type: object
  properties:
    overall_score:
      type: number
      minimum: 0
      maximum: 10
      description: Aggregated quality score
    consensus_level:
      type: number
      description: Agreement level between reviewers
    critical_issues:
      type: array
      description: Blocking issues that must be fixed
    warnings:
      type: array
      description: Important issues to address
    suggestions:
      type: array
      description: Recommendations for improvement
    detailed_reviews:
      type: object
      description: Individual reviews from each specialist
    recommendation:
      type: string
      enum: [approve, approve_with_changes, request_changes, reject]
      
coordination:
  pre_execution:
    - Load project coding standards
    - Retrieve previous review history
    - Initialize shared context
    
  during_execution:
    - Monitor progress of each reviewer
    - Share identified issues between agents
    - Detect duplicate findings
    
  post_execution:
    - Aggregate scores using weighted average
    - Deduplicate findings
    - Prioritize issues by severity and frequency
    - Generate final recommendation
    
fallback_chain:
  - primary: all_members
  - fallback_1: [security-reviewer, architecture-reviewer]
  - fallback_2: architecture-reviewer
  
monitoring:
  track_consensus_levels: true
  track_review_times: true
  track_issue_frequency: true
  alert_on_low_consensus: true
  alert_threshold: 0.5
  
examples:
  - input:
      code: |
        function processPayment(amount, cardNumber) {
          const query = `SELECT * FROM cards WHERE number = ${cardNumber}`;
          const card = db.query(query);
          if (card.balance >= amount) {
            card.balance -= amount;
            return { success: true };
          }
          return { success: false };
        }
      language: javascript
    output:
      overall_score: 2.5
      consensus_level: 0.95
      critical_issues:
        - SQL injection vulnerability (security-reviewer)
        - Sensitive data logging (security-reviewer)
        - Race condition in balance check (performance-reviewer)
        - No transaction handling (architecture-reviewer)
      warnings:
        - Missing error handling (maintainability-reviewer)
        - No input validation (security-reviewer)
        - Synchronous database operation (performance-reviewer)
      recommendation: reject
      detailed_reviews:
        security: "Critical security vulnerabilities - SQL injection and lack of input validation"
        performance: "Race condition and blocking I/O will cause issues at scale"
        architecture: "Missing transaction boundaries, violates ACID properties"
        maintainability: "Poor error handling, unclear function contract"
